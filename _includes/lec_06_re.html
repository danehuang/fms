<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" href="{{ 'assets/coqdoc.css' | relative_url }}">
<title>lec_06_re</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">


<div class="code">
</div>

<div class="doc">
<a id="lab1"></a>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">mathcomp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">all_ssreflect</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab2"></a><h2 class="section">References</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> https://github.com/coq-community/reglang

<div class="paragraph"> </div>

     Authors: Christian Doczkal and Jan-Oliver Kaiser
     Distributed under the terms of CeCILL-B.

</li>
</ul>
 
</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">lec_05_dfa</span>.<br/>
<span class="comment">(*&nbsp;Authors:&nbsp;Christian&nbsp;Doczkal&nbsp;and&nbsp;Jan-Oliver&nbsp;Kaiser&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Distributed&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;CeCILL-B.&nbsp;*)</span><br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">lib_reglang</span>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type".<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>
<span class="id" title="keyword">Unset</span> <span class="id" title="keyword">Strict</span> <span class="id" title="keyword">Implicit</span>.<br/>
<span class="id" title="keyword">Unset</span> <span class="id" title="keyword">Printing</span> <span class="id" title="keyword">Implicit</span> <span class="id" title="var">Defensive</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab3"></a><h2 class="section">Recap</h2>

<ul class="doclist">
<li> Last time, we saw DFAs as our first example of an abstract machine.

</li>
<li> As a reminder, the transition function was the small-step semantics.

</li>
<li> Today, we'll take a linguistic view of the DFA.

</li>
</ul>
 
<div class="paragraph"> </div>

<a id="lab4"></a><h2 class="section">Goal for today</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Introduce <i>regular expressions</i> (REs) and show that they are equivalent
     to DFAs.  In particular, we'll see that REs are the "language" corresponding
     to a DFA.

</li>
<li> We'll show the equivalence of REs and DFAs via non-deterministic
     finite automata (NFA). NFAs will make the proof of equivalence easier.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a id="RegExp" class="idref" href="#RegExp"><span class="id" title="section">RegExp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="RegExp.char" class="idref" href="#RegExp.char"><span class="id" title="variable">char</span></a> : <span class="id" title="abbreviation">eqType</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab5"></a><h3 class="section">Syntax</h3>

</div>
<div class="code">
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e&nbsp;::=&nbsp;0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;\epsilon<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;c<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;e*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;e&nbsp;+&nbsp;e<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;ee<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="regexp" class="idref" href="#regexp"><span class="id" title="inductive">regexp</span></a> :=<br/>
&nbsp;&nbsp;| <a id="Void" class="idref" href="#Void"><span class="id" title="constructor">Void</span></a>                      <span class="comment">(*&nbsp;empty&nbsp;regular&nbsp;expression&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a id="Eps" class="idref" href="#Eps"><span class="id" title="constructor">Eps</span></a>                       <span class="comment">(*&nbsp;match&nbsp;nothing&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a id="Atom" class="idref" href="#Atom"><span class="id" title="constructor">Atom</span></a> <span class="id" title="keyword">of</span> <a class="idref" href="lec_06_re.html#RegExp.char"><span class="id" title="variable">char</span></a>              <span class="comment">(*&nbsp;match&nbsp;a&nbsp;character&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a id="Star" class="idref" href="#Star"><span class="id" title="constructor">Star</span></a> <span class="id" title="keyword">of</span> <a class="idref" href="lec_06_re.html#regexp:2"><span class="id" title="inductive">regexp</span></a>            <span class="comment">(*&nbsp;any&nbsp;number&nbsp;of&nbsp;matches&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a id="Plus" class="idref" href="#Plus"><span class="id" title="constructor">Plus</span></a> <span class="id" title="keyword">of</span> <a class="idref" href="lec_06_re.html#regexp:2"><span class="id" title="inductive">regexp</span></a> &amp; <a class="idref" href="lec_06_re.html#regexp:2"><span class="id" title="inductive">regexp</span></a>   <span class="comment">(*&nbsp;or.&nbsp;this&nbsp;is&nbsp;usually&nbsp;written&nbsp;|&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a id="Conc" class="idref" href="#Conc"><span class="id" title="constructor">Conc</span></a> <span class="id" title="keyword">of</span> <a class="idref" href="lec_06_re.html#regexp:2"><span class="id" title="inductive">regexp</span></a> &amp; <a class="idref" href="lec_06_re.html#regexp:2"><span class="id" title="inductive">regexp</span></a>   <span class="comment">(*&nbsp;concatenation&nbsp;*)</span><br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
<a id="lab6"></a><h3 class="section">Equality of regular expressions is decidable</h3>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="eq_regexp_dec" class="idref" href="#eq_regexp_dec"><span class="id" title="lemma">eq_regexp_dec</span></a> (<a id="e1:4" class="idref" href="#e1:4"><span class="id" title="binder">e1</span></a> <a id="e2:5" class="idref" href="#e2:5"><span class="id" title="binder">e2</span></a>: <a class="idref" href="lec_06_re.html#regexp"><span class="id" title="inductive">regexp</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="lec_06_re.html#e1:4"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_06_re.html#e2:5"><span class="id" title="variable">e2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="lec_06_re.html#e1:4"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="lec_06_re.html#e2:5"><span class="id" title="variable">e2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decide</span> <span class="id" title="var">equality</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <span class="id" title="definition">eq_comparable</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="regexp_eqMixin" class="idref" href="#regexp_eqMixin"><span class="id" title="definition">regexp_eqMixin</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">EqMixin</span> (<span class="id" title="lemma">compareP</span> <a class="idref" href="lec_06_re.html#eq_regexp_dec"><span class="id" title="lemma">eq_regexp_dec</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Canonical</span> <span class="id" title="keyword">Structure</span> <a id="form_eqType" class="idref" href="#form_eqType"><span class="id" title="definition">form_eqType</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">EqType</span> <span class="id" title="var">_</span> <a class="idref" href="lec_06_re.html#regexp_eqMixin"><span class="id" title="definition">regexp_eqMixin</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="lec_06_re.html#RegExp"><span class="id" title="section">RegExp</span></a>.<br/>

<br/>
<span class="id" title="var">Arguments</span> <span class="id" title="definition">void</span> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="var">Arguments</span> <span class="id" title="definition">eps</span> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="var">Prenex</span> <span class="id" title="var">Implicits</span> <span class="id" title="var">Plus</span>.<br/>
<span class="id" title="var">Arguments</span> <span class="id" title="lemma">plusP</span> {<span class="id" title="var">char</span> <span class="id" title="var">r</span> <span class="id" title="var">s</span> <span class="id" title="var">w</span>}.<br/>
<span class="id" title="keyword">Notation</span> <a id=":::'Void'" class="idref" href="#:::'Void'"><span class="id" title="notation">&quot;</span></a>'Void'" := (@<a class="idref" href="lec_06_re.html#Void"><span class="id" title="constructor">Void</span></a> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Notation</span> <a id=":::'Eps'" class="idref" href="#:::'Eps'"><span class="id" title="notation">&quot;</span></a>'Eps'" := (@<a class="idref" href="lec_06_re.html#Eps"><span class="id" title="constructor">Eps</span></a> <span class="id" title="var">_</span>).<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<ul class="doclist">
<li> For a DFA, we defined the language that it recognized by those words that
    when fed into a DFA transitioned from the start state to a final state.

</li>
<li> How might we do this for a regular expression?

</li>
<li> We define the language recognized by a regular expression by
    structural recursion on the regular expression.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="re_lang" class="idref" href="#re_lang"><span class="id" title="definition">re_lang</span></a> (<a id="char:6" class="idref" href="#char:6"><span class="id" title="binder">char</span></a>: <span class="id" title="abbreviation">eqType</span>) (<a id="e:7" class="idref" href="#e:7"><span class="id" title="binder">e</span></a>: <a class="idref" href="lec_06_re.html#regexp"><span class="id" title="inductive">regexp</span></a> <a class="idref" href="lec_06_re.html#char:6"><span class="id" title="variable">char</span></a>): <span class="id" title="definition">dlang</span> <a class="idref" href="lec_06_re.html#char:6"><span class="id" title="variable">char</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="lec_06_re.html#e:7"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_06_re.html#:::'Void'"><span class="id" title="notation">Void</span></a> =&gt; <span class="id" title="definition">void</span> <a class="idref" href="lec_06_re.html#char:6"><span class="id" title="variable">char</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_06_re.html#:::'Eps'"><span class="id" title="notation">Eps</span></a> =&gt; <span class="id" title="definition">eps</span> <a class="idref" href="lec_06_re.html#char:6"><span class="id" title="variable">char</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_06_re.html#Atom"><span class="id" title="constructor">Atom</span></a> <span class="id" title="var">x</span> =&gt; <span class="id" title="definition">atom</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_06_re.html#Star"><span class="id" title="constructor">Star</span></a> <span class="id" title="var">e1</span> =&gt; <span class="id" title="definition">star</span> (<a class="idref" href="lec_06_re.html#re_lang:8"><span class="id" title="definition">re_lang</span></a> <span class="id" title="var">e1</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="lec_06_re.html#Plus"><span class="id" title="constructor">Plus</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="definition">plus</span> (<a class="idref" href="lec_06_re.html#re_lang:8"><span class="id" title="definition">re_lang</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="lec_06_re.html#re_lang:8"><span class="id" title="definition">re_lang</span></a> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="lec_06_re.html#Conc"><span class="id" title="constructor">Conc</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> =&gt; <span class="id" title="definition">conc</span> (<a class="idref" href="lec_06_re.html#re_lang:8"><span class="id" title="definition">re_lang</span></a> <span class="id" title="var">e1</span>) (<a class="idref" href="lec_06_re.html#re_lang:8"><span class="id" title="definition">re_lang</span></a> <span class="id" title="var">e2</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="definition">void</span>.<br/>
</div>

<div class="doc">
==&gt; <span class="inlinecode"><span class="id" title="keyword">fun</span></span> <span class="inlinecode"><span class="id" title="var">char</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">eqType</span></span> <span class="inlinecode">=&gt;</span> <span class="inlinecode"><span class="id" title="var">pred0</span></span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="definition">eps</span>.<br/>
</div>

<div class="doc">
==&gt; <span class="inlinecode"><span class="id" title="keyword">fun</span></span> <span class="inlinecode"><span class="id" title="var">char</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">eqType</span></span> <span class="inlinecode">=&gt;</span> <span class="inlinecode"><span class="id" title="var">pred1</span></span> <span class="inlinecode">[::]</span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="definition">atom</span>.<br/>
</div>

<div class="doc">
==&gt; <span class="inlinecode"><span class="id" title="keyword">fun</span></span> <span class="inlinecode">(<span class="id" title="var">char</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">eqType</span>)</span> <span class="inlinecode">(<span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">char</span>)</span> <span class="inlinecode">=&gt;</span> <span class="inlinecode"><span class="id" title="var">pred1</span></span> <span class="inlinecode">[::</span> <span class="inlinecode"><span class="id" title="var">x</span>]</span> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="definition">star</span>.<br/>
</div>

<div class="doc">
<pre>
fun (char : eqType) (l : dlang char) =&gt;
fix star (v : word char) : bool :=
  match v with
  | [::] =&gt; true
  | x :: v' =&gt; conc (languages.residual x l) star v'
  end
</pre>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="definition">plus</span>.<br/>
</div>

<div class="doc">
<pre>
   fun (char : eqType) (l1 l2 : dlang char) =&gt; [pred w | (w \in l1) || (w \in l2)]
</pre>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="definition">conc</span>.<br/>
</div>

<div class="doc">
<pre>
   fun (char : eqType) (l1 l2 : dlang char) (v : word char) =&gt;
     [exists i, l1 (take i v) &amp;&amp; l2 (drop i v)]
</pre>
 
</div>
<div class="code">

<br/>
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;We&nbsp;could&nbsp;also&nbsp;define&nbsp;this&nbsp;via&nbsp;the&nbsp;following&nbsp;inductive&nbsp;relation.<br/>
<br/>
&nbsp;&nbsp;&nbsp;---------------------------<br/>
&nbsp;&nbsp;&nbsp;(\epsilon,&nbsp;<span class="inlinecode"></span>)&nbsp;\in&nbsp;re_lang<br/>
<br/>
&nbsp;&nbsp;&nbsp;---------------------------<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(c,&nbsp;<span class="inlinecode"><span class="id" title="var">c</span></span>)&nbsp;\in&nbsp;re_lang<br/>
<br/>
&nbsp;&nbsp;&nbsp;---------------------------<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(e*,&nbsp;<span class="inlinecode"></span>)&nbsp;\in&nbsp;re_lang<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(e,&nbsp;w1)&nbsp;\in&nbsp;re_lang&nbsp;&nbsp;&nbsp;(e*,&nbsp;w2)&nbsp;\in&nbsp;re_lang<br/>
&nbsp;&nbsp;&nbsp;---------------------------------------------<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(e+e*,&nbsp;w1++w2)&nbsp;\in&nbsp;re_lang<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(e1,&nbsp;w)&nbsp;\in&nbsp;re_lang<br/>
&nbsp;&nbsp;&nbsp;-----------------------------<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(e1+e2,&nbsp;w)&nbsp;\in&nbsp;re_lang<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(e2,&nbsp;w)&nbsp;\in&nbsp;re_lang<br/>
&nbsp;&nbsp;&nbsp;-----------------------------<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(e1+e2,&nbsp;w)&nbsp;\in&nbsp;re_lang<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(e1,&nbsp;w1)&nbsp;\in&nbsp;re_lang&nbsp;&nbsp;(e2,&nbsp;w2)&nbsp;\in&nbsp;re_lang<br/>
&nbsp;&nbsp;&nbsp;---------------------------------------------<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(e1e2,&nbsp;w1++w2)&nbsp;\in&nbsp;re_lang<br/>
&nbsp;*)</span><br/>

<br/>
<span class="comment">(*<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;What&nbsp;languages&nbsp;do&nbsp;these&nbsp;regular&nbsp;expressions&nbsp;match?<br/>
<br/>
&nbsp;&nbsp;&nbsp;Example&nbsp;1:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;101&nbsp;+&nbsp;010<br/>
<br/>
&nbsp;&nbsp;&nbsp;Example&nbsp;2:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((00)*1)*<br/>
<br/>
&nbsp;&nbsp;&nbsp;Example&nbsp;3:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((11)*0)*<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> We're going to prove that regular expressions and DFAs recognize the same languages.

</li>
<li> To do this, we'll introduce two new concepts: nondeterministic finite automata (NFA)
     and epsilon nondterministic finite automata (eNFA).

</li>
<li> Why are we doing this?
    * It will be easy to convert between DFA and NFA.
    * It will be easy to convert between NFA and eNFA.
    * It will be easier to prove properties of * and + using eNFA.
    * It will be easy to translate DFA into RE.

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;Picture&nbsp;to&nbsp;keep&nbsp;in&nbsp;mind.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-&gt;&nbsp;RE<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;v<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;NFA&nbsp;&lt;-&gt;&nbsp;eNFA<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;^&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;|&nbsp;v<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|--DFA<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab7"></a><h2 class="section">Nondeterministic Finite Automata (NFA)</h2>

</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;Picture&nbsp;to&nbsp;keep&nbsp;in&nbsp;mind.<br/>
<br/>
&nbsp;|-&gt;&nbsp;RE<br/>
&nbsp;|&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;|&nbsp;&nbsp;&nbsp;v<br/>
&nbsp;|&nbsp;*NFA*&nbsp;&lt;-&gt;&nbsp;eNFA<br/>
&nbsp;|&nbsp;&nbsp;*&nbsp;*<br/>
&nbsp;|&nbsp;&nbsp;^&nbsp;|<br/>
&nbsp;|&nbsp;&nbsp;|&nbsp;v<br/>
&nbsp;|&nbsp;&nbsp;*&nbsp;*<br/>
&nbsp;|--DFA<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;Why&nbsp;NFA?&nbsp;It&nbsp;will&nbsp;be&nbsp;easier&nbsp;to&nbsp;connect&nbsp;RE's&nbsp;to&nbsp;DFA's&nbsp;via&nbsp;NFA's.<br/>
&nbsp;*)</span><br/>

<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="NFA" class="idref" href="#NFA"><span class="id" title="section">NFA</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="NFA.char" class="idref" href="#NFA.char"><span class="id" title="variable">char</span></a> : <span class="id" title="abbreviation">finType</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Notation</span> <a id="word" class="idref" href="#word"><span class="id" title="abbreviation">word</span></a> := (<span class="id" title="definition">word</span> <a class="idref" href="lec_06_re.html#NFA.char"><span class="id" title="variable">char</span></a>).<br/>

<br/>
</div>

<div class="doc">
     Nondeterministic Finite Automata is a 5-tuple (Q, \Sigma, S, F, \delta) where
<ul class="doclist">
<li> Q is a finite set of states

</li>
<li> \Sigma is a finite alphabet of characters

</li>
<li> S is a set of starting states

</li>
<li> F is a set of final states

</li>
<li> \delta: Q x \Sigma x Q -&gt; bool is a transition *relation*

</li>
</ul>
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="nfa" class="idref" href="#nfa"><span class="id" title="record">nfa</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="nfa_state" class="idref" href="#nfa_state"><span class="id" title="projection">nfa_state</span></a> :&gt; <span class="id" title="abbreviation">finType</span>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="nfa_s" class="idref" href="#nfa_s"><span class="id" title="projection">nfa_s</span></a>: <span class="id" title="notation">{</span><span class="id" title="notation">set</span> <a class="idref" href="lec_06_re.html#nfa_state:12"><span class="id" title="method">nfa_state</span></a><span class="id" title="notation">}</span>;    <span class="comment">(*&nbsp;dfa_s:&nbsp;dfa_state&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="nfa_fin" class="idref" href="#nfa_fin"><span class="id" title="projection">nfa_fin</span></a>: <span class="id" title="notation">{</span><span class="id" title="notation">set</span> <a class="idref" href="lec_06_re.html#nfa_state:12"><span class="id" title="method">nfa_state</span></a><span class="id" title="notation">}</span>;  <span class="comment">(*&nbsp;dfa_fin:&nbsp;{set&nbsp;dfa_state}&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;dfa_trans:&nbsp;dfa_state&nbsp;-&gt;&nbsp;char&nbsp;-&gt;&nbsp;dfa_state&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="nfa_trans" class="idref" href="#nfa_trans"><span class="id" title="projection">nfa_trans</span></a>: <a class="idref" href="lec_06_re.html#nfa_state:12"><span class="id" title="method">nfa_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_06_re.html#NFA.char"><span class="id" title="variable">char</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_06_re.html#nfa_state:12"><span class="id" title="method">nfa_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> Defining NFA acceptance by structural recursion on words.    

</li>
</ul>
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="nfa_accept" class="idref" href="#nfa_accept"><span class="id" title="definition">nfa_accept</span></a> (<a id="A:16" class="idref" href="#A:16"><span class="id" title="binder">A</span></a>: <a class="idref" href="lec_06_re.html#nfa"><span class="id" title="record">nfa</span></a>) (<a id="x:17" class="idref" href="#x:17"><span class="id" title="binder">x</span></a>: <a class="idref" href="lec_06_re.html#A:16"><span class="id" title="variable">A</span></a>) (<a id="w:18" class="idref" href="#w:18"><span class="id" title="binder">w</span></a>: <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a>): <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="lec_06_re.html#w:18"><span class="id" title="variable">w</span></a> <span class="id" title="keyword">is</span> <span class="id" title="var">a</span> <span class="id" title="notation">::</span> <span class="id" title="var">w'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
<ul class="doclist">
<li> Different from DFA.

</li>
<li> There can be multiple transitions.

</li>
</ul>
       
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[</span><span class="id" title="notation">exists</span> <span class="id" title="notation">(</span><a id="y:21" class="idref" href="#y:21"><span class="id" title="binder">y</span></a> <span class="id" title="notation">|</span> <a class="idref" href="lec_06_re.html#nfa_trans"><span class="id" title="projection">nfa_trans</span></a> <a class="idref" href="lec_06_re.html#x:17"><span class="id" title="variable">x</span></a> <span class="id" title="var">a</span> <a class="idref" href="lec_06_re.html#y:21"><span class="id" title="variable">y</span></a><span class="id" title="notation">)</span><span class="id" title="notation">,</span> <a class="idref" href="lec_06_re.html#nfa_accept:19"><span class="id" title="definition">nfa_accept</span></a> <a class="idref" href="lec_06_re.html#y:21"><span class="id" title="variable">y</span></a> <span class="id" title="var">w'</span><span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;same&nbsp;as&nbsp;DFA&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#x:17"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#nfa_fin"><span class="id" title="projection">nfa_fin</span></a> <a class="idref" href="lec_06_re.html#A:16"><span class="id" title="variable">A</span></a>.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> As before, the language of a NFA A is the set of words that it accepts.

</li>
</ul>
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="nfa_lang" class="idref" href="#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> (<a id="A:22" class="idref" href="#A:22"><span class="id" title="binder">A</span></a>: <a class="idref" href="lec_06_re.html#nfa"><span class="id" title="record">nfa</span></a>): <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#simpl_pred"><span class="id" title="definition">simpl_pred</span></a> <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#27dabc72ea2c2c768f2db80a79f42524"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#27dabc72ea2c2c768f2db80a79f42524"><span class="id" title="notation">pred</span></a> <a id="w:23" class="idref" href="#w:23"><span class="id" title="binder">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#27dabc72ea2c2c768f2db80a79f42524"><span class="id" title="notation">|</span></a> <span class="id" title="notation">[</span><span class="id" title="notation">exists</span> <a id="s:24" class="idref" href="#s:24"><span class="id" title="binder">s</span></a><span class="id" title="notation">,</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="lec_06_re.html#s:24"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#nfa_s"><span class="id" title="projection">nfa_s</span></a> <a class="idref" href="lec_06_re.html#A:22"><span class="id" title="variable">A</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="lec_06_re.html#nfa_accept"><span class="id" title="definition">nfa_accept</span></a> <a class="idref" href="lec_06_re.html#s:24"><span class="id" title="variable">s</span></a> <a class="idref" href="lec_06_re.html#w:23"><span class="id" title="variable">w</span></a><span class="id" title="notation">]</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#27dabc72ea2c2c768f2db80a79f42524"><span class="id" title="notation">]</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="NFA.DFA_TO_NFA" class="idref" href="#NFA.DFA_TO_NFA"><span class="id" title="section">DFA_TO_NFA</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Goal:&nbsp;DFA&nbsp;-&gt;&nbsp;NFA<br/>
&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-&gt;&nbsp;RE<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;v<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;NFA&nbsp;&lt;-&gt;&nbsp;eNFA<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;*&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;^&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;|&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;*&nbsp;v<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|--DFA&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="NFA.DFA_TO_NFA.A" class="idref" href="#NFA.DFA_TO_NFA.A"><span class="id" title="variable">A</span></a> : <span class="id" title="record">dfa</span> <a class="idref" href="lec_06_re.html#NFA.char"><span class="id" title="variable">char</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="dfa_to_nfa" class="idref" href="#dfa_to_nfa"><span class="id" title="definition">dfa_to_nfa</span></a> : <a class="idref" href="lec_06_re.html#nfa"><span class="id" title="record">nfa</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_s"><span class="id" title="projection">nfa_s</span></a> := <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <span class="id" title="projection">dfa_s</span> <a class="idref" href="lec_06_re.html#NFA.DFA_TO_NFA.A"><span class="id" title="variable">A</span></a><span class="id" title="notation">]</span>;                 <span class="comment">(*&nbsp;singleton&nbsp;set&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_fin"><span class="id" title="projection">nfa_fin</span></a> := <span class="id" title="projection">dfa_fin</span> <a class="idref" href="lec_06_re.html#NFA.DFA_TO_NFA.A"><span class="id" title="variable">A</span></a>;                   <span class="comment">(*&nbsp;nothing&nbsp;changes&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_trans"><span class="id" title="projection">nfa_trans</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="x:26" class="idref" href="#x:26"><span class="id" title="binder">x</span></a>: <a class="idref" href="lec_06_re.html#NFA.DFA_TO_NFA.A"><span class="id" title="variable">A</span></a>) (<a id="a:27" class="idref" href="#a:27"><span class="id" title="binder">a</span></a>: <a class="idref" href="lec_06_re.html#NFA.char"><span class="id" title="variable">char</span></a>) (<a id="y:28" class="idref" href="#y:28"><span class="id" title="binder">y</span></a>: <a class="idref" href="lec_06_re.html#NFA.DFA_TO_NFA.A"><span class="id" title="variable">A</span></a>) =&gt; <span class="id" title="projection">dfa_trans</span> <a class="idref" href="lec_06_re.html#x:26"><span class="id" title="variable">x</span></a> <a class="idref" href="lec_06_re.html#a:27"><span class="id" title="variable">a</span></a> <span class="id" title="notation">==</span> <a class="idref" href="lec_06_re.html#y:28"><span class="id" title="variable">y</span></a>   <span class="comment">(*&nbsp;graph&nbsp;of&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> Hopefully, it is easy to see that this DFA to NFA construction is correct.

</li>
<li> You might notice that this is an *embedding*.

</li>
<li> What if you were asked to prove it?

</li>
<li> Proof: by structural induction on words and "follow the logic/definitions".

</li>
</ul>
     
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Locate</span> "=i".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="dfa_to_nfa_correct" class="idref" href="#dfa_to_nfa_correct"><span class="id" title="lemma">dfa_to_nfa_correct</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">dfa_lang</span> <a class="idref" href="lec_06_re.html#NFA.DFA_TO_NFA.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">=</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">i</span></a> <a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#dfa_to_nfa"><span class="id" title="definition">dfa_to_nfa</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="lec_06_re.html#nfa_s"><span class="id" title="projection">nfa_s</span></a> /=.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Induction&nbsp;on&nbsp;word&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <span class="id" title="var">w</span> (<span class="id" title="projection">dfa_s</span> <a class="idref" href="lec_06_re.html#NFA.DFA_TO_NFA.A"><span class="id" title="variable">A</span></a>) =&gt; [|<span class="id" title="var">b</span> <span class="id" title="var">w</span> <span class="id" title="var">IHw</span>] <span class="id" title="var">x</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">accE</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;nil&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#idP"><span class="id" title="lemma">idP</span></a>/<span class="id" title="lemma">existsP</span> =&gt; [<span class="id" title="var">Fx</span>|[<span class="id" title="var">y</span> /<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> [/<span class="id" title="lemma">set1P</span> -&gt;]]//].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span> <span class="id" title="abbreviation">eqxx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;cons&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHw</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Show&nbsp;set&nbsp;equality&nbsp;by&nbsp;showing&nbsp;both&nbsp;directions&nbsp;of&nbsp;inclusion.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> /<span class="id" title="lemma">exists_inP</span> /<span class="id" title="lemma">exists_inP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">case</span> =&gt; <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> =&gt; /<span class="id" title="lemma">set1P</span> -&gt; <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">exact</span>: <span class="id" title="lemma">set11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">existsP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="projection">dfa_trans</span> <span class="id" title="var">x</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="abbreviation">eqxx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">case</span> =&gt; <span class="id" title="var">y</span> /<span class="id" title="lemma">set1P</span> -&gt; {<span class="id" title="var">y</span>} /<span class="id" title="lemma">existsP</span> [<span class="id" title="var">z</span>] /<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> [] /<span class="id" title="lemma">eqP</span>-&gt; <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">z</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> ?<span class="id" title="lemma">set11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="lec_06_re.html#NFA.DFA_TO_NFA"><span class="id" title="section">DFA_TO_NFA</span></a>.<br/>

<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="NFA.NFA_TO_DFA" class="idref" href="#NFA.NFA_TO_DFA"><span class="id" title="section">NFA_TO_DFA</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Goal:&nbsp;NFA&nbsp;-&gt;&nbsp;DFA<br/>
&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-&gt;&nbsp;RE<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;v<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;NFA&nbsp;&lt;-&gt;&nbsp;eNFA<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;^&nbsp;*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;|&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;|&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;|&nbsp;*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|--DFA&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="NFA.NFA_TO_DFA.A" class="idref" href="#NFA.NFA_TO_DFA.A"><span class="id" title="variable">A</span></a> : <a class="idref" href="lec_06_re.html#nfa"><span class="id" title="record">nfa</span></a>.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> Translating a NFA to a DFA is also possible.

</li>
<li> This might seem hard to believe if this is your first time seeing such a translation.

</li>
<li> In particular, a NFA enables non-deterministic transitions whereas a DFA is
         deterministic.

</li>
<li> The following is a useful trick to convert a problem with non-determinism into
         a deterministic solution: use the *powerset*.

</li>
</ul>
     
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="nfa_to_dfa" class="idref" href="#nfa_to_dfa"><span class="id" title="definition">nfa_to_dfa</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">dfa_s</span> := <a class="idref" href="lec_06_re.html#nfa_s"><span class="id" title="projection">nfa_s</span></a> <a class="idref" href="lec_06_re.html#NFA.NFA_TO_DFA.A"><span class="id" title="variable">A</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">dfa_fin</span> := <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <a id="X:34" class="idref" href="#X:34"><span class="id" title="binder">X</span></a> <span class="id" title="notation">|</span> <a class="idref" href="lec_06_re.html#X:34"><span class="id" title="variable">X</span></a> <span class="id" title="notation">:&amp;:</span> <a class="idref" href="lec_06_re.html#nfa_fin"><span class="id" title="projection">nfa_fin</span></a> <a class="idref" href="lec_06_re.html#NFA.NFA_TO_DFA.A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">!=</span> <span class="id" title="definition">set0</span><span class="id" title="notation">]</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">dfa_trans</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="X:30" class="idref" href="#X:30"><span class="id" title="binder">X</span></a>: <span class="id" title="definition">set_of_finType</span> <a class="idref" href="lec_06_re.html#NFA.NFA_TO_DFA.A"><span class="id" title="variable">A</span></a>) (<a id="a:31" class="idref" href="#a:31"><span class="id" title="binder">a</span></a>: <a class="idref" href="lec_06_re.html#NFA.char"><span class="id" title="variable">char</span></a>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[</span><span class="id" title="notation">set</span> <a id="q:32" class="idref" href="#q:32"><span class="id" title="binder">q</span></a> <span class="id" title="notation">|</span> <span class="id" title="notation">[</span><span class="id" title="notation">exists</span> <span class="id" title="notation">(</span><a id="p:33" class="idref" href="#p:33"><span class="id" title="binder">p</span></a> <span class="id" title="notation">|</span> <a class="idref" href="lec_06_re.html#p:33"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#X:30"><span class="id" title="variable">X</span></a><span class="id" title="notation">)</span><span class="id" title="notation">,</span> <a class="idref" href="lec_06_re.html#nfa_trans"><span class="id" title="projection">nfa_trans</span></a> <a class="idref" href="lec_06_re.html#p:33"><span class="id" title="variable">p</span></a> <a class="idref" href="lec_06_re.html#a:31"><span class="id" title="variable">a</span></a> <a class="idref" href="lec_06_re.html#q:32"><span class="id" title="variable">q</span></a><span class="id" title="notation">]</span><span class="id" title="notation">]</span><br/>
      |}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Example<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Input&nbsp;NFA<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;-&gt;&nbsp;B<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0/1&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Output&nbsp;DFA<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{A}&nbsp;-&gt;&nbsp;{B,&nbsp;C}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0/1&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{C}&nbsp;&nbsp;&nbsp;{}&nbsp;&nbsp;{B}&nbsp;&nbsp;{A,&nbsp;B}&nbsp;&nbsp;{A,&nbsp;C}&nbsp;{A,&nbsp;B,&nbsp;C}&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> Whereas the correctness of embedding a DFA into a NFA might be convincing
         without proof, the reduction of a NFA into a DFA might require "more proof".

</li>
<li> Proof.

<div class="paragraph"> </div>

         By structural induction on words.

<div class="paragraph"> </div>

         Case w = nil :
           The definition of accepting states coincide.

<div class="paragraph"> </div>

         Case w = a::x :
           We have to show
           <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">s</span>,</span> <span class="inlinecode">(<span class="id" title="var">s</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">S</span>)</span> <span class="inlinecode">&amp;&amp;</span> <span class="inlinecode"><span class="id" title="var">nfa_accept</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode">(<span class="id" title="var">a</span>::<span class="id" title="var">x</span>)</span> = dfa_accept S (a::x)

<div class="paragraph"> </div>

           which is equivalent to

<div class="paragraph"> </div>

           <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">s</span>,</span> <span class="inlinecode">[<span class="id" title="tactic">exists</span></span> <span class="inlinecode">(<span class="id" title="var">y</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">nfa_trans</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">y</span>),</span> <span class="inlinecode"><span class="id" title="var">nfa_accept</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode"><span class="id" title="var">x</span>]</span> = dfa_accept (dfa_trans X a) x.

<div class="paragraph"> </div>

           given the IH <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">s</span>,</span> <span class="inlinecode">(<span class="id" title="var">s</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">S</span>)</span> <span class="inlinecode">&amp;&amp;</span> <span class="inlinecode"><span class="id" title="var">nfa_accept</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> = dfa_accept S x for any S.
           Using our IH, we now have to show that

<div class="paragraph"> </div>

           <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">s</span>,</span> <span class="inlinecode">(<span class="id" title="var">s</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">S</span>)</span> <span class="inlinecode">&amp;&amp;</span> <span class="inlinecode">[<span class="id" title="tactic">exists</span></span> <span class="inlinecode">(<span class="id" title="var">y</span></span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">nfa_trans</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">y</span>),</span> <span class="inlinecode"><span class="id" title="var">nfa_accept</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode"><span class="id" title="var">x</span>]</span> =
           <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">s</span>,</span> <span class="inlinecode">(<span class="id" title="var">s</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">dfa_trans</span></span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">a</span>)</span> <span class="inlinecode">&amp;&amp;</span> <span class="inlinecode"><span class="id" title="var">nfa_accept</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span>.

<div class="paragraph"> </div>

           This follows by proving mutual inclusion and following the definitions.           

</li>
</ul>
     
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="nfa_to_dfa_correct" class="idref" href="#nfa_to_dfa_correct"><span class="id" title="lemma">nfa_to_dfa_correct</span></a> : <a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#NFA.NFA_TO_DFA.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">=</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">i</span></a> <span class="id" title="definition">dfa_lang</span> <a class="idref" href="lec_06_re.html#nfa_to_dfa"><span class="id" title="definition">nfa_to_dfa</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Locate</span> "=i".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#eq_mem"><span class="id" title="definition">eq_mem</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span> {2}/<a class="idref" href="lec_06_re.html#nfa_to_dfa"><span class="id" title="definition">nfa_to_dfa</span></a> /=.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;structural&nbsp;induction&nbsp;on&nbsp;words&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <span class="id" title="var">w</span> (<a class="idref" href="lec_06_re.html#nfa_s"><span class="id" title="projection">nfa_s</span></a> <span class="id" title="var">_</span>) =&gt; [|<span class="id" title="var">a</span> <span class="id" title="var">x</span> <span class="id" title="var">IH</span>] <span class="id" title="var">X</span>; <span class="id" title="tactic">rewrite</span> /= <span class="id" title="definition">accE</span> ?<span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">existsP</span>/<span class="id" title="lemma">set0Pn</span> =&gt; [] [<span class="id" title="var">p</span>] <span class="id" title="var">H</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> *. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">IH</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Show&nbsp;set&nbsp;equality&nbsp;by&nbsp;showing&nbsp;both&nbsp;directions&nbsp;of&nbsp;inclusion.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>/<span class="id" title="lemma">exists_inP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;-&gt;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> =&gt; <span class="id" title="var">p</span> <span class="id" title="var">inX</span> /<span class="id" title="lemma">exists_inP</span> [<span class="id" title="var">q</span> ? ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">q</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;&lt;-&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> =&gt; <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<span class="id" title="lemma">exists_inP</span> [<span class="id" title="var">q</span>] ? ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">q</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="lec_06_re.html#NFA.NFA_TO_DFA"><span class="id" title="section">NFA_TO_DFA</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab8"></a><h3 class="section">Epsilon Nondeterministic Finite Automata (NFA) or (eNFA)</h3>

</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Goal:&nbsp;NFA&nbsp;-&gt;&nbsp;DFA<br/>
&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-&gt;&nbsp;RE<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;v<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;NFA&nbsp;&lt;-&gt;&nbsp;*eNFA*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;^&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;|&nbsp;v<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|--DFA<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Why&nbsp;eNFA?&nbsp;It&nbsp;will&nbsp;be&nbsp;easier&nbsp;to&nbsp;connect&nbsp;properties&nbsp;of&nbsp;RE&nbsp;to&nbsp;properties&nbsp;of&nbsp;eNFA.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Think&nbsp;about&nbsp;concatenation?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;Think&nbsp;about&nbsp;*?<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>

<br/>
</div>

<div class="doc">
<a id="lab9"></a><h3 class="section">Epsilon NFAs</h3>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

     A Nondeterministic Finite Automata (eNFA) with empty character is a
     5-tuple (Q, \Sigma, S, F, \delta) where
<ul class="doclist">
<li> Q is a finite set of states

</li>
<li> \Sigma is a finite alphabet of characters

</li>
<li> S is a set of starting states

</li>
<li> F is a set of final states

</li>
<li> \delta: option \Sigma x Q x Q -&gt; bool is a transition *relation*

</li>
</ul>

<div class="paragraph"> </div>

     We model the empty character as option \Sigma.
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="enfa" class="idref" href="#enfa"><span class="id" title="record">enfa</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="enfa_state" class="idref" href="#enfa_state"><span class="id" title="projection">enfa_state</span></a> :&gt; <span class="id" title="abbreviation">finType</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="enfa_s" class="idref" href="#enfa_s"><span class="id" title="projection">enfa_s</span></a> : <span class="id" title="notation">{</span><span class="id" title="notation">set</span> <a class="idref" href="lec_06_re.html#enfa_state:36"><span class="id" title="method">enfa_state</span></a><span class="id" title="notation">}</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="enfa_f" class="idref" href="#enfa_f"><span class="id" title="projection">enfa_f</span></a> : <span class="id" title="notation">{</span><span class="id" title="notation">set</span> <a class="idref" href="lec_06_re.html#enfa_state:36"><span class="id" title="method">enfa_state</span></a><span class="id" title="notation">}</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
<ul class="doclist">
<li> None means we don't consume a character

</li>
<li> <span class="inlinecode"><span class="id" title="var">Some</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> means we have a character

</li>
</ul>
       
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="enfa_trans" class="idref" href="#enfa_trans"><span class="id" title="projection">enfa_trans</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="lec_06_re.html#NFA.char"><span class="id" title="variable">char</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_06_re.html#enfa_state:36"><span class="id" title="method">enfa_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_06_re.html#enfa_state:36"><span class="id" title="method">enfa_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="NFA.EpsilonNFA" class="idref" href="#NFA.EpsilonNFA"><span class="id" title="section">EpsilonNFA</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="NFA.EpsilonNFA.N" class="idref" href="#NFA.EpsilonNFA.N"><span class="id" title="variable">N</span></a>: <a class="idref" href="lec_06_re.html#enfa"><span class="id" title="record">enfa</span></a>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<ul class="doclist">
<li> We define enfa acceptance relatationally because structural
          recursion over the word is no longer possible. Why?

</li>
<li> The inference rules are given below

</li>
</ul>
     
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Defining&nbsp;enfa_accept<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q&nbsp;\in&nbsp;enfa_f&nbsp;N<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------&nbsp;EnfaFin<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enfa_accept&nbsp;(q,&nbsp;<span class="inlinecode">::</span>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Some&nbsp;a,&nbsp;p)&nbsp;-&gt;&nbsp;q&nbsp;&nbsp;&nbsp;enfa_accept&nbsp;(q,&nbsp;x)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----------------------------------------&nbsp;EnfaSome<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enfa_accept&nbsp;(p,&nbsp;a::x)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(None,&nbsp;p)&nbsp;-&gt;&nbsp;q&nbsp;&nbsp;&nbsp;&nbsp;enfa_accept&nbsp;(q,&nbsp;x)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----------------------------------------&nbsp;EnfaNone<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enfa_accept&nbsp;(p,&nbsp;x)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="enfa_accept" class="idref" href="#enfa_accept"><span class="id" title="inductive">enfa_accept</span></a>: <a class="idref" href="lec_06_re.html#NFA.EpsilonNFA.N"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="EnfaFin" class="idref" href="#EnfaFin"><span class="id" title="constructor">EnfaFin</span></a> (<a id="q:43" class="idref" href="#q:43"><span class="id" title="binder">q</span></a>: <a class="idref" href="lec_06_re.html#enfa_state"><span class="id" title="projection">enfa_state</span></a> <a class="idref" href="lec_06_re.html#NFA.EpsilonNFA.N"><span class="id" title="variable">N</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#q:43"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#enfa_f"><span class="id" title="projection">enfa_f</span></a> <a class="idref" href="lec_06_re.html#NFA.EpsilonNFA.N"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_accept:41"><span class="id" title="inductive">enfa_accept</span></a> <a class="idref" href="lec_06_re.html#q:43"><span class="id" title="variable">q</span></a> <span class="id" title="notation">[::]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="EnfaSome" class="idref" href="#EnfaSome"><span class="id" title="constructor">EnfaSome</span></a> (<a id="p:44" class="idref" href="#p:44"><span class="id" title="binder">p</span></a>: <a class="idref" href="lec_06_re.html#enfa_state"><span class="id" title="projection">enfa_state</span></a> <a class="idref" href="lec_06_re.html#NFA.EpsilonNFA.N"><span class="id" title="variable">N</span></a>) (<a id="a:45" class="idref" href="#a:45"><span class="id" title="binder">a</span></a>: <a class="idref" href="lec_06_re.html#NFA.char"><span class="id" title="variable">char</span></a>) (<a id="q:46" class="idref" href="#q:46"><span class="id" title="binder">q</span></a>: <a class="idref" href="lec_06_re.html#enfa_state"><span class="id" title="projection">enfa_state</span></a> <a class="idref" href="lec_06_re.html#NFA.EpsilonNFA.N"><span class="id" title="variable">N</span></a>) (<a id="x:47" class="idref" href="#x:47"><span class="id" title="binder">x</span></a>: <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_trans"><span class="id" title="projection">enfa_trans</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="lec_06_re.html#a:45"><span class="id" title="variable">a</span></a>) <a class="idref" href="lec_06_re.html#p:44"><span class="id" title="variable">p</span></a> <a class="idref" href="lec_06_re.html#q:46"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_accept:41"><span class="id" title="inductive">enfa_accept</span></a> <a class="idref" href="lec_06_re.html#q:46"><span class="id" title="variable">q</span></a> <a class="idref" href="lec_06_re.html#x:47"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_accept:41"><span class="id" title="inductive">enfa_accept</span></a> <a class="idref" href="lec_06_re.html#p:44"><span class="id" title="variable">p</span></a> (<a class="idref" href="lec_06_re.html#a:45"><span class="id" title="variable">a</span></a><span class="id" title="notation">::</span><a class="idref" href="lec_06_re.html#x:47"><span class="id" title="variable">x</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="EnfaNone" class="idref" href="#EnfaNone"><span class="id" title="constructor">EnfaNone</span></a> (<a id="p:48" class="idref" href="#p:48"><span class="id" title="binder">p</span></a>: <a class="idref" href="lec_06_re.html#enfa_state"><span class="id" title="projection">enfa_state</span></a> <a class="idref" href="lec_06_re.html#NFA.EpsilonNFA.N"><span class="id" title="variable">N</span></a>) (<a id="q:49" class="idref" href="#q:49"><span class="id" title="binder">q</span></a>: <a class="idref" href="lec_06_re.html#enfa_state"><span class="id" title="projection">enfa_state</span></a> <a class="idref" href="lec_06_re.html#NFA.EpsilonNFA.N"><span class="id" title="variable">N</span></a>) (<a id="x:50" class="idref" href="#x:50"><span class="id" title="binder">x</span></a>: <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_trans"><span class="id" title="projection">enfa_trans</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="lec_06_re.html#p:48"><span class="id" title="variable">p</span></a> <a class="idref" href="lec_06_re.html#q:49"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_accept:41"><span class="id" title="inductive">enfa_accept</span></a> <a class="idref" href="lec_06_re.html#q:49"><span class="id" title="variable">q</span></a> <a class="idref" href="lec_06_re.html#x:50"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_accept:41"><span class="id" title="inductive">enfa_accept</span></a> <a class="idref" href="lec_06_re.html#p:48"><span class="id" title="variable">p</span></a> <a class="idref" href="lec_06_re.html#x:50"><span class="id" title="variable">x</span></a>.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> Like before, the language of an eNFA N is the set of words that
         it accepts.

</li>
<li> Unlike before, we need to use the more general
         <span class="inlinecode"><span class="id" title="var">word</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> as opposed to <span class="inlinecode"><span class="id" title="var">simpl_pred</span></span> <span class="inlinecode"><span class="id" title="var">word</span></span>.

</li>
</ul>
     
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="enfa_lang" class="idref" href="#enfa_lang"><span class="id" title="definition">enfa_lang</span></a> (<a id="x:51" class="idref" href="#x:51"><span class="id" title="binder">x</span></a>: <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a>): <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#3df228c109f14f0423b4fccc967ee1ac"><span class="id" title="notation">exists2</span></a> <a id="s:53" class="idref" href="#s:53"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#3df228c109f14f0423b4fccc967ee1ac"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_06_re.html#s:52"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#enfa_s"><span class="id" title="projection">enfa_s</span></a> <a class="idref" href="lec_06_re.html#NFA.EpsilonNFA.N"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#3df228c109f14f0423b4fccc967ee1ac"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="lec_06_re.html#enfa_accept"><span class="id" title="inductive">enfa_accept</span></a> <a class="idref" href="lec_06_re.html#s:53"><span class="id" title="variable">s</span></a> <a class="idref" href="lec_06_re.html#x:51"><span class="id" title="variable">x</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;At&nbsp;this&nbsp;point,&nbsp;we've&nbsp;defined<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;NFA<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;eNFA<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Now&nbsp;we're&nbsp;going&nbsp;to&nbsp;show&nbsp;that&nbsp;NFA&nbsp;&lt;-&gt;&nbsp;eNFA<br/>
&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-&gt;&nbsp;RE<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;v<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;NFA&nbsp;*&lt;-&gt;*&nbsp;eNFA<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;^&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;|&nbsp;v<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|--DFA<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<ul class="doclist">
<li> How could NFA's and eNFA's possibly be equivalent?

</li>
<li> It should hopefully by easy to see that we can convert a NFA into an eNFA.

</li>
<li> And moreover, an eNFA should accept more words than a NFA.

</li>
<li> What about the reverse direction?

</li>
<li> If it is at all equivalent, then at the very minimum, all states reachable by
          empty transitions should be accounted for in the NFA view.

</li>
<li> We'll do this now.

</li>
<li> <span class="inlinecode"><span class="id" title="var">connect</span></span> is a function that takes a relation to a relation and will take the
          reflexive transitive closure.

</li>
<li> <tt>
          connect = 
           fun (T : finType) (e : rel T) =&gt; [rel x y | y \in dfs (rgraph e) #|T| [::] x]
           : forall T : finType, rel T -&gt; rel T
          </tt>
<div class="paragraph"> </div>


</li>
</ul>
<a id="lab10"></a><h1 class="section">nugget: why dfs (depth-first search)?</h1>

<a id="lab11"></a><h1 class="section"> </h1>

            <tt>
            rgraph = 
              fun (T : finType) (e : rel T) (x : T) =&gt; enum (e x)
              : forall T : finType, rel T -&gt; T -&gt; seq T
            </tt>
<div class="paragraph"> </div>

     
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Locate</span> <span class="id" title="var">connect</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Print</span> <span class="id" title="definition">connect</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="eps_reach" class="idref" href="#eps_reach"><span class="id" title="definition">eps_reach</span></a> (<a id="p:54" class="idref" href="#p:54"><span class="id" title="binder">p</span></a>: <a class="idref" href="lec_06_re.html#enfa_state"><span class="id" title="projection">enfa_state</span></a> <a class="idref" href="lec_06_re.html#NFA.EpsilonNFA.N"><span class="id" title="variable">N</span></a>): <span class="id" title="notation">{</span><span class="id" title="notation">set</span> <a class="idref" href="lec_06_re.html#enfa_state"><span class="id" title="projection">enfa_state</span></a> <a class="idref" href="lec_06_re.html#NFA.EpsilonNFA.N"><span class="id" title="variable">N</span></a><span class="id" title="notation">}</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[</span><span class="id" title="notation">set</span> <a id="q:55" class="idref" href="#q:55"><span class="id" title="binder">q</span></a> <span class="id" title="notation">|</span> <span class="id" title="definition">connect</span> (<a class="idref" href="lec_06_re.html#enfa_trans"><span class="id" title="projection">enfa_trans</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="lec_06_re.html#p:54"><span class="id" title="variable">p</span></a> <a class="idref" href="lec_06_re.html#q:55"><span class="id" title="variable">q</span></a><span class="id" title="notation">]</span>.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li>  p --&gt; q and q accepts x

</li>
<li>  means that p also accepts x.

</li>
</ul>
     
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lift_accept" class="idref" href="#lift_accept"><span class="id" title="lemma">lift_accept</span></a> (<a id="p:56" class="idref" href="#p:56"><span class="id" title="binder">p</span></a> <a id="q:57" class="idref" href="#q:57"><span class="id" title="binder">q</span></a>: <a class="idref" href="lec_06_re.html#enfa_state"><span class="id" title="projection">enfa_state</span></a> <a class="idref" href="lec_06_re.html#NFA.EpsilonNFA.N"><span class="id" title="variable">N</span></a>) (<a id="x:58" class="idref" href="#x:58"><span class="id" title="binder">x</span></a>: <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#q:57"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#eps_reach"><span class="id" title="definition">eps_reach</span></a> <a class="idref" href="lec_06_re.html#p:56"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_accept"><span class="id" title="inductive">enfa_accept</span></a> <a class="idref" href="lec_06_re.html#q:57"><span class="id" title="variable">q</span></a> <a class="idref" href="lec_06_re.html#x:58"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_accept"><span class="id" title="inductive">enfa_accept</span></a> <a class="idref" href="lec_06_re.html#p:56"><span class="id" title="variable">p</span></a> <a class="idref" href="lec_06_re.html#x:58"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> /<span class="id" title="lemma">connectP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; [<span class="id" title="var">s</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Induction&nbsp;on&nbsp;length&nbsp;of&nbsp;path.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <span class="id" title="var">s</span> <span class="id" title="var">p</span> <span class="id" title="var">x</span> <span class="id" title="var">q</span> =&gt; //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;nil&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">x</span> <span class="id" title="var">_</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;cons&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">q</span> <span class="id" title="var">s</span> <span class="id" title="var">IHs</span> <span class="id" title="var">p</span> <span class="id" title="var">x</span> <span class="id" title="var">q'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>/<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> =&gt; <span class="id" title="var">pq</span> ? ? <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="lec_06_re.html#EnfaNone"><span class="id" title="constructor">EnfaNone</span></a> <span class="id" title="var">pq</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span>: <span class="id" title="var">IHs</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> Building the corresponding NFA from an eNFA

</li>
<li> A transition is valid iff 
          1. it is in the eNFA transition relation that consumes a character and
          2. it is in the epsilon-closure

</li>
</ul>
     
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="nfa_of" class="idref" href="#nfa_of"><span class="id" title="definition">nfa_of</span></a>: <a class="idref" href="lec_06_re.html#nfa"><span class="id" title="record">nfa</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_s"><span class="id" title="projection">nfa_s</span></a> := <span class="id" title="notation">\</span><span class="id" title="notation">bigcup_</span><span class="id" title="notation">(</span><a id="p:63" class="idref" href="#p:63"><span class="id" title="binder">p</span></a> <span class="id" title="notation">in</span> <a class="idref" href="lec_06_re.html#enfa_s"><span class="id" title="projection">enfa_s</span></a> <a class="idref" href="lec_06_re.html#NFA.EpsilonNFA.N"><span class="id" title="variable">N</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">(</span><a class="idref" href="lec_06_re.html#eps_reach"><span class="id" title="definition">eps_reach</span></a> <a class="idref" href="lec_06_re.html#p:63"><span class="id" title="variable">p</span></a><span class="id" title="notation">)</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_fin"><span class="id" title="projection">nfa_fin</span></a> := <a class="idref" href="lec_06_re.html#enfa_f"><span class="id" title="projection">enfa_f</span></a> <a class="idref" href="lec_06_re.html#NFA.EpsilonNFA.N"><span class="id" title="variable">N</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_trans"><span class="id" title="projection">nfa_trans</span></a> (<a id="p:59" class="idref" href="#p:59"><span class="id" title="binder">p</span></a>: <a class="idref" href="lec_06_re.html#NFA.EpsilonNFA.N"><span class="id" title="variable">N</span></a>) (<a id="a:60" class="idref" href="#a:60"><span class="id" title="binder">a</span></a>: <a class="idref" href="lec_06_re.html#NFA.char"><span class="id" title="variable">char</span></a>) (<a id="q:61" class="idref" href="#q:61"><span class="id" title="binder">q</span></a>: <a class="idref" href="lec_06_re.html#NFA.EpsilonNFA.N"><span class="id" title="variable">N</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[</span><span class="id" title="notation">exists</span> <a id="p':62" class="idref" href="#p':62"><span class="id" title="binder">p'</span></a><span class="id" title="notation">,</span> <a class="idref" href="lec_06_re.html#enfa_trans"><span class="id" title="projection">enfa_trans</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="lec_06_re.html#a:60"><span class="id" title="variable">a</span></a>) <a class="idref" href="lec_06_re.html#p:59"><span class="id" title="variable">p</span></a> <a class="idref" href="lec_06_re.html#p':62"><span class="id" title="variable">p'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="lec_06_re.html#q:61"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#eps_reach"><span class="id" title="definition">eps_reach</span></a> <a class="idref" href="lec_06_re.html#p':62"><span class="id" title="variable">p'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enfaE" class="idref" href="#enfaE"><span class="id" title="lemma">enfaE</span></a> (<a id="x:64" class="idref" href="#x:64"><span class="id" title="binder">x</span></a>: <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a>) (<a id="p:65" class="idref" href="#p:65"><span class="id" title="binder">p</span></a>: <a class="idref" href="lec_06_re.html#enfa_state"><span class="id" title="projection">enfa_state</span></a> <a class="idref" href="lec_06_re.html#NFA.EpsilonNFA.N"><span class="id" title="variable">N</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="lec_06_re.html#enfa_accept"><span class="id" title="inductive">enfa_accept</span></a> <a class="idref" href="lec_06_re.html#p:65"><span class="id" title="variable">p</span></a> <a class="idref" href="lec_06_re.html#x:64"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#59ba2b47d2814e66f8210a649ae6e6bc"><span class="id" title="notation">exists2</span></a> <a id="q:67" class="idref" href="#q:67"><span class="id" title="binder">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#59ba2b47d2814e66f8210a649ae6e6bc"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_06_re.html#nfa_of"><span class="id" title="definition">nfa_of</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#59ba2b47d2814e66f8210a649ae6e6bc"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_06_re.html#q:66"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#eps_reach"><span class="id" title="definition">eps_reach</span></a> <a class="idref" href="lec_06_re.html#p:65"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#59ba2b47d2814e66f8210a649ae6e6bc"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="lec_06_re.html#nfa_accept"><span class="id" title="definition">nfa_accept</span></a> <a class="idref" href="lec_06_re.html#q:67"><span class="id" title="variable">q</span></a> <a class="idref" href="lec_06_re.html#x:64"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;(=&gt;)&nbsp;direction&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Induction&nbsp;on&nbsp;enfa_accept&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> =&gt; {<span class="id" title="var">p</span> <span class="id" title="var">x</span>} [<span class="id" title="var">q</span> <span class="id" title="var">H</span>|<span class="id" title="var">p</span> <span class="id" title="var">a</span> <span class="id" title="var">q</span> <span class="id" title="var">x</span> <span class="id" title="var">H</span> <span class="id" title="var">_</span> [<span class="id" title="var">q'</span> <span class="id" title="var">Hq1</span> <span class="id" title="var">Hq2</span>]|<span class="id" title="var">p</span> <span class="id" title="var">p'</span> <span class="id" title="var">x</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;EnfaFin&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">q</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">connect0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;EnfaSome&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">p</span> =&gt; /=; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> <span class="id" title="lemma">connect0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">q'</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;EnfaNone&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> [<span class="id" title="var">q</span> <span class="id" title="var">Hq1</span> <span class="id" title="var">Hq2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">q</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hq1</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span>: <span class="id" title="lemma">connect_trans</span> (<span class="id" title="lemma">connect1</span> <span class="id" title="var">_</span>) <span class="id" title="var">Hq1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;(&lt;=)&nbsp;direction&nbsp;&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Induction&nbsp;on&nbsp;word&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <span class="id" title="var">x</span> <span class="id" title="var">p</span> =&gt; [|<span class="id" title="var">a</span> <span class="id" title="var">x</span> <span class="id" title="var">IH</span>] <span class="id" title="var">p</span> [<span class="id" title="var">p'</span>] <span class="id" title="var">R</span> /= <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;nil&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="lec_06_re.html#lift_accept"><span class="id" title="lemma">lift_accept</span></a> <span class="id" title="var">R</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span>: <a class="idref" href="lec_06_re.html#EnfaFin"><span class="id" title="constructor">EnfaFin</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;cons&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>/<span class="id" title="lemma">exists_inP</span> : <span class="id" title="var">H</span> =&gt; <span class="id" title="var">q</span> /<span class="id" title="lemma">exists_inP</span> [<span class="id" title="var">q'</span> <span class="id" title="var">pq'</span> <span class="id" title="var">qq'</span>] <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="lec_06_re.html#lift_accept"><span class="id" title="lemma">lift_accept</span></a> <span class="id" title="var">R</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="lec_06_re.html#EnfaSome"><span class="id" title="constructor">EnfaSome</span></a> <span class="id" title="var">pq'</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> For reflection purposes.

</li>
</ul>
     
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="nfa_ofP" class="idref" href="#nfa_ofP"><span class="id" title="lemma">nfa_ofP</span></a> (<a id="x:68" class="idref" href="#x:68"><span class="id" title="binder">x</span></a>: <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#reflect"><span class="id" title="abbreviation">reflect</span></a> (<a class="idref" href="lec_06_re.html#enfa_lang"><span class="id" title="definition">enfa_lang</span></a> <a class="idref" href="lec_06_re.html#x:68"><span class="id" title="variable">x</span></a>) (<a class="idref" href="lec_06_re.html#x:68"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#nfa_of"><span class="id" title="definition">nfa_of</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#iffP"><span class="id" title="lemma">iffP</span></a> <span class="id" title="lemma">exists_inP</span>) =&gt; [[<span class="id" title="var">p</span> <span class="id" title="var">Hp1</span> <span class="id" title="var">Hp2</span>]|[<span class="id" title="var">s</span> <span class="id" title="var">Hs1</span> /<a class="idref" href="lec_06_re.html#enfaE"><span class="id" title="lemma">enfaE</span></a> [<span class="id" title="var">p</span> <span class="id" title="var">Hp1</span> <span class="id" title="var">Hp2</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">case</span>/<span class="id" title="lemma">bigcupP</span> : <span class="id" title="var">Hp1</span> =&gt; <span class="id" title="var">s</span> <span class="id" title="var">Hs</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">s</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<a class="idref" href="lec_06_re.html#enfaE"><span class="id" title="lemma">enfaE</span></a>; <span class="id" title="tactic">exists</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> <span class="id" title="var">p</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">bigcupP</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="lec_06_re.html#NFA.EpsilonNFA"><span class="id" title="section">EpsilonNFA</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab12"></a><h3 class="section">Operations on NFAs/eNFAs</h3>


<div class="paragraph"> </div>

<ul class="doclist">
<li> For each language construct in a RE, we will define the corresponding
       operation on a NFA or eNFA, whichever is easier. By the equivalence of
       NFA and eNFA, we will be able to convert all the operations defined on
       a eNFA back into a NFA.

</li>
<li> As a reminder, the following operations are:
        1. eps
        2. char
        3. +
        4. concat
        5. *

</li>
</ul>
   
<div class="paragraph"> </div>

<a id="lab13"></a><h4 class="section">1. eps</h4>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Final and starting state are the same.

</li>
<li> No transitions.

</li>
</ul>
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="nfa_eps" class="idref" href="#nfa_eps"><span class="id" title="definition">nfa_eps</span></a> : <a class="idref" href="lec_06_re.html#nfa"><span class="id" title="record">nfa</span></a> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_s"><span class="id" title="projection">nfa_s</span></a> := <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><span class="id" title="notation">]</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_fin"><span class="id" title="projection">nfa_fin</span></a> := <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><span class="id" title="notation">]</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_trans"><span class="id" title="projection">nfa_trans</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="p:69" class="idref" href="#p:69"><span class="id" title="binder">p</span></a> <a id="q:70" class="idref" href="#q:70"><span class="id" title="binder">q</span></a> <a id="q:71" class="idref" href="#q:71"><span class="id" title="binder">q</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="nfa_eps_correct" class="idref" href="#nfa_eps_correct"><span class="id" title="lemma">nfa_eps_correct</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> (<a class="idref" href="lec_06_re.html#nfa_eps"><span class="id" title="definition">nfa_eps</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">=</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">i</span></a> <span class="id" title="definition">pred1</span> <span class="id" title="notation">[::]</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">w</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Set&nbsp;equality&nbsp;by&nbsp;mutual&nbsp;inclusion.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>/<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#idP"><span class="id" title="lemma">idP</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;(=&gt;)&nbsp;direction&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; [[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <span class="id" title="var">w</span> =&gt; [|<span class="id" title="var">a</span> <span class="id" title="var">w</span>] //= <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">case</span>/<span class="id" title="lemma">exists_inP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+<span class="comment">(*&nbsp;(&lt;=)&nbsp;direction&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span>=&gt;/<span class="id" title="lemma">eqP</span>-&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab14"></a><h4 class="section">2. char</h4>

<ul class="doclist">
<li> One transition from starting state to final state if b == a.

</li>
</ul>
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="nfa_char" class="idref" href="#nfa_char"><span class="id" title="definition">nfa_char</span></a> (<a id="a:72" class="idref" href="#a:72"><span class="id" title="binder">a</span></a>:<a class="idref" href="lec_06_re.html#NFA.char"><span class="id" title="variable">char</span></a>) := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_s"><span class="id" title="projection">nfa_s</span></a> := <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><span class="id" title="notation">]</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_fin"><span class="id" title="projection">nfa_fin</span></a> := <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><span class="id" title="notation">]</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_trans"><span class="id" title="projection">nfa_trans</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="p:73" class="idref" href="#p:73"><span class="id" title="binder">p</span></a> <a id="b:74" class="idref" href="#b:74"><span class="id" title="binder">b</span></a> <a id="q:75" class="idref" href="#q:75"><span class="id" title="binder">q</span></a> =&gt; <span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="lec_06_re.html#p:73"><span class="id" title="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="lec_06_re.html#q:75"><span class="id" title="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">is</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">then</span> (<a class="idref" href="lec_06_re.html#b:74"><span class="id" title="variable">b</span></a> <span class="id" title="notation">==</span> <a class="idref" href="lec_06_re.html#a:72"><span class="id" title="variable">a</span></a>) <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="nfa_char_correct" class="idref" href="#nfa_char_correct"><span class="id" title="lemma">nfa_char_correct</span></a> (<a id="a:76" class="idref" href="#a:76"><span class="id" title="binder">a</span></a> : <a class="idref" href="lec_06_re.html#NFA.char"><span class="id" title="variable">char</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> (<a class="idref" href="lec_06_re.html#nfa_char"><span class="id" title="definition">nfa_char</span></a> <a class="idref" href="lec_06_re.html#a:76"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrfun.html#876aa133fb3472bffd492f74ff496035"><span class="id" title="notation">=1</span></a> <span class="id" title="definition">pred1</span> <span class="id" title="notation">[::</span> <a class="idref" href="lec_06_re.html#a:76"><span class="id" title="variable">a</span></a><span class="id" title="notation">]</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">w</span> /=.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Set&nbsp;equality&nbsp;by&nbsp;mutual&nbsp;inclusion.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>/<span class="id" title="lemma">eqP</span> =&gt; [[<span class="id" title="var">p</span>]|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<span class="id" title="lemma">eqP</span>-&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <span class="id" title="var">w</span> =&gt; [|<span class="id" title="var">b</span> [|<span class="id" title="var">c</span> <span class="id" title="var">w</span>]] /=; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">case</span>/<span class="id" title="lemma">exists_inP</span> =&gt; [[/<span class="id" title="lemma">eqP</span>-&gt;|//]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">case</span>/<span class="id" title="lemma">exists_inP</span> =&gt; [[<span class="id" title="var">_</span>|//]]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">case</span>/<span class="id" title="lemma">exists_inP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">move</span>-&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> ?<span class="id" title="definition">inE</span> //=.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
<a id="lab15"></a><h4 class="section">3. +</h4>


<div class="paragraph"> </div>

<ul class="doclist">
<li> What's the picture for this?

</li>
<li> Can start in either NFA N or NFA M.

</li>
<li> Can end in either NFA N or NFA M.

</li>
<li> Use transitions in either one.

</li>
</ul>
   
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="nfa_plus" class="idref" href="#nfa_plus"><span class="id" title="definition">nfa_plus</span></a> (<a id="N:77" class="idref" href="#N:77"><span class="id" title="binder">N</span></a> <a id="M:78" class="idref" href="#M:78"><span class="id" title="binder">M</span></a> : <a class="idref" href="lec_06_re.html#nfa"><span class="id" title="record">nfa</span></a>) := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_s"><span class="id" title="projection">nfa_s</span></a> := <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <a id="q:87" class="idref" href="#q:87"><span class="id" title="binder">q</span></a> <span class="id" title="notation">|</span> <span class="id" title="keyword">match</span> <a class="idref" href="lec_06_re.html#q:87"><span class="id" title="variable">q</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">q</span> =&gt; <a class="idref" href="lec_06_re.html#q:87"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#nfa_s"><span class="id" title="projection">nfa_s</span></a> <a class="idref" href="lec_06_re.html#N:77"><span class="id" title="variable">N</span></a> | <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">q</span> =&gt; <a class="idref" href="lec_06_re.html#q:87"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#nfa_s"><span class="id" title="projection">nfa_s</span></a> <a class="idref" href="lec_06_re.html#M:78"><span class="id" title="variable">M</span></a> <span class="id" title="keyword">end</span> <span class="id" title="notation">]</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_fin"><span class="id" title="projection">nfa_fin</span></a> := <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <a id="q:85" class="idref" href="#q:85"><span class="id" title="binder">q</span></a> <span class="id" title="notation">|</span> <span class="id" title="keyword">match</span> <a class="idref" href="lec_06_re.html#q:85"><span class="id" title="variable">q</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">q</span> =&gt; <a class="idref" href="lec_06_re.html#q:85"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#nfa_fin"><span class="id" title="projection">nfa_fin</span></a> <a class="idref" href="lec_06_re.html#N:77"><span class="id" title="variable">N</span></a> | <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">q</span> =&gt; <a class="idref" href="lec_06_re.html#q:85"><span class="id" title="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#nfa_fin"><span class="id" title="projection">nfa_fin</span></a> <a class="idref" href="lec_06_re.html#M:78"><span class="id" title="variable">M</span></a> <span class="id" title="keyword">end</span> <span class="id" title="notation">]</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_trans"><span class="id" title="projection">nfa_trans</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="p:79" class="idref" href="#p:79"><span class="id" title="binder">p</span></a> <a id="a:80" class="idref" href="#a:80"><span class="id" title="binder">a</span></a> <a id="q:81" class="idref" href="#q:81"><span class="id" title="binder">q</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="lec_06_re.html#p:79"><span class="id" title="variable">p</span></a>,<a class="idref" href="lec_06_re.html#a:80"><span class="id" title="variable">a</span></a>,<a class="idref" href="lec_06_re.html#q:81"><span class="id" title="variable">q</span></a> <span class="id" title="keyword">with</span>  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">p</span>,<span class="id" title="var">a</span>,<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">q</span> =&gt; <a class="idref" href="lec_06_re.html#nfa_trans"><span class="id" title="projection">nfa_trans</span></a> <a class="idref" href="lec_06_re.html#p:79"><span class="id" title="variable">p</span></a> <a class="idref" href="lec_06_re.html#a:80"><span class="id" title="variable">a</span></a> <a class="idref" href="lec_06_re.html#q:81"><span class="id" title="variable">q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">p</span>,<span class="id" title="var">a</span>,<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">q</span> =&gt; <a class="idref" href="lec_06_re.html#nfa_trans"><span class="id" title="projection">nfa_trans</span></a> <a class="idref" href="lec_06_re.html#p:79"><span class="id" title="variable">p</span></a> <a class="idref" href="lec_06_re.html#a:80"><span class="id" title="variable">a</span></a> <a class="idref" href="lec_06_re.html#q:81"><span class="id" title="variable">q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="nfa_plus_correct" class="idref" href="#nfa_plus_correct"><span class="id" title="lemma">nfa_plus_correct</span></a> (<a id="N:89" class="idref" href="#N:89"><span class="id" title="binder">N</span></a> <a id="M:90" class="idref" href="#M:90"><span class="id" title="binder">M</span></a> : <a class="idref" href="lec_06_re.html#nfa"><span class="id" title="record">nfa</span></a>) : <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> (<a class="idref" href="lec_06_re.html#nfa_plus"><span class="id" title="definition">nfa_plus</span></a> <a class="idref" href="lec_06_re.html#N:89"><span class="id" title="variable">N</span></a> <a class="idref" href="lec_06_re.html#M:90"><span class="id" title="variable">M</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">=</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">i</span></a> <span class="id" title="definition">plus</span> (<a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#N:89"><span class="id" title="variable">N</span></a>) (<a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#M:90"><span class="id" title="variable">M</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">w</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Set&nbsp;equality&nbsp;by&nbsp;mutual&nbsp;inclusion&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#idP"><span class="id" title="lemma">idP</span></a>/<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#idP"><span class="id" title="lemma">idP</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>/<span class="id" title="lemma">exists_inP</span> =&gt; [[<span class="id" title="var">s</span>|<span class="id" title="var">s</span>]]; <span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span> =&gt; <span class="id" title="var">A</span> <span class="id" title="var">B</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>;[<span class="id" title="tactic">left</span>|<span class="id" title="tactic">right</span>];<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">elim</span>: <span class="id" title="var">w</span> <span class="id" title="var">s</span> {<span class="id" title="var">A</span>} <span class="id" title="var">B</span> =&gt; /= [|<span class="id" title="var">a</span> <span class="id" title="var">w</span> <span class="id" title="var">IH</span>] <span class="id" title="var">s</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>/<span class="id" title="lemma">exists_inP</span> =&gt; [[|]// <span class="id" title="var">p</span> <span class="id" title="var">A</span> /<span class="id" title="var">IH</span> <span class="id" title="var">B</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">elim</span>: <span class="id" title="var">w</span> <span class="id" title="var">s</span> {<span class="id" title="var">A</span>} <span class="id" title="var">B</span> =&gt; /= [|<span class="id" title="var">a</span> <span class="id" title="var">w</span> <span class="id" title="var">IH</span>] <span class="id" title="var">s</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>/<span class="id" title="lemma">exists_inP</span> =&gt; [[|]// <span class="id" title="var">p</span> <span class="id" title="var">A</span> /<span class="id" title="var">IH</span> <span class="id" title="var">B</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<span class="id" title="definition">inE</span>. <span class="id" title="tactic">case</span>/<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a> =&gt; /<span class="id" title="lemma">exists_inP</span> [<span class="id" title="var">s</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>]; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>; [<span class="id" title="tactic">exists</span>(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">s</span>)|<span class="id" title="tactic">exists</span>(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">s</span>)]; <span class="id" title="tactic">rewrite</span> ?<span class="id" title="definition">inE</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">elim</span>: <span class="id" title="var">w</span> <span class="id" title="var">s</span> {<span class="id" title="var">A</span>} <span class="id" title="var">B</span> =&gt; /= [|<span class="id" title="var">a</span> <span class="id" title="var">w</span> <span class="id" title="var">IH</span>] <span class="id" title="var">s</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>/<span class="id" title="lemma">exists_inP</span> =&gt; [<span class="id" title="var">p</span> <span class="id" title="var">A</span> /<span class="id" title="var">IH</span> <span class="id" title="var">B</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">elim</span>: <span class="id" title="var">w</span> <span class="id" title="var">s</span> {<span class="id" title="var">A</span>} <span class="id" title="var">B</span> =&gt; /= [|<span class="id" title="var">a</span> <span class="id" title="var">w</span> <span class="id" title="var">IH</span>] <span class="id" title="var">s</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>/<span class="id" title="lemma">exists_inP</span> =&gt; [<span class="id" title="var">p</span> <span class="id" title="var">A</span> /<span class="id" title="var">IH</span> <span class="id" title="var">B</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<ul class="doclist">
<li> We will want to use eNFAs to show concatenation and Kleene star.

</li>
<li> We can then build the corresponding NFA back from an eNFA.

</li>
</ul>
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="NFA.eNFAOps" class="idref" href="#NFA.eNFAOps"><span class="id" title="section">eNFAOps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Variables</span> <a id="NFA.eNFAOps.A1" class="idref" href="#NFA.eNFAOps.A1"><span class="id" title="variable">A1</span></a> <a id="NFA.eNFAOps.A2" class="idref" href="#NFA.eNFAOps.A2"><span class="id" title="variable">A2</span></a> : <a class="idref" href="lec_06_re.html#nfa"><span class="id" title="record">nfa</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab16"></a><h4 class="section">4. concat</h4>


<div class="paragraph"> </div>

<ul class="doclist">
<li> What's the picture for this?

</li>
</ul>
     
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="enfa_conc" class="idref" href="#enfa_conc"><span class="id" title="definition">enfa_conc</span></a>: <a class="idref" href="lec_06_re.html#enfa"><span class="id" title="record">enfa</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_s"><span class="id" title="projection">enfa_s</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="notation">@:</span> <a class="idref" href="lec_06_re.html#nfa_s"><span class="id" title="projection">nfa_s</span></a> <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A1"><span class="id" title="variable">A1</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_f"><span class="id" title="projection">enfa_f</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="notation">@:</span> <a class="idref" href="lec_06_re.html#nfa_fin"><span class="id" title="projection">nfa_fin</span></a> <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A2"><span class="id" title="variable">A2</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_trans"><span class="id" title="projection">enfa_trans</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="c:93" class="idref" href="#c:93"><span class="id" title="binder">c</span></a> <a id="p:94" class="idref" href="#p:94"><span class="id" title="binder">p</span></a> <a id="q:95" class="idref" href="#q:95"><span class="id" title="binder">q</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="lec_06_re.html#c:93"><span class="id" title="variable">c</span></a>,<a class="idref" href="lec_06_re.html#p:94"><span class="id" title="variable">p</span></a>,<a class="idref" href="lec_06_re.html#q:95"><span class="id" title="variable">q</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">a</span>,<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">p'</span>,<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">q'</span> =&gt; <a class="idref" href="lec_06_re.html#nfa_trans"><span class="id" title="projection">nfa_trans</span></a> <span class="id" title="var">p'</span> <span class="id" title="var">a</span> <span class="id" title="var">q'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">a</span>,<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">p'</span>,<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">q'</span> =&gt; <a class="idref" href="lec_06_re.html#nfa_trans"><span class="id" title="projection">nfa_trans</span></a> <span class="id" title="var">p'</span> <span class="id" title="var">a</span> <span class="id" title="var">q'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>,<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">p'</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">q'</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">p'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#nfa_fin"><span class="id" title="projection">nfa_fin</span></a> <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A1"><span class="id" title="variable">A1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">q'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#nfa_s"><span class="id" title="projection">nfa_s</span></a> <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A2"><span class="id" title="variable">A2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="nfa_conc" class="idref" href="#nfa_conc"><span class="id" title="definition">nfa_conc</span></a>: <a class="idref" href="lec_06_re.html#nfa"><span class="id" title="record">nfa</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_of"><span class="id" title="definition">nfa_of</span></a> (<a class="idref" href="lec_06_re.html#enfa_conc"><span class="id" title="definition">enfa_conc</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enfa_concE" class="idref" href="#enfa_concE"><span class="id" title="lemma">enfa_concE</span></a> (<a id="p:99" class="idref" href="#p:99"><span class="id" title="binder">p</span></a>: <a class="idref" href="lec_06_re.html#enfa_conc"><span class="id" title="definition">enfa_conc</span></a>) (<a id="x:100" class="idref" href="#x:100"><span class="id" title="binder">x</span></a>: <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_accept"><span class="id" title="inductive">enfa_accept</span></a> <a class="idref" href="lec_06_re.html#p:99"><span class="id" title="variable">p</span></a> <a class="idref" href="lec_06_re.html#x:100"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="lec_06_re.html#p:99"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">p'</span> =&gt; <a class="idref" href="lec_06_re.html#nfa_accept"><span class="id" title="definition">nfa_accept</span></a> <span class="id" title="var">p'</span> <a class="idref" href="lec_06_re.html#x:100"><span class="id" title="variable">x</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">p'</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="x1:102" class="idref" href="#x1:102"><span class="id" title="binder">x1</span></a> <a id="x2:103" class="idref" href="#x2:103"><span class="id" title="binder">x2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">[/\</span></a> <a class="idref" href="lec_06_re.html#x:100"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_06_re.html#x1:102"><span class="id" title="variable">x1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="lec_06_re.html#x2:103"><span class="id" title="variable">x2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_06_re.html#nfa_accept"><span class="id" title="definition">nfa_accept</span></a> <span class="id" title="var">p'</span> <a class="idref" href="lec_06_re.html#x1:102"><span class="id" title="variable">x1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="lec_06_re.html#x2:103"><span class="id" title="variable">x2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A2"><span class="id" title="variable">A2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> =&gt; {<span class="id" title="var">p</span> <span class="id" title="var">x</span>} [[?|?] /<span class="id" title="lemma">imsetP</span> [<span class="id" title="var">q</span>] // ? [-&gt;] //||].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">move</span> =&gt; [<span class="id" title="var">p</span>|<span class="id" title="var">p</span>] <span class="id" title="var">a</span> [<span class="id" title="var">q</span>|<span class="id" title="var">q</span>] <span class="id" title="var">x</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">pq</span> <span class="id" title="var">_</span> [<span class="id" title="var">x1</span>] [<span class="id" title="var">x2</span>] [<span class="id" title="var">X1</span> <span class="id" title="var">X2</span> <span class="id" title="var">X3</span>]. <span class="id" title="tactic">exists</span> (<span class="id" title="var">a</span><span class="id" title="notation">::</span><span class="id" title="var">x1</span>); <span class="id" title="tactic">exists</span> <span class="id" title="var">x2</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">split</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">pq</span> <span class="id" title="var">_</span> <span class="id" title="var">Hq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">move</span> =&gt; [<span class="id" title="var">p</span>|<span class="id" title="var">p</span>] [<span class="id" title="var">q</span>|<span class="id" title="var">q</span>] //= <span class="id" title="var">x</span> /<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[<span class="id" title="var">Hp</span> <span class="id" title="var">Hq</span>] <span class="id" title="var">_</span> ?. <span class="id" title="tactic">exists</span> <span class="id" title="notation">[::]</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">split</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enfa_concIr" class="idref" href="#enfa_concIr"><span class="id" title="lemma">enfa_concIr</span></a> (<a id="p:104" class="idref" href="#p:104"><span class="id" title="binder">p</span></a>: <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A2"><span class="id" title="variable">A2</span></a>) (<a id="x:105" class="idref" href="#x:105"><span class="id" title="binder">x</span></a>: <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_accept"><span class="id" title="definition">nfa_accept</span></a> <a class="idref" href="lec_06_re.html#p:104"><span class="id" title="variable">p</span></a> <a class="idref" href="lec_06_re.html#x:105"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="lec_06_re.html#enfa_accept"><span class="id" title="inductive">enfa_accept</span></a> <a class="idref" href="lec_06_re.html#enfa_conc"><span class="id" title="definition">enfa_conc</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <a class="idref" href="lec_06_re.html#p:104"><span class="id" title="variable">p</span></a>) <a class="idref" href="lec_06_re.html#x:105"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <span class="id" title="var">x</span> <span class="id" title="var">p</span> =&gt; [<span class="id" title="var">p</span> <span class="id" title="var">Hp</span>|<span class="id" title="var">a</span> <span class="id" title="var">x</span> <span class="id" title="var">IH</span> <span class="id" title="var">p</span> /= /<span class="id" title="lemma">exists_inP</span> [<span class="id" title="var">q</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;compat:&nbsp;&lt;mathcomp-1.12&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">exact</span>: <span class="id" title="lemma">imset_f</span>|<span class="id" title="tactic">exact</span>:<span class="id" title="lemma">mem_imset</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>: (@<a class="idref" href="lec_06_re.html#EnfaSome"><span class="id" title="constructor">EnfaSome</span></a> <a class="idref" href="lec_06_re.html#enfa_conc"><span class="id" title="definition">enfa_conc</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">q</span>)) =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span>: <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enfa_concIl" class="idref" href="#enfa_concIl"><span class="id" title="lemma">enfa_concIl</span></a> (<a id="p:106" class="idref" href="#p:106"><span class="id" title="binder">p</span></a>: <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A1"><span class="id" title="variable">A1</span></a>) (<a id="x1:107" class="idref" href="#x1:107"><span class="id" title="binder">x1</span></a> <a id="x2:108" class="idref" href="#x2:108"><span class="id" title="binder">x2</span></a>: <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_accept"><span class="id" title="definition">nfa_accept</span></a> <a class="idref" href="lec_06_re.html#p:106"><span class="id" title="variable">p</span></a> <a class="idref" href="lec_06_re.html#x1:107"><span class="id" title="variable">x1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#x2:108"><span class="id" title="variable">x2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A2"><span class="id" title="variable">A2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="lec_06_re.html#enfa_accept"><span class="id" title="inductive">enfa_accept</span></a> <a class="idref" href="lec_06_re.html#enfa_conc"><span class="id" title="definition">enfa_conc</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <a class="idref" href="lec_06_re.html#p:106"><span class="id" title="variable">p</span></a>) (<a class="idref" href="lec_06_re.html#x1:107"><span class="id" title="variable">x1</span></a><span class="id" title="notation">++</span><a class="idref" href="lec_06_re.html#x2:108"><span class="id" title="variable">x2</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <span class="id" title="var">x1</span> <span class="id" title="var">p</span> =&gt; /= [<span class="id" title="var">p</span> <span class="id" title="var">Hp</span> /<span class="id" title="lemma">exists_inP</span> [<span class="id" title="var">q</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span>]|<span class="id" title="var">a</span> <span class="id" title="var">x1</span> <span class="id" title="var">IH</span> <span class="id" title="var">p</span> /<span class="id" title="lemma">exists_inP</span> [<span class="id" title="var">q</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span>] <span class="id" title="var">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>: (@<a class="idref" href="lec_06_re.html#EnfaNone"><span class="id" title="constructor">EnfaNone</span></a> <a class="idref" href="lec_06_re.html#enfa_conc"><span class="id" title="definition">enfa_conc</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inr"><span class="id" title="constructor">inr</span></a> <span class="id" title="var">q</span>)). <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <span class="id" title="var">Hp</span>. <span class="id" title="tactic">exact</span>: <a class="idref" href="lec_06_re.html#enfa_concIr"><span class="id" title="lemma">enfa_concIr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span>: (@<a class="idref" href="lec_06_re.html#EnfaSome"><span class="id" title="constructor">EnfaSome</span></a> <a class="idref" href="lec_06_re.html#enfa_conc"><span class="id" title="definition">enfa_conc</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">q</span>)). <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <span class="id" title="var">q1</span>. <span class="id" title="tactic">exact</span>: <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enfa_concP" class="idref" href="#enfa_concP"><span class="id" title="lemma">enfa_concP</span></a> (<a id="x:109" class="idref" href="#x:109"><span class="id" title="binder">x</span></a>: <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#reflect"><span class="id" title="abbreviation">reflect</span></a> (<a class="idref" href="lec_06_re.html#enfa_lang"><span class="id" title="definition">enfa_lang</span></a> <a class="idref" href="lec_06_re.html#enfa_conc"><span class="id" title="definition">enfa_conc</span></a> <a class="idref" href="lec_06_re.html#x:109"><span class="id" title="variable">x</span></a>) (<span class="id" title="definition">conc</span> (<a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A1"><span class="id" title="variable">A1</span></a>) (<a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A2"><span class="id" title="variable">A2</span></a>) <a class="idref" href="lec_06_re.html#x:109"><span class="id" title="variable">x</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#iffP"><span class="id" title="lemma">iffP</span></a> (@<span class="id" title="lemma">concP</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)) =&gt; [[<span class="id" title="var">x1</span>] [<span class="id" title="var">x2</span>] [<span class="id" title="var">X1</span> [<span class="id" title="var">X2</span> <span class="id" title="var">X3</span>]] |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;compat:&nbsp;&lt;mathcomp-1.12&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>/<span class="id" title="lemma">exists_inP</span> : <span class="id" title="var">X2</span> =&gt; <span class="id" title="var">s</span> ? ?. <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#inl"><span class="id" title="constructor">inl</span></a> <span class="id" title="var">s</span>); <span class="id" title="tactic">first</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">exact</span>: <span class="id" title="lemma">imset_f</span>|<span class="id" title="tactic">exact</span>:<span class="id" title="lemma">mem_imset</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">exact</span>: <a class="idref" href="lec_06_re.html#enfa_concIl"><span class="id" title="lemma">enfa_concIl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">move</span> =&gt; [[<span class="id" title="var">s</span> /<span class="id" title="lemma">imsetP</span> [? ? [?]] /<a class="idref" href="lec_06_re.html#enfa_concE"><span class="id" title="lemma">enfa_concE</span></a> [<span class="id" title="var">x1</span>] [<span class="id" title="var">x2</span>] [? ? ?] |<span class="id" title="var">s</span>]]; <span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">case</span>/<span class="id" title="lemma">imsetP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x1</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">x2</span>. <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">split</span> =&gt; //). <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">s</span>;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="nfa_conc_correct" class="idref" href="#nfa_conc_correct"><span class="id" title="lemma">nfa_conc_correct</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#nfa_conc"><span class="id" title="definition">nfa_conc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">=</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">i</span></a> <span class="id" title="definition">conc</span> (<a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A1"><span class="id" title="variable">A1</span></a>) (<a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A2"><span class="id" title="variable">A2</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="lec_06_re.html#nfa_ofP"><span class="id" title="lemma">nfa_ofP</span></a>/<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#idP"><span class="id" title="lemma">idP</span></a> =&gt; ?;<span class="id" title="tactic">exact</span>/<a class="idref" href="lec_06_re.html#enfa_concP"><span class="id" title="lemma">enfa_concP</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab17"></a><h4 class="section">5. star</h4>


<div class="paragraph"> </div>

<ul class="doclist">
<li> What's the picture for this?

</li>
</ul>
     
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="enfa_star" class="idref" href="#enfa_star"><span class="id" title="definition">enfa_star</span></a> : <a class="idref" href="lec_06_re.html#enfa"><span class="id" title="record">enfa</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_s"><span class="id" title="projection">enfa_s</span></a> := <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><span class="id" title="notation">]</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_f"><span class="id" title="projection">enfa_f</span></a> := <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><span class="id" title="notation">]</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_trans"><span class="id" title="projection">enfa_trans</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="c:110" class="idref" href="#c:110"><span class="id" title="binder">c</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="lec_06_re.html#NFA.char"><span class="id" title="variable">char</span></a>) <a id="p:111" class="idref" href="#p:111"><span class="id" title="binder">p</span></a> <a id="q:112" class="idref" href="#q:112"><span class="id" title="binder">q</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="lec_06_re.html#c:110"><span class="id" title="variable">c</span></a>,<a class="idref" href="lec_06_re.html#p:111"><span class="id" title="variable">p</span></a>,<a class="idref" href="lec_06_re.html#q:112"><span class="id" title="variable">q</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">a</span>,<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">p'</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">q'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;transition&nbsp;as&nbsp;before&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">q'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#nfa_trans"><span class="id" title="projection">nfa_trans</span></a> <span class="id" title="var">p'</span> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">p'</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;\epsilon&nbsp;transition&nbsp;to&nbsp;final&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">p'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#nfa_fin"><span class="id" title="projection">nfa_fin</span></a> <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A1"><span class="id" title="variable">A1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;\epsilon&nbsp;transition&nbsp;from&nbsp;start&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#nfa_s"><span class="id" title="projection">nfa_s</span></a> <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A1"><span class="id" title="variable">A1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>,<span class="id" title="var">_</span>,<span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="nfa_star" class="idref" href="#nfa_star"><span class="id" title="definition">nfa_star</span></a> : <a class="idref" href="lec_06_re.html#nfa"><span class="id" title="record">nfa</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_of"><span class="id" title="definition">nfa_of</span></a> (<a class="idref" href="lec_06_re.html#enfa_star"><span class="id" title="definition">enfa_star</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enfa_s_None" class="idref" href="#enfa_s_None"><span class="id" title="lemma">enfa_s_None</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#enfa_s"><span class="id" title="projection">enfa_s</span></a> <a class="idref" href="lec_06_re.html#enfa_star"><span class="id" title="definition">enfa_star</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enfa_f_None" class="idref" href="#enfa_f_None"><span class="id" title="lemma">enfa_f_None</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#enfa_f"><span class="id" title="projection">enfa_f</span></a> <a class="idref" href="lec_06_re.html#enfa_star"><span class="id" title="definition">enfa_star</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">enfa_s_None</span> <span class="id" title="var">enfa_f_None</span> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enfa_star_cat" class="idref" href="#enfa_star_cat"><span class="id" title="lemma">enfa_star_cat</span></a> (<a id="x1:116" class="idref" href="#x1:116"><span class="id" title="binder">x1</span></a> <a id="x2:117" class="idref" href="#x2:117"><span class="id" title="binder">x2</span></a>: <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a>) (<a id="p:118" class="idref" href="#p:118"><span class="id" title="binder">p</span></a> : <a class="idref" href="lec_06_re.html#enfa_star"><span class="id" title="definition">enfa_star</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_accept"><span class="id" title="inductive">enfa_accept</span></a> <a class="idref" href="lec_06_re.html#p:118"><span class="id" title="variable">p</span></a> <a class="idref" href="lec_06_re.html#x1:116"><span class="id" title="variable">x1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_lang"><span class="id" title="definition">enfa_lang</span></a> <a class="idref" href="lec_06_re.html#enfa_star"><span class="id" title="definition">enfa_star</span></a> <a class="idref" href="lec_06_re.html#x2:117"><span class="id" title="variable">x2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_accept"><span class="id" title="inductive">enfa_accept</span></a> <a class="idref" href="lec_06_re.html#p:118"><span class="id" title="variable">p</span></a> (<a class="idref" href="lec_06_re.html#x1:116"><span class="id" title="variable">x1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="lec_06_re.html#x2:117"><span class="id" title="variable">x2</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Question:&nbsp;What&nbsp;are&nbsp;we&nbsp;inducting&nbsp;on?&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> =&gt; {<span class="id" title="var">p</span> <span class="id" title="var">x1</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<span class="id" title="lemma">eqP</span>-&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> =&gt; <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<span class="id" title="lemma">eqP</span>-&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">p</span> <span class="id" title="var">a</span> <span class="id" title="var">q</span> <span class="id" title="var">x</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <span class="id" title="var">p</span> =&gt; // <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <span class="id" title="var">q</span> =&gt; // <span class="id" title="var">q</span> <span class="id" title="var">pq</span> ? <span class="id" title="var">IH</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span>: <a class="idref" href="lec_06_re.html#EnfaSome"><span class="id" title="constructor">EnfaSome</span></a> (<span class="id" title="var">IH</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; [<span class="id" title="var">p</span>|] [<span class="id" title="var">q</span>|] <span class="id" title="var">x</span> //= <span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">IH</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">exact</span>: <a class="idref" href="lec_06_re.html#EnfaNone"><span class="id" title="constructor">EnfaNone</span></a> (<span class="id" title="var">IH</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enfa_starI" class="idref" href="#enfa_starI"><span class="id" title="lemma">enfa_starI</span></a> (<a id="x:119" class="idref" href="#x:119"><span class="id" title="binder">x</span></a>: <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a>) (<a id="p:120" class="idref" href="#p:120"><span class="id" title="binder">p</span></a> : <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A1"><span class="id" title="variable">A1</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_accept"><span class="id" title="definition">nfa_accept</span></a> <a class="idref" href="lec_06_re.html#p:120"><span class="id" title="variable">p</span></a> <a class="idref" href="lec_06_re.html#x:119"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="lec_06_re.html#enfa_accept"><span class="id" title="inductive">enfa_accept</span></a> <a class="idref" href="lec_06_re.html#enfa_star"><span class="id" title="definition">enfa_star</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="lec_06_re.html#p:120"><span class="id" title="variable">p</span></a>) <a class="idref" href="lec_06_re.html#x:119"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Questio:&nbsp;What&nbsp;are&nbsp;we&nbsp;inducting&nbsp;on?&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <span class="id" title="var">x</span> <span class="id" title="var">p</span> =&gt; /= [<span class="id" title="var">p</span> <span class="id" title="var">H</span>|<span class="id" title="var">a</span> <span class="id" title="var">x</span> <span class="id" title="var">IH</span> <span class="id" title="var">p</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: (@<a class="idref" href="lec_06_re.html#EnfaNone"><span class="id" title="constructor">EnfaNone</span></a> <a class="idref" href="lec_06_re.html#enfa_star"><span class="id" title="definition">enfa_star</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span>: <a class="idref" href="lec_06_re.html#EnfaFin"><span class="id" title="constructor">EnfaFin</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>/<span class="id" title="lemma">exists_inP</span> =&gt; <span class="id" title="var">q</span> <span class="id" title="var">q1</span> /<span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span>: <a class="idref" href="lec_06_re.html#EnfaSome"><span class="id" title="constructor">EnfaSome</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enfa_star_langI" class="idref" href="#enfa_star_langI"><span class="id" title="lemma">enfa_star_langI</span></a> (<a id="x:121" class="idref" href="#x:121"><span class="id" title="binder">x</span></a>: <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#x:121"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#b09457274bcb94927e289b8a9e9cd3f7"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A1"><span class="id" title="variable">A1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> @<a class="idref" href="lec_06_re.html#enfa_accept"><span class="id" title="inductive">enfa_accept</span></a> <a class="idref" href="lec_06_re.html#enfa_star"><span class="id" title="definition">enfa_star</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="lec_06_re.html#x:121"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>/<span class="id" title="lemma">exists_inP</span> =&gt; <span class="id" title="var">s</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: (@<a class="idref" href="lec_06_re.html#EnfaNone"><span class="id" title="constructor">EnfaNone</span></a> <a class="idref" href="lec_06_re.html#enfa_star"><span class="id" title="definition">enfa_star</span></a> <span class="id" title="var">_</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">s</span>)) =&gt; //. <span class="id" title="tactic">exact</span>: <a class="idref" href="lec_06_re.html#enfa_starI"><span class="id" title="lemma">enfa_starI</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enfa_starE" class="idref" href="#enfa_starE"><span class="id" title="lemma">enfa_starE</span></a> (<a id="o:122" class="idref" href="#o:122"><span class="id" title="binder">o</span></a>: <a class="idref" href="lec_06_re.html#enfa_star"><span class="id" title="definition">enfa_star</span></a>) (<a id="x:123" class="idref" href="#x:123"><span class="id" title="binder">x</span></a>: <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#enfa_accept"><span class="id" title="inductive">enfa_accept</span></a> <a class="idref" href="lec_06_re.html#o:122"><span class="id" title="variable">o</span></a> <a class="idref" href="lec_06_re.html#x:123"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="lec_06_re.html#o:122"><span class="id" title="variable">o</span></a> <span class="id" title="keyword">is</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="x1:125" class="idref" href="#x1:125"><span class="id" title="binder">x1</span></a> <a id="x2:126" class="idref" href="#x2:126"><span class="id" title="binder">x2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">[/\</span></a> <a class="idref" href="lec_06_re.html#x:123"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_06_re.html#x1:125"><span class="id" title="variable">x1</span></a> <span class="id" title="notation">++</span> <a class="idref" href="lec_06_re.html#x2:126"><span class="id" title="variable">x2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_06_re.html#nfa_accept"><span class="id" title="definition">nfa_accept</span></a> <span class="id" title="var">p</span> <a class="idref" href="lec_06_re.html#x1:125"><span class="id" title="variable">x1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">&amp;</span></a> <span class="id" title="definition">star</span> (<a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A1"><span class="id" title="variable">A1</span></a>) <a class="idref" href="lec_06_re.html#x2:126"><span class="id" title="variable">x2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="definition">star</span> (<a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A1"><span class="id" title="variable">A1</span></a>) <a class="idref" href="lec_06_re.html#x:123"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Question:&nbsp;What&nbsp;are&nbsp;we&nbsp;inducting&nbsp;on?&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> =&gt; {<span class="id" title="var">x</span> <span class="id" title="var">o</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; [<span class="id" title="var">q</span>|//].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span>; <span class="id" title="tactic">move</span>/<span class="id" title="lemma">eqP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; [<span class="id" title="var">p</span>|] <span class="id" title="var">a</span> [<span class="id" title="var">q</span>|] <span class="id" title="var">x</span> // <span class="id" title="var">H</span> <span class="id" title="var">acc</span> [<span class="id" title="var">x1</span>] [<span class="id" title="var">x2</span>] [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">H3</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">a</span><span class="id" title="notation">::</span><span class="id" title="var">x1</span>); <span class="id" title="tactic">exists</span> <span class="id" title="var">x2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; [<span class="id" title="var">p</span>|] [<span class="id" title="var">q</span>|] <span class="id" title="var">x</span> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">move</span> =&gt; *. <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> <span class="id" title="notation">[::]</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">H</span> <span class="id" title="var">acc</span> [<span class="id" title="var">x1</span>] [<span class="id" title="var">x2</span>] [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <span class="id" title="lemma">star_cat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">exists_inP</span>; <span class="id" title="tactic">exists</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<ul class="doclist">
<li> For reflection purposes.

</li>
</ul>
     
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="enfa_starP" class="idref" href="#enfa_starP"><span class="id" title="lemma">enfa_starP</span></a> (<a id="x:127" class="idref" href="#x:127"><span class="id" title="binder">x</span></a>: <a class="idref" href="lec_06_re.html#word"><span class="id" title="abbreviation">word</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#reflect"><span class="id" title="abbreviation">reflect</span></a> (<a class="idref" href="lec_06_re.html#enfa_lang"><span class="id" title="definition">enfa_lang</span></a> <a class="idref" href="lec_06_re.html#enfa_star"><span class="id" title="definition">enfa_star</span></a> <a class="idref" href="lec_06_re.html#x:127"><span class="id" title="variable">x</span></a>) (<span class="id" title="definition">star</span> (<a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A1"><span class="id" title="variable">A1</span></a>) <a class="idref" href="lec_06_re.html#x:127"><span class="id" title="variable">x</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Show&nbsp;both&nbsp;sides&nbsp;of&nbsp;inclusion&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#iffP"><span class="id" title="lemma">iffP</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#idP"><span class="id" title="lemma">idP</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;=&gt;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>/<span class="id" title="lemma">starP</span> =&gt; <span class="id" title="var">vv</span> <span class="id" title="var">H</span> -&gt;. <span class="id" title="tactic">elim</span>: <span class="id" title="var">vv</span> <span class="id" title="var">H</span> =&gt; /= [<span class="id" title="var">_</span>|<span class="id" title="var">v</span> <span class="id" title="var">vv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; //. <span class="id" title="tactic">exact</span>: <a class="idref" href="lec_06_re.html#EnfaFin"><span class="id" title="constructor">EnfaFin</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">IH</span> /<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[/<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>] <span class="id" title="var">H3</span>]. <span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="lec_06_re.html#enfa_star_cat"><span class="id" title="lemma">enfa_star_cat</span></a> (<span class="id" title="var">IH</span> <span class="id" title="var">_</span>) =&gt; //. <span class="id" title="tactic">exact</span>: <a class="idref" href="lec_06_re.html#enfa_star_langI"><span class="id" title="lemma">enfa_star_langI</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;&lt;=&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> =&gt; <span class="id" title="var">q</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="definition">inE</span> =&gt; /<span class="id" title="lemma">eqP</span>-&gt; {<span class="id" title="var">q</span>}. <span class="id" title="tactic">exact</span>: <a class="idref" href="lec_06_re.html#enfa_starE"><span class="id" title="lemma">enfa_starE</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="nfa_star_correct" class="idref" href="#nfa_star_correct"><span class="id" title="lemma">nfa_star_correct</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#nfa_star"><span class="id" title="definition">nfa_star</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">=</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">i</span></a> <span class="id" title="definition">star</span> (<a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> <a class="idref" href="lec_06_re.html#NFA.eNFAOps.A1"><span class="id" title="variable">A1</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="lec_06_re.html#nfa_ofP"><span class="id" title="lemma">nfa_ofP</span></a>/<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#idP"><span class="id" title="lemma">idP</span></a> =&gt; ?;<span class="id" title="tactic">exact</span>/<a class="idref" href="lec_06_re.html#enfa_starP"><span class="id" title="lemma">enfa_starP</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="lec_06_re.html#NFA.eNFAOps"><span class="id" title="section">eNFAOps</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="lec_06_re.html#NFA"><span class="id" title="section">NFA</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab18"></a><h2 class="section">Back to Regular Expressions</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Canonical</span> <span class="id" title="keyword">Structure</span> <a id="regexp_predType" class="idref" href="#regexp_predType"><span class="id" title="definition">regexp_predType</span></a> (<a id="char:128" class="idref" href="#char:128"><span class="id" title="binder">char</span></a>: <span class="id" title="abbreviation">eqType</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">PredType</span> (@<a class="idref" href="lec_06_re.html#re_lang"><span class="id" title="definition">re_lang</span></a> <a class="idref" href="lec_06_re.html#char:128"><span class="id" title="variable">char</span></a>).<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="DFAofRE" class="idref" href="#DFAofRE"><span class="id" title="section">DFAofRE</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Goal:&nbsp;DFA&nbsp;-&gt;&nbsp;RE<br/>
&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-&gt;&nbsp;RE<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;v<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;NFA&nbsp;&lt;-&gt;&nbsp;eNFA<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;^&nbsp;*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;|&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;|&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;|&nbsp;*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|--DFA&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="DFAofRE.char" class="idref" href="#DFAofRE.char"><span class="id" title="variable">char</span></a>: <span class="id" title="abbreviation">finType</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="re_to_nfa" class="idref" href="#re_to_nfa"><span class="id" title="definition">re_to_nfa</span></a> (<a id="r:130" class="idref" href="#r:130"><span class="id" title="binder">r</span></a>: <a class="idref" href="lec_06_re.html#regexp"><span class="id" title="inductive">regexp</span></a> <a class="idref" href="lec_06_re.html#DFAofRE.char"><span class="id" title="variable">char</span></a>): <a class="idref" href="lec_06_re.html#nfa"><span class="id" title="record">nfa</span></a> <a class="idref" href="lec_06_re.html#DFAofRE.char"><span class="id" title="variable">char</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="lec_06_re.html#r:130"><span class="id" title="variable">r</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="lec_06_re.html#:::'Void'"><span class="id" title="notation">Void</span></a> =&gt; <a class="idref" href="lec_06_re.html#dfa_to_nfa"><span class="id" title="definition">dfa_to_nfa</span></a> (<span class="id" title="definition">dfa_void</span> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="lec_06_re.html#:::'Eps'"><span class="id" title="notation">Eps</span></a> =&gt; <a class="idref" href="lec_06_re.html#nfa_eps"><span class="id" title="definition">nfa_eps</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="lec_06_re.html#Atom"><span class="id" title="constructor">Atom</span></a> <span class="id" title="var">a</span> =&gt; <a class="idref" href="lec_06_re.html#nfa_char"><span class="id" title="definition">nfa_char</span></a> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="lec_06_re.html#Star"><span class="id" title="constructor">Star</span></a> <span class="id" title="var">s</span> =&gt; <a class="idref" href="lec_06_re.html#nfa_star"><span class="id" title="definition">nfa_star</span></a> (<a class="idref" href="lec_06_re.html#re_to_nfa:131"><span class="id" title="definition">re_to_nfa</span></a> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="lec_06_re.html#Plus"><span class="id" title="constructor">Plus</span></a> <span class="id" title="var">s</span> <span class="id" title="var">t</span> =&gt; <a class="idref" href="lec_06_re.html#nfa_plus"><span class="id" title="definition">nfa_plus</span></a> (<a class="idref" href="lec_06_re.html#re_to_nfa:131"><span class="id" title="definition">re_to_nfa</span></a> <span class="id" title="var">s</span>) (<a class="idref" href="lec_06_re.html#re_to_nfa:131"><span class="id" title="definition">re_to_nfa</span></a> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="lec_06_re.html#Conc"><span class="id" title="constructor">Conc</span></a> <span class="id" title="var">s</span> <span class="id" title="var">t</span> =&gt; <a class="idref" href="lec_06_re.html#nfa_conc"><span class="id" title="definition">nfa_conc</span></a> (<a class="idref" href="lec_06_re.html#re_to_nfa:131"><span class="id" title="definition">re_to_nfa</span></a> <span class="id" title="var">s</span>) (<a class="idref" href="lec_06_re.html#re_to_nfa:131"><span class="id" title="definition">re_to_nfa</span></a> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="re_to_nfa_correct" class="idref" href="#re_to_nfa_correct"><span class="id" title="lemma">re_to_nfa_correct</span></a> (<a id="r:133" class="idref" href="#r:133"><span class="id" title="binder">r</span></a>: <a class="idref" href="lec_06_re.html#regexp"><span class="id" title="inductive">regexp</span></a> <a class="idref" href="lec_06_re.html#DFAofRE.char"><span class="id" title="variable">char</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_06_re.html#nfa_lang"><span class="id" title="definition">nfa_lang</span></a> (<a class="idref" href="lec_06_re.html#re_to_nfa"><span class="id" title="definition">re_to_nfa</span></a> <a class="idref" href="lec_06_re.html#r:133"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">=</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">i</span></a> <a class="idref" href="lec_06_re.html#r:133"><span class="id" title="variable">r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;By&nbsp;structural&nbsp;induction&nbsp;on&nbsp;regular&nbsp;expressions.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <span class="id" title="var">r</span> =&gt; [||<span class="id" title="var">a</span>|<span class="id" title="var">s</span> <span class="id" title="var">IHs</span> |<span class="id" title="var">s</span> <span class="id" title="var">IHs</span> <span class="id" title="var">t</span> <span class="id" title="var">IHt</span> |<span class="id" title="var">s</span> <span class="id" title="var">IHs</span> <span class="id" title="var">t</span> <span class="id" title="var">IHt</span>] <span class="id" title="var">w</span> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;0.&nbsp;Void&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="lec_06_re.html#dfa_to_nfa_correct"><span class="id" title="lemma">dfa_to_nfa_correct</span></a> <span class="id" title="definition">inE</span> /<span class="id" title="definition">dfa_accept</span> <span class="id" title="definition">inE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;1.&nbsp;eps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span>: <a class="idref" href="lec_06_re.html#nfa_eps_correct"><span class="id" title="lemma">nfa_eps_correct</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;2.&nbsp;char&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span>: <a class="idref" href="lec_06_re.html#nfa_char_correct"><span class="id" title="lemma">nfa_char_correct</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;4.&nbsp;star&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="lec_06_re.html#nfa_star_correct"><span class="id" title="lemma">nfa_star_correct</span></a>. <span class="id" title="tactic">exact</span>: <span class="id" title="lemma">star_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;3.&nbsp;+&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="lec_06_re.html#nfa_plus_correct"><span class="id" title="lemma">nfa_plus_correct</span></a> /<span class="id" title="definition">plus</span> <span class="id" title="definition">inE</span> <span class="id" title="var">IHs</span> <span class="id" title="var">IHt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;5.&nbsp;conc&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="lec_06_re.html#nfa_conc_correct"><span class="id" title="lemma">nfa_conc_correct</span></a>. <span class="id" title="tactic">exact</span>: <span class="id" title="lemma">conc_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="re_to_dfa" class="idref" href="#re_to_dfa"><span class="id" title="definition">re_to_dfa</span></a> : <a class="idref" href="lec_06_re.html#regexp"><span class="id" title="inductive">regexp</span></a> <a class="idref" href="lec_06_re.html#DFAofRE.char"><span class="id" title="variable">char</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="record">dfa</span> <a class="idref" href="lec_06_re.html#DFAofRE.char"><span class="id" title="variable">char</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="lec_06_re.html#nfa_to_dfa"><span class="id" title="definition">nfa_to_dfa</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e"><span class="id" title="notation">\</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrfun.html#8b4742e3f67816503ce4ab2f3b81c27e"><span class="id" title="notation">o</span></a> <a class="idref" href="lec_06_re.html#re_to_nfa"><span class="id" title="definition">re_to_nfa</span></a>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<ul class="doclist">
<li> The final lemma.

</li>
</ul>
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="re_to_dfa_correct" class="idref" href="#re_to_dfa_correct"><span class="id" title="lemma">re_to_dfa_correct</span></a> (<a id="r:134" class="idref" href="#r:134"><span class="id" title="binder">r</span></a>: <a class="idref" href="lec_06_re.html#regexp"><span class="id" title="inductive">regexp</span></a> <a class="idref" href="lec_06_re.html#DFAofRE.char"><span class="id" title="variable">char</span></a>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">dfa_lang</span> (<a class="idref" href="lec_06_re.html#re_to_dfa"><span class="id" title="definition">re_to_dfa</span></a> <a class="idref" href="lec_06_re.html#r:134"><span class="id" title="variable">r</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">=</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.ssr.ssrbool.html#1e6a438ff685c38fcd9034a94f271777"><span class="id" title="notation">i</span></a> <a class="idref" href="lec_06_re.html#r:134"><span class="id" title="variable">r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> =&gt; <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="lec_06_re.html#nfa_to_dfa_correct"><span class="id" title="lemma">nfa_to_dfa_correct</span></a> <a class="idref" href="lec_06_re.html#re_to_nfa_correct"><span class="id" title="lemma">re_to_nfa_correct</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="lec_06_re.html#DFAofRE"><span class="id" title="section">DFAofRE</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab19"></a><h2 class="section">DFA back to RE</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> We won't cover this final piece, but it can be done with one
      of many constructions.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;Goal:&nbsp;DFA&nbsp;-&gt;&nbsp;RE<br/>
&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-&gt;*RE<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;v<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;NFA&nbsp;&lt;-&gt;&nbsp;eNFA<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;^&nbsp;|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;|&nbsp;v<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|-*DFA<br/>
<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab20"></a><h2 class="section">Summary</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> We introduces REs and showed that they were equivalent to DFAs via
     NFAs.

</li>
</ul>
 
</div>
<div class="code">
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>