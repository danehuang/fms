<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>lec_09_hl</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library lec_09_hl</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab1"></a><h1 class="section">Hoare Logic and Axiomatic Semantics</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Bool.Bool.html#"><span class="id" title="library">Bool.Bool</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Strings.String.html#"><span class="id" title="library">Strings.String</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Arith.PeanoNat.html#"><span class="id" title="library">Arith.PeanoNat</span></a>. <span class="id" title="keyword">Import</span> <span class="id" title="var">Nat</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">lec_08_imp</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab2"></a><h2 class="section">References</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> https://softwarefoundations.cis.upenn.edu/plf-current/Hoare.html

</li>
<li> https://softwarefoundations.cis.upenn.edu/plf-current/Hoare2.html

</li>
</ul>

<div class="paragraph"> </div>

 
<div class="paragraph"> </div>

<a id="lab3"></a><h2 class="section">Recap</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Last time we looked at the IMP programming language which introduced the
    concept of programming with state.

</li>
<li> Thus we got a "language" for programming TMs.

</li>
<li> We then introduced it's small-step (machine-like) and
    big-step (evaluation) semantics. These different styles of giving semantics:
    small-step and big-step semantics.

</li>
<li> We did a formal proof that big-step evaluation was deterministic.

</li>
<li> Today we will introduce <i>Hoare Logic</i>.

</li>
<li> Along the way we will see a 3rd style of semantics: <i>axiomatic semantics</i>.

</li>
<li> Finally we'll show how to verify programs.

</li>
</ul>

<div class="paragraph"> </div>

 
<div class="paragraph"> </div>


<div class="paragraph"> </div>

 
<div class="paragraph"> </div>

<a id="lab4"></a><h2 class="section">Goal for today</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Introduce Hoare logic, including assertions and compositional rules
     (assignment, pre/post, skip, seq, if, while).

</li>
<li> Introduce axiomatic semantics.

</li>
<li> Show example program verifications with <i>decorated commands</i>.

</li>
<li> Show how to extract verification conditions in an effort to automate
     verification.

</li>
</ul>

<div class="paragraph"> </div>

 
<div class="paragraph"> </div>

<a id="lab5"></a><h2 class="section">Hoare Logic</h2>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Up until now, we've proven properties of entire languages / machines.

</li>
<li> What if we wanted to prove a property of a single program in a language?

</li>
<li> This is where *Hoare Logic* comes in. Hoare Logic is a logic that is designed
     to prove properties of programs.

</li>
<li> Hoare Logic (and separation logic) is an active area of research.

</li>
</ul>
 
<div class="paragraph"> </div>

<a id="lab6"></a><h3 class="section">The Basic Idea 1: Make assertions</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;{{P}}&nbsp;c&nbsp;{{Q}}<br/>
*)</span><br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<ul class="doclist">
<li> P is a *precondition*, i.e., true before we run c

</li>
<li> c is a command in IMP or a program/algorithm

</li>
<li> Q is a *postcondition*, i.e., true after we run c

</li>
</ul>
 
<div class="paragraph"> </div>

<a id="lab7"></a><h3 class="section">The Basic Idea 2: Compositional</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{P}}&nbsp;c1&nbsp;{{Q}}&nbsp;&nbsp;{{Q}}&nbsp;c2&nbsp;{{R}}<br/>
&nbsp;&nbsp;&nbsp;--------------------------------&nbsp;HoareSeq<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{P}}&nbsp;c1;&nbsp;c2&nbsp;{{R}}<br/>
*)</span><br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> For every construct in our language, we will have a corresponding set of 
     assertions that we can make about it.

</li>
<li> In this manner, we can prove properties of programs by following the structure
     of the program.

</li>
<li> 

</li>
</ul>
 
<div class="paragraph"> </div>

<a id="lab8"></a><h3 class="section">So we need to define two things</h3>


<div class="paragraph"> </div>

<ul class="doclist">
<li> an assertion language

</li>
<li> structural proof rules

</li>
</ul>
 
<div class="paragraph"> </div>

<a id="lab9"></a><h2 class="section">Assertions</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> First we need to be able to make *assertions* about programs.

</li>
<li> What could we possibly say about an IMP program?

</li>
<li> Well IMP programs take states and transform them into states.

</li>
<li> So perhaps we can make assertions about states.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="Assertion" class="idref" href="#Assertion"><span class="id" title="definition">Assertion</span></a> := <span class="id" title="definition">state</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab10"></a><h3 class="section">Example 1</h3>


<div class="paragraph"> </div>

   <span class="inlinecode"><span class="id" title="var">st</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&lt;=</span> <span class="inlinecode"><span class="id" title="var">st</span></span> <span class="inlinecode"><span class="id" title="var">Y</span></span>

<div class="paragraph"> </div>

   The valued stored at identifer X is less than the value stored at identifier Y.
 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="assn1" class="idref" href="#assn1"><span class="id" title="definition">assn1</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="st:1" class="idref" href="#st:1"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#st:1"><span class="id" title="variable">st</span></a> <span class="id" title="definition">X</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="lec_09_hl.html#st:1"><span class="id" title="variable">st</span></a> <span class="id" title="definition">Y</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab11"></a><h3 class="section">Example 2</h3>


<div class="paragraph"> </div>

   <span class="inlinecode"><span class="id" title="var">st</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode">3</span> <span class="inlinecode">\/</span> <span class="inlinecode"><span class="id" title="var">st</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&lt;=</span> <span class="inlinecode"><span class="id" title="var">st</span></span> <span class="inlinecode"><span class="id" title="var">Y</span></span>

<div class="paragraph"> </div>

   The valued stored at identifer X is either 3 or
   the value stored at identifier X is less than the value stored at identifier Y.
 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="assn2" class="idref" href="#assn2"><span class="id" title="definition">assn2</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="st:2" class="idref" href="#st:2"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#st:2"><span class="id" title="variable">st</span></a> <span class="id" title="definition">X</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 3 <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="lec_09_hl.html#st:2"><span class="id" title="variable">st</span></a> <span class="id" title="definition">X</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="lec_09_hl.html#st:2"><span class="id" title="variable">st</span></a> <span class="id" title="definition">Y</span>.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> Thus we have a shallow embedding!

</li>
<li> We could have a deep embedding if we reified the language of propositions
     for Hoare logic as an AST. But this would be a lot of work.

</li>
<li> In this case it is simpler to do a shallow embedding.

</li>
<li> The downside of a shallow embedding is that now we have the power of <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>.

</li>
</ul>
 
<div class="paragraph"> </div>

<a id="lab12"></a><h3 class="section">Example 3</h3>


<div class="paragraph"> </div>

   <span class="inlinecode"><span class="id" title="var">st</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode">3</span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">st</span></span> <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">=</span> <span class="inlinecode">4</span>

<div class="paragraph"> </div>

   If the value stored at X is 3 then the value stored at Y is 4.
 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="assn3" class="idref" href="#assn3"><span class="id" title="definition">assn3</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="st:3" class="idref" href="#st:3"><span class="id" title="binder">st</span></a> =&gt; (<span class="id" title="keyword">fun</span> <a id="st:5" class="idref" href="#st:5"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#st:5"><span class="id" title="variable">st</span></a> <span class="id" title="definition">X</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 3) <a class="idref" href="lec_09_hl.html#st:3"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (<span class="id" title="keyword">fun</span> <a id="st:4" class="idref" href="#st:4"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#st:4"><span class="id" title="variable">st</span></a> <span class="id" title="definition">Y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 4) <a class="idref" href="lec_09_hl.html#st:3"><span class="id" title="variable">st</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab13"></a><h2 class="section">Example 4</h2>


<div class="paragraph"> </div>

   <span class="inlinecode"><span class="id" title="var">st</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode">3</span> <span class="inlinecode">&lt;-&gt;</span> <span class="inlinecode"><span class="id" title="var">st</span></span> <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">=</span> <span class="inlinecode">4</span>

<div class="paragraph"> </div>

   If the value stored at X is 3 iff the value stored at Y is 4.
 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="assn4" class="idref" href="#assn4"><span class="id" title="definition">assn4</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="st:6" class="idref" href="#st:6"><span class="id" title="binder">st</span></a> =&gt; (<span class="id" title="keyword">fun</span> <a id="st:7" class="idref" href="#st:7"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#st:7"><span class="id" title="variable">st</span></a> <span class="id" title="definition">X</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 3) <a class="idref" href="lec_09_hl.html#st:6"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> (<span class="id" title="keyword">fun</span> <a id="st:8" class="idref" href="#st:8"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#st:8"><span class="id" title="variable">st</span></a> <span class="id" title="definition">Y</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 4) <a class="idref" href="lec_09_hl.html#st:6"><span class="id" title="variable">st</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab14"></a><h3 class="section">Ignore me, notation for pretty assertions</h3>

<div class="paragraph"> </div>

<a id="lab15"></a><h3 class="section">Side Comment:</h3>

<ul class="doclist">
<li> When working with shallow embeddings, it is useful to have powerful
     notation mechanisms.

</li>
<li> In this case, we are going to use notation to make the shallowly-embedded
     assertion language as close to Coq's original syntax as possible.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="Aexp" class="idref" href="#Aexp"><span class="id" title="definition">Aexp</span></a> : <span class="id" title="keyword">Type</span> := <span class="id" title="definition">state</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="assert_of_Prop" class="idref" href="#assert_of_Prop"><span class="id" title="definition">assert_of_Prop</span></a> (<a id="P:9" class="idref" href="#P:9"><span class="id" title="binder">P</span></a> : <span class="id" title="keyword">Prop</span>) : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="lec_09_hl.html#P:9"><span class="id" title="variable">P</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="Aexp_of_nat" class="idref" href="#Aexp_of_nat"><span class="id" title="definition">Aexp_of_nat</span></a> (<a id="n:10" class="idref" href="#n:10"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="lec_09_hl.html#Aexp"><span class="id" title="definition">Aexp</span></a> := <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="lec_09_hl.html#n:10"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="Aexp_of_aexp" class="idref" href="#Aexp_of_aexp"><span class="id" title="definition">Aexp_of_aexp</span></a> (<a id="a:11" class="idref" href="#a:11"><span class="id" title="binder">a</span></a> : <span class="id" title="inductive">aexp</span>) : <a class="idref" href="lec_09_hl.html#Aexp"><span class="id" title="definition">Aexp</span></a> := <span class="id" title="keyword">fun</span> <a id="st:12" class="idref" href="#st:12"><span class="id" title="binder">st</span></a> =&gt; <span class="id" title="definition">aeval</span> <a class="idref" href="lec_09_hl.html#st:12"><span class="id" title="variable">st</span></a> <a class="idref" href="lec_09_hl.html#a:11"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="lec_09_hl.html#assert_of_Prop"><span class="id" title="definition">assert_of_Prop</span></a> <a class="idref" href="lec_09_hl.html#assert_of_Prop"><span class="id" title="definition">:</span></a> <a class="idref" href="lec_09_hl.html#assert_of_Prop"><span class="id" title="definition">Sortclass</span></a> <a class="idref" href="lec_09_hl.html#assert_of_Prop"><span class="id" title="definition">&gt;-&gt;</span></a> <a class="idref" href="lec_09_hl.html#assert_of_Prop"><span class="id" title="definition">Assertion</span></a>.<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="lec_09_hl.html#Aexp_of_nat"><span class="id" title="definition">Aexp_of_nat</span></a> <a class="idref" href="lec_09_hl.html#Aexp_of_nat"><span class="id" title="definition">:</span></a> <a class="idref" href="lec_09_hl.html#Aexp_of_nat"><span class="id" title="definition">nat</span></a> <a class="idref" href="lec_09_hl.html#Aexp_of_nat"><span class="id" title="definition">&gt;-&gt;</span></a> <a class="idref" href="lec_09_hl.html#Aexp_of_nat"><span class="id" title="definition">Aexp</span></a>.<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="lec_09_hl.html#Aexp_of_aexp"><span class="id" title="definition">Aexp_of_aexp</span></a> <a class="idref" href="lec_09_hl.html#Aexp_of_aexp"><span class="id" title="definition">:</span></a> <a class="idref" href="lec_09_hl.html#Aexp_of_aexp"><span class="id" title="definition">aexp</span></a> <a class="idref" href="lec_09_hl.html#Aexp_of_aexp"><span class="id" title="definition">&gt;-&gt;</span></a> <a class="idref" href="lec_09_hl.html#Aexp_of_aexp"><span class="id" title="definition">Aexp</span></a>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="lec_09_hl.html#assert_of_Prop"><span class="id" title="definition">assert_of_Prop</span></a> /.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="lec_09_hl.html#Aexp_of_nat"><span class="id" title="definition">Aexp_of_nat</span></a> /.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="lec_09_hl.html#Aexp_of_aexp"><span class="id" title="definition">Aexp_of_aexp</span></a> /.<br/>
<span class="id" title="var">Declare</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">assertion_scope</span>.<br/>
<span class="id" title="keyword">Bind</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">assertion_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">Assertion</span>.<br/>
<span class="id" title="keyword">Bind</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">assertion_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">Aexp</span>.<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">assertion_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">assertion</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="assert" class="idref" href="#assert"><span class="id" title="abbreviation">assert</span></a> <span class="id" title="var">P</span> := (<span class="id" title="var">P</span>%<span class="id" title="var">assertion</span> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>).<br/>
<span class="id" title="keyword">Notation</span> <a id="mkAexp" class="idref" href="#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">a</span> := (<span class="id" title="var">a</span>%<span class="id" title="var">assertion</span> : <a class="idref" href="lec_09_hl.html#Aexp"><span class="id" title="definition">Aexp</span></a>).<br/>
<span class="id" title="keyword">Notation</span> <a id="90b84b70bae2a0cf52991d884e146143" class="idref" href="#90b84b70bae2a0cf52991d884e146143"><span class="id" title="notation">&quot;</span></a>~ P" := (<span class="id" title="keyword">fun</span> <a id="st:13" class="idref" href="#st:13"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="lec_09_hl.html#assert"><span class="id" title="abbreviation">assert</span></a> <span class="id" title="var">P</span> <a class="idref" href="lec_09_hl.html#st:13"><span class="id" title="variable">st</span></a>) : <span class="id" title="var">assertion_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="cce4ad113420d0c25c6ce4891bbe5028" class="idref" href="#cce4ad113420d0c25c6ce4891bbe5028"><span class="id" title="notation">&quot;</span></a>P /\ Q" := (<span class="id" title="keyword">fun</span> <a id="st:14" class="idref" href="#st:14"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#assert"><span class="id" title="abbreviation">assert</span></a> <span class="id" title="var">P</span> <a class="idref" href="lec_09_hl.html#st:14"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="lec_09_hl.html#assert"><span class="id" title="abbreviation">assert</span></a> <span class="id" title="var">Q</span> <a class="idref" href="lec_09_hl.html#st:14"><span class="id" title="variable">st</span></a>) : <span class="id" title="var">assertion_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="71acda7c05013ec3b4ea9870c5591533" class="idref" href="#71acda7c05013ec3b4ea9870c5591533"><span class="id" title="notation">&quot;</span></a>P \/ Q" := (<span class="id" title="keyword">fun</span> <a id="st:15" class="idref" href="#st:15"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#assert"><span class="id" title="abbreviation">assert</span></a> <span class="id" title="var">P</span> <a class="idref" href="lec_09_hl.html#st:15"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="lec_09_hl.html#assert"><span class="id" title="abbreviation">assert</span></a> <span class="id" title="var">Q</span> <a class="idref" href="lec_09_hl.html#st:15"><span class="id" title="variable">st</span></a>) : <span class="id" title="var">assertion_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="::assertion_scope:x_'-&gt;'_x" class="idref" href="#::assertion_scope:x_'-&gt;'_x"><span class="id" title="notation">&quot;</span></a>P -&gt; Q" := (<span class="id" title="keyword">fun</span> <a id="st:16" class="idref" href="#st:16"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#assert"><span class="id" title="abbreviation">assert</span></a> <span class="id" title="var">P</span> <a class="idref" href="lec_09_hl.html#st:16"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_09_hl.html#assert"><span class="id" title="abbreviation">assert</span></a> <span class="id" title="var">Q</span> <a class="idref" href="lec_09_hl.html#st:16"><span class="id" title="variable">st</span></a>) : <span class="id" title="var">assertion_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="::assertion_scope:x_'&lt;-&gt;'_x" class="idref" href="#::assertion_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&quot;</span></a>P &lt;-&gt; Q" := (<span class="id" title="keyword">fun</span> <a id="st:17" class="idref" href="#st:17"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#assert"><span class="id" title="abbreviation">assert</span></a> <span class="id" title="var">P</span> <a class="idref" href="lec_09_hl.html#st:17"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="lec_09_hl.html#assert"><span class="id" title="abbreviation">assert</span></a> <span class="id" title="var">Q</span> <a class="idref" href="lec_09_hl.html#st:17"><span class="id" title="variable">st</span></a>) : <span class="id" title="var">assertion_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="5ad5c240a08c2b567f422c2e12577e27" class="idref" href="#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">&quot;</span></a>a = b" := (<span class="id" title="keyword">fun</span> <a id="st:18" class="idref" href="#st:18"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">a</span> <a class="idref" href="lec_09_hl.html#st:18"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">b</span> <a class="idref" href="lec_09_hl.html#st:18"><span class="id" title="variable">st</span></a>) : <span class="id" title="var">assertion_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="::assertion_scope:x_'&lt;&gt;'_x" class="idref" href="#::assertion_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&quot;</span></a>a &lt;&gt; b" := (<span class="id" title="keyword">fun</span> <a id="st:19" class="idref" href="#st:19"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">a</span> <a class="idref" href="lec_09_hl.html#st:19"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">b</span> <a class="idref" href="lec_09_hl.html#st:19"><span class="id" title="variable">st</span></a>) : <span class="id" title="var">assertion_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="154e85acf24eb57aa8f8a0156c0ba632" class="idref" href="#154e85acf24eb57aa8f8a0156c0ba632"><span class="id" title="notation">&quot;</span></a>a &lt;= b" := (<span class="id" title="keyword">fun</span> <a id="st:20" class="idref" href="#st:20"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">a</span> <a class="idref" href="lec_09_hl.html#st:20"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">b</span> <a class="idref" href="lec_09_hl.html#st:20"><span class="id" title="variable">st</span></a>) : <span class="id" title="var">assertion_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="::assertion_scope:x_'&lt;'_x" class="idref" href="#::assertion_scope:x_'&lt;'_x"><span class="id" title="notation">&quot;</span></a>a &lt; b" := (<span class="id" title="keyword">fun</span> <a id="st:21" class="idref" href="#st:21"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">a</span> <a class="idref" href="lec_09_hl.html#st:21"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">b</span> <a class="idref" href="lec_09_hl.html#st:21"><span class="id" title="variable">st</span></a>) : <span class="id" title="var">assertion_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="47f7df8f7d756435423005da8ec23e41" class="idref" href="#47f7df8f7d756435423005da8ec23e41"><span class="id" title="notation">&quot;</span></a>a &gt;= b" := (<span class="id" title="keyword">fun</span> <a id="st:22" class="idref" href="#st:22"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">a</span> <a class="idref" href="lec_09_hl.html#st:22"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">&gt;=</span></a> <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">b</span> <a class="idref" href="lec_09_hl.html#st:22"><span class="id" title="variable">st</span></a>) : <span class="id" title="var">assertion_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="::assertion_scope:x_'&gt;'_x" class="idref" href="#::assertion_scope:x_'&gt;'_x"><span class="id" title="notation">&quot;</span></a>a &gt; b" := (<span class="id" title="keyword">fun</span> <a id="st:23" class="idref" href="#st:23"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">a</span> <a class="idref" href="lec_09_hl.html#st:23"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">b</span> <a class="idref" href="lec_09_hl.html#st:23"><span class="id" title="variable">st</span></a>) : <span class="id" title="var">assertion_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="d7f322243320be10cf04dfecd9fa5876" class="idref" href="#d7f322243320be10cf04dfecd9fa5876"><span class="id" title="notation">&quot;</span></a>a + b" := (<span class="id" title="keyword">fun</span> <a id="st:24" class="idref" href="#st:24"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">a</span> <a class="idref" href="lec_09_hl.html#st:24"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">b</span> <a class="idref" href="lec_09_hl.html#st:24"><span class="id" title="variable">st</span></a>) : <span class="id" title="var">assertion_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="::assertion_scope:x_'-'_x" class="idref" href="#::assertion_scope:x_'-'_x"><span class="id" title="notation">&quot;</span></a>a - b" := (<span class="id" title="keyword">fun</span> <a id="st:25" class="idref" href="#st:25"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">a</span> <a class="idref" href="lec_09_hl.html#st:25"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">b</span> <a class="idref" href="lec_09_hl.html#st:25"><span class="id" title="variable">st</span></a>) : <span class="id" title="var">assertion_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="416660177ea0e5c9120e6d5bca0fb24e" class="idref" href="#416660177ea0e5c9120e6d5bca0fb24e"><span class="id" title="notation">&quot;</span></a>a * b" := (<span class="id" title="keyword">fun</span> <a id="st:26" class="idref" href="#st:26"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">a</span> <a class="idref" href="lec_09_hl.html#st:26"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Peano.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">*</span></a> <a class="idref" href="lec_09_hl.html#mkAexp"><span class="id" title="abbreviation">mkAexp</span></a> <span class="id" title="var">b</span> <a class="idref" href="lec_09_hl.html#st:26"><span class="id" title="variable">st</span></a>) : <span class="id" title="var">assertion_scope</span>.<br/>

<br/>
</div>

<div class="doc">
Lift predicate into assertion language. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="ap" class="idref" href="#ap"><span class="id" title="definition">ap</span></a> {<a id="X:27" class="idref" href="#X:27"><span class="id" title="binder">X</span></a>} (<a id="f:28" class="idref" href="#f:28"><span class="id" title="binder">f</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_09_hl.html#X:27"><span class="id" title="variable">X</span></a>) (<a id="x:29" class="idref" href="#x:29"><span class="id" title="binder">x</span></a> : <a class="idref" href="lec_09_hl.html#Aexp"><span class="id" title="definition">Aexp</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="st:30" class="idref" href="#st:30"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#f:28"><span class="id" title="variable">f</span></a> (<a class="idref" href="lec_09_hl.html#x:29"><span class="id" title="variable">x</span></a> <a class="idref" href="lec_09_hl.html#st:30"><span class="id" title="variable">st</span></a>).<br/>

<br/>
</div>

<div class="doc">
Lift 2-arity relation into assertion language. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="ap2" class="idref" href="#ap2"><span class="id" title="definition">ap2</span></a> {<a id="X:31" class="idref" href="#X:31"><span class="id" title="binder">X</span></a>} (<a id="f:32" class="idref" href="#f:32"><span class="id" title="binder">f</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_09_hl.html#X:31"><span class="id" title="variable">X</span></a>) (<a id="x:33" class="idref" href="#x:33"><span class="id" title="binder">x</span></a> : <a class="idref" href="lec_09_hl.html#Aexp"><span class="id" title="definition">Aexp</span></a>) (<a id="y:34" class="idref" href="#y:34"><span class="id" title="binder">y</span></a> : <a class="idref" href="lec_09_hl.html#Aexp"><span class="id" title="definition">Aexp</span></a>) (<a id="st:35" class="idref" href="#st:35"><span class="id" title="binder">st</span></a> : <span class="id" title="definition">state</span>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#f:32"><span class="id" title="variable">f</span></a> (<a class="idref" href="lec_09_hl.html#x:33"><span class="id" title="variable">x</span></a> <a class="idref" href="lec_09_hl.html#st:35"><span class="id" title="variable">st</span></a>) (<a class="idref" href="lec_09_hl.html#y:34"><span class="id" title="variable">y</span></a> <a class="idref" href="lec_09_hl.html#st:35"><span class="id" title="variable">st</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab16"></a><h3 class="section">Assertions</h3>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Here are the previous examples with prettier notation.

</li>
<li> Note that the quantification over state is implicit now.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="assn1'" class="idref" href="#assn1'"><span class="id" title="definition">assn1'</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#154e85acf24eb57aa8f8a0156c0ba632"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="definition">Y</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="assn2'" class="idref" href="#assn2'"><span class="id" title="definition">assn2'</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> 3 <a class="idref" href="lec_09_hl.html#71acda7c05013ec3b4ea9870c5591533"><span class="id" title="notation">\/</span></a> <span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#154e85acf24eb57aa8f8a0156c0ba632"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="definition">Y</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="assn3'" class="idref" href="#assn3'"><span class="id" title="definition">assn3'</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> 3 <a class="idref" href="lec_09_hl.html#::assertion_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="definition">Y</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> 4.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="assn4'" class="idref" href="#assn4'"><span class="id" title="definition">assn4'</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> 3 <a class="idref" href="lec_09_hl.html#::assertion_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <span class="id" title="definition">Y</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> 4.<br/>

<br/>
</div>

<div class="doc">
<a id="lab17"></a><h2 class="section">Hoare Triples</h2>

<div class="paragraph"> </div>

<a id="lab18"></a><h3 class="section">Hoare Triples</h3>


<div class="paragraph"> </div>

   <span class="inlinecode">{{<span class="id" title="var">P</span>}}</span> <span class="inlinecode"><span class="id" title="var">c</span></span> <span class="inlinecode">{{<span class="id" title="var">Q</span>}}</span>

<div class="paragraph"> </div>

<ul class="doclist">
<li> P is a <i>precondition</i> and is written in our assertion language.

</li>
<li> c is a command in IMP.

</li>
<li> Q is a <i>postcondition</i> and is written in our assertion language.

</li>
</ul>

<div class="paragraph"> </div>

 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="hoare_triple" class="idref" href="#hoare_triple"><span class="id" title="definition">hoare_triple</span></a> (<a id="P:36" class="idref" href="#P:36"><span class="id" title="binder">P</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>) (<a id="c:37" class="idref" href="#c:37"><span class="id" title="binder">c</span></a> : <span class="id" title="inductive">com</span>) (<a id="Q:38" class="idref" href="#Q:38"><span class="id" title="binder">Q</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="st:39" class="idref" href="#st:39"><span class="id" title="binder">st</span></a> <a id="st':40" class="idref" href="#st':40"><span class="id" title="binder">st'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#st:39"><span class="id" title="variable">st</span></a> <span class="id" title="notation">=[</span> <a class="idref" href="lec_09_hl.html#c:37"><span class="id" title="variable">c</span></a> <span class="id" title="notation">]=&gt;</span> <a class="idref" href="lec_09_hl.html#st':40"><span class="id" title="variable">st'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a>   <span class="comment">(*&nbsp;as&nbsp;a&nbsp;reminder,&nbsp;this&nbsp;is&nbsp;big-step&nbsp;evaluation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#P:36"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#st:39"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#Q:38"><span class="id" title="variable">Q</span></a> <a class="idref" href="lec_09_hl.html#st':40"><span class="id" title="variable">st'</span></a>.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> Some notational support for writing Hoare Triples.

</li>
</ul>
 
</div>
<div class="code">
<span class="id" title="var">Declare</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">hoare_spec_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">hoare_spec_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="a18cbce9fe584a9130c3f34d4f14555f" class="idref" href="#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">&quot;</span></a>{{ P }} c {{ Q }}" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="lec_09_hl.html#hoare_triple"><span class="id" title="definition">hoare_triple</span></a> <span class="id" title="var">P</span> <span class="id" title="var">c</span> <span class="id" title="var">Q</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 90, <span class="id" title="var">c</span> <span class="id" title="var">custom</span> <span class="id" title="var">com</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99)<br/>
&nbsp;&nbsp;: <span class="id" title="var">hoare_spec_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab19"></a><h3 class="section">Example 1</h3>


<div class="paragraph"> </div>

   <span class="inlinecode">{{<span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0}}</span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">+</span> <span class="inlinecode">1</span> <span class="inlinecode">{{<span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode">1}}</span>

<div class="paragraph"> </div>

<ul class="doclist">
<li> The command X := X + 1 transforms 

</li>
<li> a state in which X = 0

</li>
<li> to a state in which X = 1

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="hex1" class="idref" href="#hex1"><span class="id" title="definition">hex1</span></a> : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> 0<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <span class="id" title="definition">X</span> <span class="id" title="notation">:=</span> <span class="id" title="definition">X</span> <span class="id" title="notation">+</span> 1 <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> 1<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab20"></a><h3 class="section">Example 2</h3>


<div class="paragraph"> </div>

   <span class="inlinecode"><span class="id" title="keyword">forall</span></span> <span class="inlinecode"><span class="id" title="var">m</span>,</span> <span class="inlinecode">{{<span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span>}}</span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">+</span> <span class="inlinecode">1</span> <span class="inlinecode">{{<span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">+</span> <span class="inlinecode">1}}</span>

<div class="paragraph"> </div>

<ul class="doclist">
<li> The command X := X + 1 transforms

</li>
<li> a state in which X = m

</li>
<li> to a state in which X = m + 1

<div class="paragraph"> </div>


</li>
<li> Note that m is a Coq variable m and not an IMP variable.

</li>
<li> This is possible because we have done a shallow embedding!

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="hex2" class="idref" href="#hex2"><span class="id" title="definition">hex2</span></a> : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="m:41" class="idref" href="#m:41"><span class="id" title="binder">m</span></a>, <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_09_hl.html#m:41"><span class="id" title="variable">m</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <span class="id" title="definition">X</span> <span class="id" title="notation">:=</span> <span class="id" title="definition">X</span> <span class="id" title="notation">+</span> 1 <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_09_hl.html#m:41"><span class="id" title="variable">m</span></a> <a class="idref" href="lec_09_hl.html#d7f322243320be10cf04dfecd9fa5876"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> If Q holds, then it doesn't matter what P is.

</li>
</ul>
 
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <a id="hoare_post_true" class="idref" href="#hoare_post_true"><span class="id" title="lemma">hoare_post_true</span></a> : <span class="id" title="keyword">forall</span> (<a id="P:42" class="idref" href="#P:42"><span class="id" title="binder">P</span></a> <a id="Q:43" class="idref" href="#Q:43"><span class="id" title="binder">Q</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>) (<a id="c:44" class="idref" href="#c:44"><span class="id" title="binder">c</span></a>: <span class="id" title="inductive">com</span>),<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="st:45" class="idref" href="#st:45"><span class="id" title="binder">st</span></a>, <a class="idref" href="lec_09_hl.html#Q:43"><span class="id" title="variable">Q</span></a> <a class="idref" href="lec_09_hl.html#st:45"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P:42"><span class="id" title="variable">P</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#c:44"><span class="id" title="variable">c</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#Q:43"><span class="id" title="variable">Q</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_09_hl.html#hoare_triple"><span class="id" title="definition">hoare_triple</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> If P never holds, then it doesn't matter what Q is.

</li>
</ul>
 
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <a id="hoare_pre_false" class="idref" href="#hoare_pre_false"><span class="id" title="lemma">hoare_pre_false</span></a> : <span class="id" title="keyword">forall</span> (<a id="P:46" class="idref" href="#P:46"><span class="id" title="binder">P</span></a> <a id="Q:47" class="idref" href="#Q:47"><span class="id" title="binder">Q</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>) (<a id="c:48" class="idref" href="#c:48"><span class="id" title="binder">c</span></a>: <span class="id" title="inductive">com</span>),<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="st:49" class="idref" href="#st:49"><span class="id" title="binder">st</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">(</span></a><a class="idref" href="lec_09_hl.html#P:46"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#st:49"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P:46"><span class="id" title="variable">P</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#c:48"><span class="id" title="variable">c</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#Q:47"><span class="id" title="variable">Q</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_09_hl.html#hoare_triple"><span class="id" title="definition">hoare_triple</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">st</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab21"></a><h2 class="section">Compositional Proof Rules</h2>

<div class="paragraph"> </div>

<a id="lab22"></a><h3 class="section">The Basic Idea 2: Compositional</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{P}}&nbsp;c1&nbsp;{{Q}}&nbsp;&nbsp;{{Q}}&nbsp;c2&nbsp;{{R}}<br/>
&nbsp;&nbsp;&nbsp;--------------------------------&nbsp;HoareSeq<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{P}}&nbsp;c1;&nbsp;c2&nbsp;{{R}}<br/>
<br/>
&nbsp;&nbsp;&nbsp;...&nbsp;more&nbsp;rules&nbsp;mirror&nbsp;language&nbsp;constructs<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
<span class="comment">(***&nbsp;**&nbsp;Assignment&nbsp;Proof&nbsp;Rules&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab23"></a><h3 class="section">Question: is this rule correct?</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;----------------------------&nbsp;HoareAsgnWrong<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;True&nbsp;}}&nbsp;X&nbsp;:=&nbsp;a&nbsp;{{&nbsp;X&nbsp;=&nbsp;a&nbsp;}}<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab24"></a><h3 class="section">Counter-example</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;----------------------------&nbsp;hoare_asgn_wrong<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{True}}&nbsp;X&nbsp;:=&nbsp;-X&nbsp;{{&nbsp;X&nbsp;=&nbsp;-X&nbsp;}}<br/>
&nbsp;&nbsp;&nbsp;<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab25"></a><h3 class="section">Actual rule</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;---------------------------------&nbsp;hoare_asgn<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Q<span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">a</span></span>&nbsp;}}&nbsp;X&nbsp;:=&nbsp;a&nbsp;{{&nbsp;Q&nbsp;}}<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab26"></a><h3 class="section">Wait! That's backwards?</h3>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Upon first glance, this rule looks backwards.

</li>
<li> If Q holds and I assign a to X, shouldn't the postcondition be
     Q with <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">a</span></span>?

</li>
<li> As we saw with HoareAsgnWrong, this can't possibly hold because
     it doesn't hold when Q = True.

</li>
<li> So let's reason backwards with what the rule is saying.

</li>
</ul>
 
<div class="paragraph"> </div>

<a id="lab27"></a><h3 class="section">Wait! That's backwards?</h3>

</div>
<div class="code">
<span class="comment">(*&nbsp;&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;---------------------------------&nbsp;HoareAsgnCorrect<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Q<span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">a</span></span>&nbsp;}}&nbsp;X&nbsp;:=&nbsp;a&nbsp;{{&nbsp;Q&nbsp;}}<br/>
*)</span><br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> Q holds after I run <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">a</span></span>

</li>
<li> And so Q<span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">a</span></span> should hold before I run <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">a</span></span>

</li>
<li> Let's formalize this in Coq.

</li>
</ul>
 
</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="assn_sub" class="idref" href="#assn_sub"><span class="id" title="definition">assn_sub</span></a> <a id="X:50" class="idref" href="#X:50"><span class="id" title="binder">X</span></a> <a id="a:51" class="idref" href="#a:51"><span class="id" title="binder">a</span></a> (<a id="P:52" class="idref" href="#P:52"><span class="id" title="binder">P</span></a>:<a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>) : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="st:53" class="idref" href="#st:53"><span class="id" title="binder">st</span></a> : <span class="id" title="definition">state</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#P:52"><span class="id" title="variable">P</span></a> (<a class="idref" href="lec_09_hl.html#X:50"><span class="id" title="variable">X</span></a> <span class="id" title="notation">!-&gt;</span> <span class="id" title="definition">aeval</span> <a class="idref" href="lec_09_hl.html#st:53"><span class="id" title="variable">st</span></a> <a class="idref" href="lec_09_hl.html#a:51"><span class="id" title="variable">a</span></a> <span class="id" title="notation">;</span> <a class="idref" href="lec_09_hl.html#st:53"><span class="id" title="variable">st</span></a>).<br/>
<span class="id" title="keyword">Notation</span> <a id="8db308f0993b6852839b2cd35110e3bd" class="idref" href="#8db308f0993b6852839b2cd35110e3bd"><span class="id" title="notation">&quot;</span></a>P [ X &gt; a ]" := (<a class="idref" href="lec_09_hl.html#assn_sub"><span class="id" title="definition">assn_sub</span></a> <span class="id" title="var">X</span> <span class="id" title="var">a</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10, <span class="id" title="var">X</span> <span class="id" title="tactic">at</span> <span class="id" title="var">next</span> <span class="id" title="keyword">level</span>, <span class="id" title="var">a</span> <span class="id" title="var">custom</span> <span class="id" title="var">com</span>).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="hoare_asgn" class="idref" href="#hoare_asgn"><span class="id" title="lemma">hoare_asgn</span></a> : <span class="id" title="keyword">forall</span> <a id="Q:54" class="idref" href="#Q:54"><span class="id" title="binder">Q</span></a> <a id="X:55" class="idref" href="#X:55"><span class="id" title="binder">X</span></a> <a id="a:56" class="idref" href="#a:56"><span class="id" title="binder">a</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#Q:54"><span class="id" title="variable">Q</span></a> <a class="idref" href="lec_09_hl.html#8db308f0993b6852839b2cd35110e3bd"><span class="id" title="notation">[</span></a><a class="idref" href="lec_09_hl.html#X:55"><span class="id" title="variable">X</span></a> <a class="idref" href="lec_09_hl.html#8db308f0993b6852839b2cd35110e3bd"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="lec_09_hl.html#a:56"><span class="id" title="variable">a</span></a><a class="idref" href="lec_09_hl.html#8db308f0993b6852839b2cd35110e3bd"><span class="id" title="notation">]</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#X:55"><span class="id" title="variable">X</span></a> <span class="id" title="notation">:=</span> <a class="idref" href="lec_09_hl.html#a:56"><span class="id" title="variable">a</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#Q:54"><span class="id" title="variable">Q</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_09_hl.html#hoare_triple"><span class="id" title="definition">hoare_triple</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Q</span> <span class="id" title="var">X</span> <span class="id" title="var">a</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">HE</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HE</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_09_hl.html#assn_sub"><span class="id" title="definition">assn_sub</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HQ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="assn_sub_example" class="idref" href="#assn_sub_example"><span class="id" title="definition">assn_sub_example</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#8db308f0993b6852839b2cd35110e3bd"><span class="id" title="notation">(</span></a><span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#::assertion_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 5<a class="idref" href="lec_09_hl.html#8db308f0993b6852839b2cd35110e3bd"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_09_hl.html#8db308f0993b6852839b2cd35110e3bd"><span class="id" title="notation">[</span></a><span class="id" title="definition">X</span>  <a class="idref" href="lec_09_hl.html#8db308f0993b6852839b2cd35110e3bd"><span class="id" title="notation">&gt;</span></a> <span class="id" title="definition">X</span> <span class="id" title="notation">+</span> 1<a class="idref" href="lec_09_hl.html#8db308f0993b6852839b2cd35110e3bd"><span class="id" title="notation">]</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">X</span> <span class="id" title="notation">:=</span> <span class="id" title="definition">X</span> <span class="id" title="notation">+</span> 1<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#::assertion_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> 5<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_09_hl.html#hoare_asgn"><span class="id" title="lemma">hoare_asgn</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab28"></a><h3 class="section">If you insist on a forward rule ...</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;st'&nbsp;=&nbsp;(X&nbsp;!-&gt;&nbsp;m&nbsp;;&nbsp;st)<br/>
&nbsp;&nbsp;---------------------------------------------&nbsp;HoareAsgnFwd<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{fun&nbsp;st&nbsp;=&gt;&nbsp;P&nbsp;st&nbsp;/\&nbsp;st&nbsp;X&nbsp;=&nbsp;m}}&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;a<br/>
&nbsp;&nbsp;&nbsp;{{fun&nbsp;st&nbsp;=&gt;&nbsp;P&nbsp;st'&nbsp;/\&nbsp;st&nbsp;X&nbsp;=&nbsp;aeval&nbsp;st'&nbsp;a&nbsp;}}<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="hoare_asgn_fwd" class="idref" href="#hoare_asgn_fwd"><span class="id" title="lemma">hoare_asgn_fwd</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="m:57" class="idref" href="#m:57"><span class="id" title="binder">m</span></a> <a id="a:58" class="idref" href="#a:58"><span class="id" title="binder">a</span></a> <a id="P:59" class="idref" href="#P:59"><span class="id" title="binder">P</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><span class="id" title="keyword">fun</span> <a id="st:60" class="idref" href="#st:60"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#P:59"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#st:60"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="lec_09_hl.html#st:60"><span class="id" title="variable">st</span></a> <span class="id" title="definition">X</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_09_hl.html#m:57"><span class="id" title="variable">m</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">X</span> <span class="id" title="notation">:=</span> <a class="idref" href="lec_09_hl.html#a:58"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><span class="id" title="keyword">fun</span> <a id="st:61" class="idref" href="#st:61"><span class="id" title="binder">st</span></a> =&gt; <a class="idref" href="lec_09_hl.html#P:59"><span class="id" title="variable">P</span></a> (<span class="id" title="definition">X</span> <span class="id" title="notation">!-&gt;</span> <a class="idref" href="lec_09_hl.html#m:57"><span class="id" title="variable">m</span></a> <span class="id" title="notation">;</span> <a class="idref" href="lec_09_hl.html#st:61"><span class="id" title="variable">st</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="lec_09_hl.html#st:61"><span class="id" title="variable">st</span></a> <span class="id" title="definition">X</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">aeval</span> (<span class="id" title="definition">X</span> <span class="id" title="notation">!-&gt;</span> <a class="idref" href="lec_09_hl.html#m:57"><span class="id" title="variable">m</span></a> <span class="id" title="notation">;</span> <a class="idref" href="lec_09_hl.html#st:61"><span class="id" title="variable">st</span></a>) <a class="idref" href="lec_09_hl.html#a:58"><span class="id" title="variable">a</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_09_hl.html#hoare_triple"><span class="id" title="definition">hoare_triple</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">t_update_shadow</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">forall</span> (<a id="A:65" class="idref" href="#A:65"><span class="id" title="binder">A</span></a>: <span class="id" title="keyword">Type</span>) (<a id="st:66" class="idref" href="#st:66"><span class="id" title="binder">st</span></a>: <span class="id" title="definition">total_map</span> <a class="idref" href="lec_09_hl.html#A:62"><span class="id" title="variable">A</span></a>) <a id="X:67" class="idref" href="#X:67"><span class="id" title="binder">X</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="lec_09_hl.html#X:64"><span class="id" title="variable">X</span></a> <span class="id" title="notation">!-&gt;</span> <a class="idref" href="lec_09_hl.html#st:63"><span class="id" title="variable">st</span></a> <a class="idref" href="lec_09_hl.html#X:64"><span class="id" title="variable">X</span></a><span class="id" title="notation">;</span> <a class="idref" href="lec_09_hl.html#st:63"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_09_hl.html#st:63"><span class="id" title="variable">st</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Logic.FunctionalExtensionality.html#"><span class="id" title="library">Logic.FunctionalExtensionality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">t_update</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">eqb_string</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Strings.String.html#string_dec"><span class="id" title="definition">string_dec</span></a> <span class="id" title="var">X</span> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Eqb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Eqb</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}    <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">t_update_shadow</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">t_update_same</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">t_update_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab29"></a><h3 class="section">Consequence</h3>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Sometimes, our pre-condition and post-conditions are not in the shape
    we want them to be.

</li>
<li> There is a sound way to accomplish this with strengthening pre-conditions
    and weakening post-conditions.

</li>
<li> First we need some notation for implication.

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="assert_implies" class="idref" href="#assert_implies"><span class="id" title="definition">assert_implies</span></a> (<a id="P:68" class="idref" href="#P:68"><span class="id" title="binder">P</span></a> <a id="Q:69" class="idref" href="#Q:69"><span class="id" title="binder">Q</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>): <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="st:70" class="idref" href="#st:70"><span class="id" title="binder">st</span></a>, <a class="idref" href="lec_09_hl.html#P:68"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#st:70"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_09_hl.html#Q:69"><span class="id" title="variable">Q</span></a> <a class="idref" href="lec_09_hl.html#st:70"><span class="id" title="variable">st</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="::hoare_spec_scope:x_'-&gt;&gt;'_x" class="idref" href="#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">&quot;</span></a>P -&gt;&gt; Q" := (<a class="idref" href="lec_09_hl.html#assert_implies"><span class="id" title="definition">assert_implies</span></a> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 80) : <span class="id" title="var">hoare_spec_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">hoare_spec_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab30"></a><h3 class="section">Strengthening pre-conditions</h3>


<div class="paragraph"> </div>

      <a href="P'">P'</a> c <a href="Q">Q</a>  P -&gt;&gt; P'
<hr/>

          <a href="P">P</a> c <a href="Q">Q</a>	

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a id="hoare_consequence_pre" class="idref" href="#hoare_consequence_pre"><span class="id" title="lemma">hoare_consequence_pre</span></a> : <span class="id" title="keyword">forall</span> (<a id="P:71" class="idref" href="#P:71"><span class="id" title="binder">P</span></a> <a id="P':72" class="idref" href="#P':72"><span class="id" title="binder">P'</span></a> <a id="Q:73" class="idref" href="#Q:73"><span class="id" title="binder">Q</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>) (<a id="c:74" class="idref" href="#c:74"><span class="id" title="binder">c</span></a>: <span class="id" title="inductive">com</span>),<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P':72"><span class="id" title="variable">P'</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#c:74"><span class="id" title="variable">c</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#Q:73"><span class="id" title="variable">Q</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#P:71"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="lec_09_hl.html#P':72"><span class="id" title="variable">P'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P:71"><span class="id" title="variable">P</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#c:74"><span class="id" title="variable">c</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#Q:73"><span class="id" title="variable">Q</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_09_hl.html#hoare_triple"><span class="id" title="definition">hoare_triple</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">P'</span> <span class="id" title="var">Q</span> <span class="id" title="var">c</span> <span class="id" title="var">Hhoare</span> <span class="id" title="var">Himp</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">Heval</span> <span class="id" title="var">Hpre</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hhoare</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">st</span> := <span class="id" title="var">st</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Himp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab31"></a><h3 class="section">Weakening post-conditions</h3>


<div class="paragraph"> </div>

     <a href="P">P</a> c <a href="Q'">Q'</a>    Q' -&gt;&gt; Q
<hr/>

         <a href="P">P</a> c <a href="Q">Q</a>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a id="hoare_consequence_post" class="idref" href="#hoare_consequence_post"><span class="id" title="lemma">hoare_consequence_post</span></a> : <span class="id" title="keyword">forall</span> (<a id="P:75" class="idref" href="#P:75"><span class="id" title="binder">P</span></a> <a id="Q:76" class="idref" href="#Q:76"><span class="id" title="binder">Q</span></a> <a id="Q':77" class="idref" href="#Q':77"><span class="id" title="binder">Q'</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>) (<a id="c:78" class="idref" href="#c:78"><span class="id" title="binder">c</span></a>: <span class="id" title="inductive">com</span>),<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P:75"><span class="id" title="variable">P</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#c:78"><span class="id" title="variable">c</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#Q':77"><span class="id" title="variable">Q'</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#Q':77"><span class="id" title="variable">Q'</span></a> <a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="lec_09_hl.html#Q:76"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P:75"><span class="id" title="variable">P</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#c:78"><span class="id" title="variable">c</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#Q:76"><span class="id" title="variable">Q</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_09_hl.html#hoare_triple"><span class="id" title="definition">hoare_triple</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">Q'</span> <span class="id" title="var">c</span> <span class="id" title="var">Hhoare</span> <span class="id" title="var">Himp</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">Heval</span> <span class="id" title="var">Hpre</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Himp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hhoare</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">st</span> := <span class="id" title="var">st</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="hoare_consequence" class="idref" href="#hoare_consequence"><span class="id" title="lemma">hoare_consequence</span></a> : <span class="id" title="keyword">forall</span> (<a id="P:79" class="idref" href="#P:79"><span class="id" title="binder">P</span></a> <a id="P':80" class="idref" href="#P':80"><span class="id" title="binder">P'</span></a> <a id="Q:81" class="idref" href="#Q:81"><span class="id" title="binder">Q</span></a> <a id="Q':82" class="idref" href="#Q':82"><span class="id" title="binder">Q'</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>) <a id="c:83" class="idref" href="#c:83"><span class="id" title="binder">c</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P':80"><span class="id" title="variable">P'</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#c:83"><span class="id" title="variable">c</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#Q':82"><span class="id" title="variable">Q'</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#P:79"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="lec_09_hl.html#P':80"><span class="id" title="variable">P'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#Q':82"><span class="id" title="variable">Q'</span></a> <a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="lec_09_hl.html#Q:81"><span class="id" title="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P:79"><span class="id" title="variable">P</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#c:83"><span class="id" title="variable">c</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#Q:81"><span class="id" title="variable">Q</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">P'</span> <span class="id" title="var">Q</span> <span class="id" title="var">Q'</span> <span class="id" title="var">c</span> <span class="id" title="var">Htriple</span> <span class="id" title="var">Hpre</span> <span class="id" title="var">Hpost</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_09_hl.html#hoare_consequence_pre"><span class="id" title="lemma">hoare_consequence_pre</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">P'</span> := <span class="id" title="var">P'</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="lec_09_hl.html#hoare_consequence_post"><span class="id" title="lemma">hoare_consequence_post</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">Q'</span> := <span class="id" title="var">Q'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab32"></a><h3 class="section">Skip</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--------------------&nbsp;hoare_skip<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;P&nbsp;}}&nbsp;skip&nbsp;{{&nbsp;P&nbsp;}}<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="hoare_skip" class="idref" href="#hoare_skip"><span class="id" title="lemma">hoare_skip</span></a> : <span class="id" title="keyword">forall</span> <a id="P:84" class="idref" href="#P:84"><span class="id" title="binder">P</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P:84"><span class="id" title="variable">P</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">skip</span> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P:84"><span class="id" title="variable">P</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">H</span> <span class="id" title="var">HP</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab33"></a><h3 class="section">Sequencing</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;P&nbsp;}}&nbsp;c1&nbsp;{{&nbsp;Q&nbsp;}}&nbsp;&nbsp;&nbsp;{{&nbsp;Q&nbsp;}}&nbsp;c2&nbsp;{{&nbsp;R&nbsp;}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;--------------------------------------------&nbsp;hoare_seq<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;P&nbsp;}}&nbsp;c1;&nbsp;c2&nbsp;{{&nbsp;R&nbsp;}}<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="hoare_seq" class="idref" href="#hoare_seq"><span class="id" title="lemma">hoare_seq</span></a> : <span class="id" title="keyword">forall</span> <a id="P:85" class="idref" href="#P:85"><span class="id" title="binder">P</span></a> <a id="Q:86" class="idref" href="#Q:86"><span class="id" title="binder">Q</span></a> <a id="R:87" class="idref" href="#R:87"><span class="id" title="binder">R</span></a> <a id="c1:88" class="idref" href="#c1:88"><span class="id" title="binder">c1</span></a> <a id="c2:89" class="idref" href="#c2:89"><span class="id" title="binder">c2</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#Q:86"><span class="id" title="variable">Q</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#c2:89"><span class="id" title="variable">c2</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#R:87"><span class="id" title="variable">R</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P:85"><span class="id" title="variable">P</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#c1:88"><span class="id" title="variable">c1</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#Q:86"><span class="id" title="variable">Q</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P:85"><span class="id" title="variable">P</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#c1:88"><span class="id" title="variable">c1</span></a><span class="id" title="notation">;</span> <a class="idref" href="lec_09_hl.html#c2:89"><span class="id" title="variable">c2</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#R:87"><span class="id" title="variable">R</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_09_hl.html#hoare_triple"><span class="id" title="definition">hoare_triple</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> <span class="id" title="var">c1</span> <span class="id" title="var">c2</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">H12</span> <span class="id" title="var">Pre</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H12</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="hoare_asgn_ex2" class="idref" href="#hoare_asgn_ex2"><span class="id" title="definition">hoare_asgn_ex2</span></a> : <span class="id" title="keyword">forall</span> (<a id="a:90" class="idref" href="#a:90"><span class="id" title="binder">a</span></a>:<span class="id" title="inductive">aexp</span>) (<a id="n:91" class="idref" href="#n:91"><span class="id" title="binder">n</span></a>:<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#a:90"><span class="id" title="variable">a</span></a> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_09_hl.html#n:91"><span class="id" title="variable">n</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">X</span> <span class="id" title="notation">:=</span> <a class="idref" href="lec_09_hl.html#a:90"><span class="id" title="variable">a</span></a><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">skip</span><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_09_hl.html#n:91"><span class="id" title="variable">n</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_09_hl.html#hoare_seq"><span class="id" title="lemma">hoare_seq</span></a>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;right&nbsp;part&nbsp;of&nbsp;seq&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_09_hl.html#hoare_skip"><span class="id" title="lemma">hoare_skip</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;left&nbsp;part&nbsp;of&nbsp;seq&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_09_hl.html#hoare_consequence_pre"><span class="id" title="lemma">hoare_consequence_pre</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="lec_09_hl.html#hoare_asgn"><span class="id" title="lemma">hoare_asgn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="lec_09_hl.html#assn_sub"><span class="id" title="definition">assn_sub</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> "-&gt;&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">t_update</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab34"></a><h3 class="section">If</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;P&nbsp;/\&nbsp;b&nbsp;}}&nbsp;c1&nbsp;{{&nbsp;Q&nbsp;}}&nbsp;&nbsp;&nbsp;{{&nbsp;P&nbsp;/\&nbsp;~b&nbsp;}}&nbsp;c2&nbsp;{{&nbsp;Q&nbsp;}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-------------------------------------------------------&nbsp;hoare_if<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;P&nbsp;}}&nbsp;if&nbsp;b&nbsp;{&nbsp;c1&nbsp;}&nbsp;{&nbsp;c2&nbsp;}&nbsp;{{&nbsp;Q&nbsp;}}<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="bassn" class="idref" href="#bassn"><span class="id" title="definition">bassn</span></a> <a id="b:92" class="idref" href="#b:92"><span class="id" title="binder">b</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="st:93" class="idref" href="#st:93"><span class="id" title="binder">st</span></a> =&gt; (<span class="id" title="definition">beval</span> <a class="idref" href="lec_09_hl.html#st:93"><span class="id" title="variable">st</span></a> <a class="idref" href="lec_09_hl.html#b:92"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">true</span>).<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="lec_09_hl.html#bassn"><span class="id" title="definition">bassn</span></a> <a class="idref" href="lec_09_hl.html#bassn"><span class="id" title="definition">:</span></a> <a class="idref" href="lec_09_hl.html#bassn"><span class="id" title="definition">bexp</span></a> <a class="idref" href="lec_09_hl.html#bassn"><span class="id" title="definition">&gt;-&gt;</span></a> <a class="idref" href="lec_09_hl.html#bassn"><span class="id" title="definition">Assertion</span></a>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="lec_09_hl.html#bassn"><span class="id" title="definition">bassn</span></a> /.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="bexp_eval_false" class="idref" href="#bexp_eval_false"><span class="id" title="lemma">bexp_eval_false</span></a> : <span class="id" title="keyword">forall</span> <a id="b:94" class="idref" href="#b:94"><span class="id" title="binder">b</span></a> <a id="st:95" class="idref" href="#st:95"><span class="id" title="binder">st</span></a>,<br/>
&nbsp;&nbsp;<span class="id" title="definition">beval</span> <a class="idref" href="lec_09_hl.html#st:95"><span class="id" title="variable">st</span></a> <a class="idref" href="lec_09_hl.html#b:94"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">false</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">(</span></a>(<a class="idref" href="lec_09_hl.html#bassn"><span class="id" title="definition">bassn</span></a> <a class="idref" href="lec_09_hl.html#b:94"><span class="id" title="variable">b</span></a>) <a class="idref" href="lec_09_hl.html#st:95"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">bexp_eval_false</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="hoare_if" class="idref" href="#hoare_if"><span class="id" title="lemma">hoare_if</span></a> : <span class="id" title="keyword">forall</span> <a id="P:96" class="idref" href="#P:96"><span class="id" title="binder">P</span></a> <a id="Q:97" class="idref" href="#Q:97"><span class="id" title="binder">Q</span></a> (<a id="b:98" class="idref" href="#b:98"><span class="id" title="binder">b</span></a>:<span class="id" title="inductive">bexp</span>) <a id="c1:99" class="idref" href="#c1:99"><span class="id" title="binder">c1</span></a> <a id="c2:100" class="idref" href="#c2:100"><span class="id" title="binder">c2</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a> <a class="idref" href="lec_09_hl.html#P:96"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#cce4ad113420d0c25c6ce4891bbe5028"><span class="id" title="notation">/\</span></a> <a class="idref" href="lec_09_hl.html#b:98"><span class="id" title="variable">b</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#c1:99"><span class="id" title="variable">c1</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#Q:97"><span class="id" title="variable">Q</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a> <a class="idref" href="lec_09_hl.html#P:96"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#cce4ad113420d0c25c6ce4891bbe5028"><span class="id" title="notation">/\</span></a> <a class="idref" href="lec_09_hl.html#90b84b70bae2a0cf52991d884e146143"><span class="id" title="notation">~</span></a> <a class="idref" href="lec_09_hl.html#b:98"><span class="id" title="variable">b</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#c2:100"><span class="id" title="variable">c2</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#Q:97"><span class="id" title="variable">Q</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P:96"><span class="id" title="variable">P</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">if</span> <a class="idref" href="lec_09_hl.html#b:98"><span class="id" title="variable">b</span></a> <span class="id" title="notation">then</span> <a class="idref" href="lec_09_hl.html#c1:99"><span class="id" title="variable">c1</span></a> <span class="id" title="notation">else</span> <a class="idref" href="lec_09_hl.html#c2:100"><span class="id" title="variable">c2</span></a> <span class="id" title="notation">end</span> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#Q:97"><span class="id" title="variable">Q</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">b</span> <span class="id" title="var">c1</span> <span class="id" title="var">c2</span> <span class="id" title="var">HTrue</span> <span class="id" title="var">HFalse</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">HE</span> <span class="id" title="var">HP</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HE</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab35"></a><h3 class="section">While</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{P&nbsp;/\&nbsp;b}}&nbsp;c&nbsp;{{P}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------&nbsp;hoare_while<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{P}&nbsp;while&nbsp;b&nbsp;do&nbsp;c&nbsp;end&nbsp;{{P&nbsp;/\&nbsp;~b}}<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="hoare_while" class="idref" href="#hoare_while"><span class="id" title="lemma">hoare_while</span></a> : <span class="id" title="keyword">forall</span> <a id="P:101" class="idref" href="#P:101"><span class="id" title="binder">P</span></a> (<a id="b:102" class="idref" href="#b:102"><span class="id" title="binder">b</span></a>:<span class="id" title="inductive">bexp</span>) <a id="c:103" class="idref" href="#c:103"><span class="id" title="binder">c</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P:101"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#cce4ad113420d0c25c6ce4891bbe5028"><span class="id" title="notation">/\</span></a> <a class="idref" href="lec_09_hl.html#b:102"><span class="id" title="variable">b</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#c:103"><span class="id" title="variable">c</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P:101"><span class="id" title="variable">P</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P:101"><span class="id" title="variable">P</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">while</span> <a class="idref" href="lec_09_hl.html#b:102"><span class="id" title="variable">b</span></a> <span class="id" title="notation">do</span> <a class="idref" href="lec_09_hl.html#c:103"><span class="id" title="variable">c</span></a> <span class="id" title="notation">end</span> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P:101"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#cce4ad113420d0c25c6ce4891bbe5028"><span class="id" title="notation">/\</span></a> <a class="idref" href="lec_09_hl.html#90b84b70bae2a0cf52991d884e146143"><span class="id" title="notation">~</span></a> <a class="idref" href="lec_09_hl.html#b:102"><span class="id" title="variable">b</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">Hhoare</span> <span class="id" title="var">st</span> <span class="id" title="var">st'</span> <span class="id" title="var">Heval</span> <span class="id" title="var">HP</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;while&nbsp;b&nbsp;do&nbsp;c&nbsp;appears&nbsp;in&nbsp;the&nbsp;evaluation&nbsp;above&nbsp;the&nbsp;line&nbsp;and&nbsp;so&nbsp;needs&nbsp;to&nbsp;be&nbsp;remembered&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> <span class="id" title="notation">&lt;{</span><span class="id" title="notation">while</span> <span class="id" title="var">b</span> <span class="id" title="notation">do</span> <span class="id" title="var">c</span> <span class="id" title="notation">end</span><span class="id" title="notation">}&gt;</span> <span class="id" title="keyword">as</span> <span class="id" title="var">original_command</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Horig</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Heval</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Horig</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;while&nbsp;false&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;while&nbsp;true&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab36"></a><h2 class="section">Axiomatic Semantics!</h2>

<div class="paragraph"> </div>

<a id="lab37"></a><h3 class="section">What if we gathered all the rules together?</h3>


<div class="paragraph"> </div>

<ul class="doclist">
<li> We would get another method to give semantics to programs,
    i.e., *axiomatic semantics*.

</li>
<li> This follows from the compositional design of Hoare Logic!

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----------------------&nbsp;hoare_skip<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;P&nbsp;}}&nbsp;skip&nbsp;{{&nbsp;P&nbsp;}}<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;---------------------------------&nbsp;hoare_asgn<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Q<span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">a</span></span>&nbsp;}}&nbsp;X&nbsp;:=&nbsp;a&nbsp;{{&nbsp;Q&nbsp;}}<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;P&nbsp;}}&nbsp;c1&nbsp;{{&nbsp;Q&nbsp;}}&nbsp;&nbsp;&nbsp;{{&nbsp;Q&nbsp;}}&nbsp;c2&nbsp;{{&nbsp;R&nbsp;}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;--------------------------------------------&nbsp;hoare_seq<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;P&nbsp;}}&nbsp;c1;c2&nbsp;{{&nbsp;R&nbsp;}}<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;P&nbsp;/\&nbsp;b&nbsp;}}&nbsp;c1&nbsp;{{&nbsp;Q&nbsp;}}&nbsp;&nbsp;&nbsp;{{&nbsp;P&nbsp;/\&nbsp;~b&nbsp;}}&nbsp;c2&nbsp;{{&nbsp;Q&nbsp;}}<br/>
&nbsp;&nbsp;&nbsp;-------------------------------------------------------&nbsp;hoare_if<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;P&nbsp;}}&nbsp;if&nbsp;b&nbsp;{&nbsp;c1&nbsp;}&nbsp;{&nbsp;c2&nbsp;}&nbsp;{{&nbsp;Q&nbsp;}}<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{P&nbsp;&nbsp;b}}&nbsp;c&nbsp;{{P}}<br/>
&nbsp;&nbsp;&nbsp;----------------------------------&nbsp;hoare_while<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{P}&nbsp;while&nbsp;b&nbsp;do&nbsp;c&nbsp;end&nbsp;{{P&nbsp;&nbsp;~b}}<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{P'}}&nbsp;c&nbsp;{{Q}}&nbsp;&nbsp;P&nbsp;-&gt;&gt;&nbsp;P'<br/>
&nbsp;&nbsp;&nbsp;-----------------------------&nbsp;pre_strengthen<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{P}}&nbsp;c&nbsp;{{Q}}<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{P}}&nbsp;c&nbsp;{{Q'}}&nbsp;&nbsp;&nbsp;&nbsp;Q'&nbsp;-&gt;&gt;&nbsp;Q<br/>
&nbsp;&nbsp;&nbsp;------------------------------&nbsp;post_weaken<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{P}}&nbsp;c&nbsp;{{Q}}<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab38"></a><h3 class="section">Example Verifications</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="swap" class="idref" href="#swap"><span class="id" title="definition">swap</span></a>: <span class="id" title="inductive">com</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;{</span> <span class="id" title="definition">Z</span> <span class="id" title="notation">:=</span> <span class="id" title="definition">X</span><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">X</span> <span class="id" title="notation">:=</span> <span class="id" title="definition">Y</span><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Y</span> <span class="id" title="notation">:=</span> <span class="id" title="definition">Z</span> <span class="id" title="notation">}&gt;</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab39"></a><h4 class="section">Goal: Swap is correct</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;{{X&nbsp;&lt;=&nbsp;Y}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Z&nbsp;:=&nbsp;X;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;Z&nbsp;<br/>
&nbsp;&nbsp;&nbsp;{{Y&nbsp;&lt;=&nbsp;X}}<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab40"></a><h4 class="section">Step 1</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Z&nbsp;:=&nbsp;X;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;Z&nbsp;<br/>
&nbsp;&nbsp;&nbsp;{{Y&nbsp;&lt;=&nbsp;X}}<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab41"></a><h4 class="section">Step 2</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Z&nbsp;:=&nbsp;X;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;{{Y&nbsp;&lt;=&nbsp;X&nbsp;/\&nbsp;Y&nbsp;=&nbsp;Z}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;Z&nbsp;<br/>
&nbsp;&nbsp;&nbsp;{{Y&nbsp;&lt;=&nbsp;X}}<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab42"></a><h4 class="section">Step 3</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Z&nbsp;:=&nbsp;X;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;{{Y&nbsp;&lt;=&nbsp;X&nbsp;/\&nbsp;Y&nbsp;=&nbsp;Z&nbsp;/\&nbsp;X&nbsp;=&nbsp;Y}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;{{Y&nbsp;&lt;=&nbsp;X&nbsp;/\&nbsp;Y&nbsp;=&nbsp;Z}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;Z&nbsp;<br/>
&nbsp;&nbsp;&nbsp;{{Y&nbsp;&lt;=&nbsp;X}}<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab43"></a><h4 class="section">Step 4</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;{{Y&nbsp;&lt;=&nbsp;X&nbsp;/\&nbsp;Y&nbsp;=&nbsp;Z&nbsp;/\&nbsp;X&nbsp;=&nbsp;Y&nbsp;/\&nbsp;Z&nbsp;=&nbsp;X}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Z&nbsp;:=&nbsp;X;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;{{Y&nbsp;&lt;=&nbsp;X&nbsp;/\&nbsp;Y&nbsp;=&nbsp;Z&nbsp;/\&nbsp;X&nbsp;=&nbsp;Y}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;{{Y&nbsp;&lt;=&nbsp;X&nbsp;/\&nbsp;Y&nbsp;=&nbsp;Z}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;Z&nbsp;<br/>
&nbsp;&nbsp;&nbsp;{{Y&nbsp;&lt;=&nbsp;X}}<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab44"></a><h4 class="section">Step 5</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;{{X&nbsp;&lt;=&nbsp;Y}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Z&nbsp;:=&nbsp;X;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;{{Y&nbsp;&lt;=&nbsp;X&nbsp;/\&nbsp;Y&nbsp;=&nbsp;Z&nbsp;/\&nbsp;X&nbsp;=&nbsp;Y}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;{{Y&nbsp;&lt;=&nbsp;X&nbsp;/\&nbsp;Y&nbsp;=&nbsp;Z}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;Z&nbsp;<br/>
&nbsp;&nbsp;&nbsp;{{Y&nbsp;&lt;=&nbsp;X}}<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="swap_is_correct" class="idref" href="#swap_is_correct"><span class="id" title="lemma">swap_is_correct</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#154e85acf24eb57aa8f8a0156c0ba632"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="definition">Y</span><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#swap"><span class="id" title="definition">swap</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><span class="id" title="definition">Y</span> <a class="idref" href="lec_09_hl.html#154e85acf24eb57aa8f8a0156c0ba632"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="definition">X</span><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_09_hl.html#swap"><span class="id" title="definition">swap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_09_hl.html#hoare_seq"><span class="id" title="lemma">hoare_seq</span></a>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_09_hl.html#hoare_seq"><span class="id" title="lemma">hoare_seq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_09_hl.html#hoare_asgn"><span class="id" title="lemma">hoare_asgn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_09_hl.html#hoare_asgn"><span class="id" title="lemma">hoare_asgn</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_09_hl.html#assn_sub"><span class="id" title="definition">assn_sub</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_09_hl.html#hoare_triple"><span class="id" title="definition">hoare_triple</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;}    <br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab45"></a><h3 class="section">Swapping is correct 2</h3>

<div class="paragraph"> </div>

<a id="lab46"></a><h4 class="section">Program</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;+&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;X&nbsp;-&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;Y<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab47"></a><h4 class="section">Step 1</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;+&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;X&nbsp;-&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;Y<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;=&nbsp;n&nbsp;/\&nbsp;Y&nbsp;=&nbsp;m&nbsp;}}<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab48"></a><h4 class="section">Step 2</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;+&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;X&nbsp;-&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;-&nbsp;Y&nbsp;=&nbsp;n&nbsp;/\&nbsp;Y&nbsp;=&nbsp;m&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(assn_sub)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;Y<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;=&nbsp;n&nbsp;/\&nbsp;Y&nbsp;=&nbsp;m&nbsp;}}<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab49"></a><h4 class="section">Step 3</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;+&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;-&nbsp;(X&nbsp;-&nbsp;Y)&nbsp;=&nbsp;n&nbsp;/\&nbsp;X&nbsp;-&nbsp;Y&nbsp;=&nbsp;m&nbsp;}}&nbsp;&nbsp;&nbsp;(assn_sub)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;X&nbsp;-&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;-&nbsp;Y&nbsp;=&nbsp;n&nbsp;/\&nbsp;Y&nbsp;=&nbsp;m&nbsp;}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;Y<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;=&nbsp;n&nbsp;/\&nbsp;Y&nbsp;=&nbsp;m&nbsp;}}<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab50"></a><h4 class="section">Step 4</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;(X&nbsp;+&nbsp;Y)&nbsp;-&nbsp;((X&nbsp;+&nbsp;Y)&nbsp;-&nbsp;Y)&nbsp;=&nbsp;n&nbsp;/\&nbsp;(X&nbsp;+&nbsp;Y)&nbsp;-&nbsp;Y&nbsp;=&nbsp;m&nbsp;}}&nbsp;&nbsp;(assn_sub)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;+&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;-&nbsp;(X&nbsp;-&nbsp;Y)&nbsp;=&nbsp;n&nbsp;/\&nbsp;X&nbsp;-&nbsp;Y&nbsp;=&nbsp;m&nbsp;}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;X&nbsp;-&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;-&nbsp;Y&nbsp;=&nbsp;n&nbsp;/\&nbsp;Y&nbsp;=&nbsp;m&nbsp;}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;Y<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;=&nbsp;n&nbsp;/\&nbsp;Y&nbsp;=&nbsp;m&nbsp;}}<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab51"></a><h4 class="section">Step 5</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;=&nbsp;m&nbsp;/\&nbsp;Y&nbsp;=&nbsp;n&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(weaken)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;(X&nbsp;+&nbsp;Y)&nbsp;-&nbsp;((X&nbsp;+&nbsp;Y)&nbsp;-&nbsp;Y)&nbsp;=&nbsp;n&nbsp;/\&nbsp;(X&nbsp;+&nbsp;Y)&nbsp;-&nbsp;Y&nbsp;=&nbsp;m&nbsp;}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;+&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;-&nbsp;(X&nbsp;-&nbsp;Y)&nbsp;=&nbsp;n&nbsp;/\&nbsp;X&nbsp;-&nbsp;Y&nbsp;=&nbsp;m&nbsp;}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;X&nbsp;-&nbsp;Y;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;-&nbsp;Y&nbsp;=&nbsp;n&nbsp;/\&nbsp;Y&nbsp;=&nbsp;m&nbsp;}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;Y<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;=&nbsp;n&nbsp;/\&nbsp;Y&nbsp;=&nbsp;m&nbsp;}}<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="swap'" class="idref" href="#swap'"><span class="id" title="definition">swap'</span></a>: <span class="id" title="inductive">com</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;{</span> <span class="id" title="definition">X</span> <span class="id" title="notation">:=</span> <span class="id" title="definition">X</span> <span class="id" title="notation">+</span> <span class="id" title="definition">Y</span><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Y</span> <span class="id" title="notation">:=</span> <span class="id" title="definition">X</span> <span class="id" title="notation">-</span> <span class="id" title="definition">Y</span><span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">X</span> <span class="id" title="notation">:=</span> <span class="id" title="definition">X</span> <span class="id" title="notation">-</span> <span class="id" title="definition">Y</span> <span class="id" title="notation">}&gt;</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="swap_is_correct'" class="idref" href="#swap_is_correct'"><span class="id" title="lemma">swap_is_correct'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#154e85acf24eb57aa8f8a0156c0ba632"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="definition">Y</span><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#swap"><span class="id" title="definition">swap</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><span class="id" title="definition">Y</span> <a class="idref" href="lec_09_hl.html#154e85acf24eb57aa8f8a0156c0ba632"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="definition">X</span><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
</div>

<div class="doc">
Exercise 
</div>
<div class="code">
<span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab52"></a><h3 class="section">Reduce to zero is correct</h3>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<ul class="doclist">
<li> We now try to verify programs with a while loop, which requires us to
     identify a **loop invariant**.

</li>
<li> This is pretty tricky to do in general.

</li>
<li> This mirrors the trickiness of figuring out what to perform induction on.

</li>
<li> Luckily for us, this first example is quite easy to do.

</li>
</ul>
 
<div class="paragraph"> </div>

<a id="lab53"></a><h4 class="section">Program</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;~(X&nbsp;=&nbsp;0)&nbsp;do<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab54"></a><h4 class="section">Step 1</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;~(X&nbsp;=&nbsp;0)&nbsp;do<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;=&nbsp;0&nbsp;}}<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab55"></a><h4 class="section">Step 2</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;~(X&nbsp;=&nbsp;0)&nbsp;do<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;True&nbsp;&nbsp;~(X&nbsp;&lt;&gt;&nbsp;0)&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;(weaken)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;=&nbsp;0&nbsp;}}<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab56"></a><h4 class="section">Step 3</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;~(X&nbsp;=&nbsp;0)&nbsp;do<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;True&nbsp;}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;True&nbsp;&nbsp;~(X&nbsp;&lt;&gt;&nbsp;0)&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;(weaken)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;=&nbsp;0&nbsp;}}<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab57"></a><h4 class="section">Step 4</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;~(X&nbsp;=&nbsp;0)&nbsp;do<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;True&nbsp;/\&nbsp;X&nbsp;&lt;&gt;&nbsp;0&nbsp;}}&nbsp;-&gt;&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;True&nbsp;}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;True&nbsp;}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;True&nbsp;&nbsp;~(X&nbsp;&lt;&gt;&nbsp;0)&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;(weaken)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;=&nbsp;0&nbsp;}}<br/>
<br/>
*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="reduce_to_zero'" class="idref" href="#reduce_to_zero'"><span class="id" title="definition">reduce_to_zero'</span></a> : <span class="id" title="inductive">com</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;{</span> <span class="id" title="notation">while</span> <span class="id" title="notation">~</span><span class="id" title="notation">(</span><span class="id" title="definition">X</span> <span class="id" title="notation">=</span> 0<span class="id" title="notation">)</span> <span class="id" title="notation">do</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">X</span> <span class="id" title="notation">:=</span> <span class="id" title="definition">X</span> <span class="id" title="notation">-</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">end</span> <span class="id" title="notation">}&gt;</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="reduce_to_zero_correct'" class="idref" href="#reduce_to_zero_correct'"><span class="id" title="lemma">reduce_to_zero_correct'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#reduce_to_zero'"><span class="id" title="definition">reduce_to_zero'</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> 0<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_09_hl.html#reduce_to_zero'"><span class="id" title="definition">reduce_to_zero'</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;First&nbsp;we&nbsp;need&nbsp;to&nbsp;transform&nbsp;the&nbsp;postcondition&nbsp;so<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;hoare_while&nbsp;will&nbsp;apply.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_09_hl.html#hoare_consequence_post"><span class="id" title="lemma">hoare_consequence_post</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="lec_09_hl.html#hoare_while"><span class="id" title="lemma">hoare_while</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Loop&nbsp;body&nbsp;preserves&nbsp;invariant&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Need&nbsp;to&nbsp;massage&nbsp;precondition&nbsp;before&nbsp;hoare_asgn&nbsp;applies&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_09_hl.html#hoare_consequence_pre"><span class="id" title="lemma">hoare_consequence_pre</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="lec_09_hl.html#hoare_asgn"><span class="id" title="lemma">hoare_asgn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;Proving&nbsp;trivial&nbsp;implication&nbsp;(2)&nbsp;-&gt;&gt;&nbsp;(3)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_09_hl.html#assn_sub"><span class="id" title="definition">assn_sub</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> "-&gt;&gt;".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Invariant&nbsp;and&nbsp;negated&nbsp;guard&nbsp;imply&nbsp;postcondition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">st</span> [<span class="id" title="var">Inv</span> <span class="id" title="var">GuardFalse</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_09_hl.html#bassn"><span class="id" title="definition">bassn</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">GuardFalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">GuardFalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Bool.Bool.html#not_true_iff_false"><span class="id" title="lemma">not_true_iff_false</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">GuardFalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Bool.Bool.html#negb_false_iff"><span class="id" title="lemma">negb_false_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">GuardFalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Check</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Arith.PeanoNat.html#Nat.eqb_eq"><span class="id" title="lemma">eqb_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Arith.PeanoNat.html#Nat.eqb_eq"><span class="id" title="lemma">eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">GuardFalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">GuardFalse</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab58"></a><h3 class="section">More complex loop invariants</h3>

<div class="paragraph"> </div>

<a id="lab59"></a><h4 class="section">Program</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;=&nbsp;m&nbsp;/\&nbsp;Y&nbsp;=&nbsp;n&nbsp;}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;~(X&nbsp;=&nbsp;0)&nbsp;do<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;Y&nbsp;-&nbsp;1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;}}<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab60"></a><h4 class="section">Step 1</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;~(X&nbsp;=&nbsp;0)&nbsp;do<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;Y&nbsp;-&nbsp;1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;/\&nbsp;~&nbsp;(X&nbsp;~=&nbsp;0)&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(weaken)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;}}<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab61"></a><h4 class="section">Step 2</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;~(X&nbsp;=&nbsp;0)&nbsp;do<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;Y&nbsp;-&nbsp;1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(while)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;/\&nbsp;~&nbsp;(X&nbsp;~=&nbsp;0)&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(weaken)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;}}<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab62"></a><h4 class="section">Step 3</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;~(X&nbsp;=&nbsp;0)&nbsp;do<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;Y&nbsp;-&nbsp;1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;<span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">X</span>-1</span>&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(assn)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(while)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;/\&nbsp;~&nbsp;(X&nbsp;~=&nbsp;0)&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(weaken)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;}}<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab63"></a><h4 class="section">Step 4</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;~(X&nbsp;=&nbsp;0)&nbsp;do<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;<span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">X</span>-1</span>&nbsp;<span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">Y</span>-1</span>&nbsp;}}&nbsp;&nbsp;(assn)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;Y&nbsp;-&nbsp;1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;<span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">X</span>-1</span>&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(assn)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(while)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;/\&nbsp;~&nbsp;(X&nbsp;~=&nbsp;0)&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(weaken)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;}}<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab64"></a><h4 class="section">Step 5</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(while)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;~(X&nbsp;=&nbsp;0)&nbsp;do<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;/\&nbsp;X&nbsp;~=&nbsp;0&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(while&nbsp;+&nbsp;weaken)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;<span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">X</span>-1</span>&nbsp;<span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">Y</span>-1</span>&nbsp;}}&nbsp;&nbsp;(assn)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;Y&nbsp;-&nbsp;1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;<span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">X</span>-1</span>&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(assn)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(while)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;/\&nbsp;~&nbsp;(X&nbsp;~=&nbsp;0)&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(weaken)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;}}<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab65"></a><h4 class="section">Step 6</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;=&nbsp;m&nbsp;/\&nbsp;Y&nbsp;=&nbsp;n&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(pre)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(while)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;~(X&nbsp;=&nbsp;0)&nbsp;do<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;/\&nbsp;X&nbsp;~=&nbsp;0&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(while&nbsp;+&nbsp;weaken)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;<span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">X</span>-1</span>&nbsp;<span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">Y</span>-1</span>&nbsp;}}&nbsp;&nbsp;(assn)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;Y&nbsp;-&nbsp;1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;<span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">X</span>-1</span>&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(assn)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(while)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;INV&nbsp;/\&nbsp;~&nbsp;(X&nbsp;~=&nbsp;0)&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(weaken)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;}}<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab66"></a><h4 class="section">Guess 1</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;INV&nbsp;=&nbsp;True<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;=&nbsp;m&nbsp;/\&nbsp;Y&nbsp;=&nbsp;n&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;True&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;~(X&nbsp;=&nbsp;0)&nbsp;do<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;True&nbsp;/\&nbsp;X&nbsp;~=&nbsp;0&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;True&nbsp;<span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">X</span>-1</span>&nbsp;<span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">Y</span>-1</span>&nbsp;}}&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;Y&nbsp;-&nbsp;1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;True&nbsp;<span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">X</span>-1</span>&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;True&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;True&nbsp;/\&nbsp;~&nbsp;(X&nbsp;~=&nbsp;0)&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(broken)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;}}<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab67"></a><h4 class="section">Guess 2</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;INV&nbsp;=&nbsp;Y&nbsp;=&nbsp;n&nbsp;-&nbsp;m<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;=&nbsp;m&nbsp;/\&nbsp;Y&nbsp;=&nbsp;n&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(broken)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;~(X&nbsp;=&nbsp;0)&nbsp;do<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;/\&nbsp;X&nbsp;~=&nbsp;0&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(broken)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;<span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">X</span>-1</span>&nbsp;<span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">Y</span>-1</span>&nbsp;}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;Y&nbsp;-&nbsp;1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;<span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">X</span>-1</span>&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;/\&nbsp;~&nbsp;(X&nbsp;~=&nbsp;0)&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;}}<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab68"></a><h4 class="section">Guess 3</h4>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;INV&nbsp;=&nbsp;Y&nbsp;-&nbsp;X&nbsp;=&nbsp;n&nbsp;-&nbsp;m<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;X&nbsp;=&nbsp;m&nbsp;/\&nbsp;Y&nbsp;=&nbsp;n&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;&nbsp;Y&nbsp;-&nbsp;X&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;~(X&nbsp;=&nbsp;0)&nbsp;do<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;-&nbsp;X&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;/\&nbsp;X&nbsp;~=&nbsp;0&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;-&nbsp;X&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;<span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">X</span>-1</span>&nbsp;<span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">Y</span>-1</span>&nbsp;}}&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:=&nbsp;Y&nbsp;-&nbsp;1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;-&nbsp;X&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;<span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">X</span>-1</span>&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:=&nbsp;X&nbsp;-&nbsp;1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;-&nbsp;X&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;-&nbsp;X&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;/\&nbsp;~&nbsp;(X&nbsp;~=&nbsp;0)&nbsp;}}&nbsp;-&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{{&nbsp;Y&nbsp;=&nbsp;n&nbsp;-&nbsp;m&nbsp;}}<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="slow_subtract" class="idref" href="#slow_subtract"><span class="id" title="definition">slow_subtract</span></a> : <span class="id" title="inductive">com</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;{</span> <span class="id" title="notation">while</span> <span class="id" title="notation">~</span><span class="id" title="notation">(</span><span class="id" title="definition">X</span> <span class="id" title="notation">=</span> 0<span class="id" title="notation">)</span> <span class="id" title="notation">do</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">X</span> <span class="id" title="notation">:=</span> <span class="id" title="definition">X</span> <span class="id" title="notation">-</span> 1<span class="id" title="notation">;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">Y</span> <span class="id" title="notation">:=</span> <span class="id" title="definition">Y</span> <span class="id" title="notation">-</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">end</span> <span class="id" title="notation">}&gt;</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="slow_subtract_correct" class="idref" href="#slow_subtract_correct"><span class="id" title="lemma">slow_subtract_correct</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="m:104" class="idref" href="#m:104"><span class="id" title="binder">m</span></a> <a id="n:105" class="idref" href="#n:105"><span class="id" title="binder">n</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a> <span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_09_hl.html#m:104"><span class="id" title="variable">m</span></a> <a class="idref" href="lec_09_hl.html#cce4ad113420d0c25c6ce4891bbe5028"><span class="id" title="notation">/\</span></a> <span class="id" title="definition">Y</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_09_hl.html#n:105"><span class="id" title="variable">n</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#slow_subtract"><span class="id" title="definition">slow_subtract</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a> <span class="id" title="definition">Y</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_09_hl.html#n:105"><span class="id" title="variable">n</span></a> <a class="idref" href="lec_09_hl.html#::assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="lec_09_hl.html#m:104"><span class="id" title="variable">m</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Exercise!&nbsp;*)</span><br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab69"></a><h2 class="section">Decorated Commands</h2>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<ul class="doclist">
<li> In working out the verification of individual programs, we found it
     useful to decorate every intermediate command with an assertion.

</li>
<li> If we want to make this explict in Coq, we can define in inductive
     type that formalizes this idea: a **decorated command**.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="dcom" class="idref" href="#dcom"><span class="id" title="inductive">dcom</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
| <a id="DCSkip" class="idref" href="#DCSkip"><span class="id" title="constructor">DCSkip</span></a> (<a id="Q:108" class="idref" href="#Q:108"><span class="id" title="binder">Q</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;skip&nbsp;{{&nbsp;Q&nbsp;}}&nbsp;*)</span><br/>
| <a id="DCSeq" class="idref" href="#DCSeq"><span class="id" title="constructor">DCSeq</span></a> (<a id="d1:109" class="idref" href="#d1:109"><span class="id" title="binder">d1</span></a> <a id="d2:110" class="idref" href="#d2:110"><span class="id" title="binder">d2</span></a> : <a class="idref" href="lec_09_hl.html#dcom:106"><span class="id" title="inductive">dcom</span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;d1&nbsp;;&nbsp;d2&nbsp;*)</span><br/>
| <a id="DCAsgn" class="idref" href="#DCAsgn"><span class="id" title="constructor">DCAsgn</span></a> (<a id="X:111" class="idref" href="#X:111"><span class="id" title="binder">X</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<a id="a:112" class="idref" href="#a:112"><span class="id" title="binder">a</span></a> : <span class="id" title="inductive">aexp</span>) (<a id="Q:113" class="idref" href="#Q:113"><span class="id" title="binder">Q</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;X&nbsp;:=&nbsp;a&nbsp;{{&nbsp;Q&nbsp;}}&nbsp;*)</span><br/>
| <a id="DCIf" class="idref" href="#DCIf"><span class="id" title="constructor">DCIf</span></a> (<a id="b:114" class="idref" href="#b:114"><span class="id" title="binder">b</span></a> : <span class="id" title="inductive">bexp</span>) (<a id="P1:115" class="idref" href="#P1:115"><span class="id" title="binder">P1</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>) (<a id="d1:116" class="idref" href="#d1:116"><span class="id" title="binder">d1</span></a> : <a class="idref" href="lec_09_hl.html#dcom:106"><span class="id" title="inductive">dcom</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="P2:117" class="idref" href="#P2:117"><span class="id" title="binder">P2</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>) (<a id="d2:118" class="idref" href="#d2:118"><span class="id" title="binder">d2</span></a> : <a class="idref" href="lec_09_hl.html#dcom:106"><span class="id" title="inductive">dcom</span></a>) (<a id="Q:119" class="idref" href="#Q:119"><span class="id" title="binder">Q</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;if&nbsp;b&nbsp;then&nbsp;{{&nbsp;P1&nbsp;}}&nbsp;d1&nbsp;else&nbsp;{{&nbsp;P2&nbsp;}}&nbsp;d2&nbsp;end&nbsp;{{&nbsp;Q&nbsp;}}&nbsp;*)</span><br/>
| <a id="DCWhile" class="idref" href="#DCWhile"><span class="id" title="constructor">DCWhile</span></a> (<a id="b:120" class="idref" href="#b:120"><span class="id" title="binder">b</span></a> : <span class="id" title="inductive">bexp</span>) (<a id="P:121" class="idref" href="#P:121"><span class="id" title="binder">P</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>) (<a id="d:122" class="idref" href="#d:122"><span class="id" title="binder">d</span></a> : <a class="idref" href="lec_09_hl.html#dcom:106"><span class="id" title="inductive">dcom</span></a>) (<a id="Q:123" class="idref" href="#Q:123"><span class="id" title="binder">Q</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;while&nbsp;b&nbsp;do&nbsp;{{&nbsp;P&nbsp;}}&nbsp;d&nbsp;end&nbsp;{{&nbsp;Q&nbsp;}}&nbsp;*)</span><br/>
| <a id="DCPre" class="idref" href="#DCPre"><span class="id" title="constructor">DCPre</span></a> (<a id="P:124" class="idref" href="#P:124"><span class="id" title="binder">P</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>) (<a id="d:125" class="idref" href="#d:125"><span class="id" title="binder">d</span></a> : <a class="idref" href="lec_09_hl.html#dcom:106"><span class="id" title="inductive">dcom</span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;-&gt;&gt;&nbsp;{{&nbsp;P&nbsp;}}&nbsp;d&nbsp;*)</span><br/>
| <a id="DCPost" class="idref" href="#DCPost"><span class="id" title="constructor">DCPost</span></a> (<a id="d:126" class="idref" href="#d:126"><span class="id" title="binder">d</span></a> : <a class="idref" href="lec_09_hl.html#dcom:106"><span class="id" title="inductive">dcom</span></a>) (<a id="Q:127" class="idref" href="#Q:127"><span class="id" title="binder">Q</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;d&nbsp;-&gt;&gt;&nbsp;{{&nbsp;Q&nbsp;}}&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="decorated" class="idref" href="#decorated"><span class="id" title="inductive">decorated</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a id="Decorated" class="idref" href="#Decorated"><span class="id" title="constructor">Decorated</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_09_hl.html#dcom"><span class="id" title="inductive">dcom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_09_hl.html#decorated:128"><span class="id" title="inductive">decorated</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab70"></a><h3 class="section">Ignore me, notation</h3>

</div>
<div class="code">

<br/>
<span class="id" title="var">Declare</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">dcom_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="96a08d9d8c7f327acf2f44c46454fe1a" class="idref" href="#96a08d9d8c7f327acf2f44c46454fe1a"><span class="id" title="notation">&quot;</span></a>'skip' {{ P }}"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= (<a class="idref" href="lec_09_hl.html#DCSkip"><span class="id" title="constructor">DCSkip</span></a> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">com</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0, <span class="id" title="var">P</span> <span class="id" title="keyword">constr</span>) : <span class="id" title="var">dcom_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="6fc777e17570559fe34310ebff6e74b3" class="idref" href="#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">&quot;</span></a>l ':=' a {{ P }}"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= (<a class="idref" href="lec_09_hl.html#DCAsgn"><span class="id" title="constructor">DCAsgn</span></a> <span class="id" title="var">l</span> <span class="id" title="var">a</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">com</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0, <span class="id" title="var">l</span> <span class="id" title="keyword">constr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span> <span class="id" title="var">custom</span> <span class="id" title="var">com</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 85, <span class="id" title="var">P</span> <span class="id" title="keyword">constr</span>, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">dcom_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="88a349ad7000af9e3380552dd1d95d34" class="idref" href="#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">&quot;</span></a>'while' b 'do' {{ Pbody }} d 'end' {{ Ppost }}"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= (<a class="idref" href="lec_09_hl.html#DCWhile"><span class="id" title="constructor">DCWhile</span></a> <span class="id" title="var">b</span> <span class="id" title="var">Pbody</span> <span class="id" title="var">d</span> <span class="id" title="var">Ppost</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">com</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 89, <span class="id" title="var">b</span> <span class="id" title="var">custom</span> <span class="id" title="var">com</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Pbody</span> <span class="id" title="keyword">constr</span>, <span class="id" title="var">Ppost</span> <span class="id" title="keyword">constr</span>) : <span class="id" title="var">dcom_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="19537bd922ef12a4bb3739b50ff7c563" class="idref" href="#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">&quot;</span></a>'if' b 'then' {{ P }} d 'else' {{ P' }} d' 'end' {{ Q }}"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= (<a class="idref" href="lec_09_hl.html#DCIf"><span class="id" title="constructor">DCIf</span></a> <span class="id" title="var">b</span> <span class="id" title="var">P</span> <span class="id" title="var">d</span> <span class="id" title="var">P'</span> <span class="id" title="var">d'</span> <span class="id" title="var">Q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">com</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 89, <span class="id" title="var">b</span> <span class="id" title="var">custom</span> <span class="id" title="var">com</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">P</span> <span class="id" title="keyword">constr</span>, <span class="id" title="var">P'</span> <span class="id" title="keyword">constr</span>, <span class="id" title="var">Q</span> <span class="id" title="keyword">constr</span>) : <span class="id" title="var">dcom_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="28f0157bba7bd3bf8c17b67532ba84f8" class="idref" href="#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">&quot;</span></a>'-&gt;&gt;' {{ P }} d"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= (<a class="idref" href="lec_09_hl.html#DCPre"><span class="id" title="constructor">DCPre</span></a> <span class="id" title="var">P</span> <span class="id" title="var">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">com</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 12, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="var">P</span> <span class="id" title="keyword">constr</span>) : <span class="id" title="var">dcom_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="d9c679d5e5db96e17592c387975218ee" class="idref" href="#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">&quot;</span></a>d '-&gt;&gt;' {{ P }}"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= (<a class="idref" href="lec_09_hl.html#DCPost"><span class="id" title="constructor">DCPost</span></a> <span class="id" title="var">d</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">com</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="var">P</span> <span class="id" title="keyword">constr</span>) : <span class="id" title="var">dcom_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="171c4c95468da881f236e87b2dcc4ffa" class="idref" href="#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">&quot;</span></a> d ; d' "<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= (<a class="idref" href="lec_09_hl.html#DCSeq"><span class="id" title="constructor">DCSeq</span></a> <span class="id" title="var">d</span> <span class="id" title="var">d'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">com</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 90, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">dcom_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="c00c27417ee45ebadf9f604729ad35ca" class="idref" href="#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">&quot;</span></a>{{ P }} d"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:= (<a class="idref" href="lec_09_hl.html#Decorated"><span class="id" title="constructor">Decorated</span></a> <span class="id" title="var">P</span> <span class="id" title="var">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">com</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 91, <span class="id" title="var">P</span> <span class="id" title="keyword">constr</span>) : <span class="id" title="var">dcom_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">dcom_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab71"></a><h3 class="section">Extracting Verification Conditions</h3>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Intuitively, we should just be able to erase the decorations
     without changing the meaning of the program.

</li>
<li> We can write a function that gets rid of all the decorations.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="erase" class="idref" href="#erase"><span class="id" title="definition">erase</span></a> (<a id="d:130" class="idref" href="#d:130"><span class="id" title="binder">d</span></a> : <a class="idref" href="lec_09_hl.html#dcom"><span class="id" title="inductive">dcom</span></a>) : <span class="id" title="inductive">com</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="lec_09_hl.html#d:130"><span class="id" title="variable">d</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCSkip"><span class="id" title="constructor">DCSkip</span></a> <span class="id" title="var">_</span> =&gt; <span class="id" title="constructor">CSkip</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCSeq"><span class="id" title="constructor">DCSeq</span></a> <span class="id" title="var">d1</span> <span class="id" title="var">d2</span> =&gt; <span class="id" title="constructor">CSeq</span> (<a class="idref" href="lec_09_hl.html#erase:131"><span class="id" title="definition">erase</span></a> <span class="id" title="var">d1</span>) (<a class="idref" href="lec_09_hl.html#erase:131"><span class="id" title="definition">erase</span></a> <span class="id" title="var">d2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCAsgn"><span class="id" title="constructor">DCAsgn</span></a> <span class="id" title="var">X</span> <span class="id" title="var">a</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="constructor">CAsgn</span> <span class="id" title="var">X</span> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCIf"><span class="id" title="constructor">DCIf</span></a> <span class="id" title="var">b</span> <span class="id" title="var">_</span> <span class="id" title="var">d1</span> <span class="id" title="var">_</span> <span class="id" title="var">d2</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="constructor">CIf</span> <span class="id" title="var">b</span> (<a class="idref" href="lec_09_hl.html#erase:131"><span class="id" title="definition">erase</span></a> <span class="id" title="var">d1</span>) (<a class="idref" href="lec_09_hl.html#erase:131"><span class="id" title="definition">erase</span></a> <span class="id" title="var">d2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCWhile"><span class="id" title="constructor">DCWhile</span></a> <span class="id" title="var">b</span> <span class="id" title="var">_</span> <span class="id" title="var">d</span> <span class="id" title="var">_</span> =&gt; <span class="id" title="constructor">CWhile</span> <span class="id" title="var">b</span> (<a class="idref" href="lec_09_hl.html#erase:131"><span class="id" title="definition">erase</span></a> <a class="idref" href="lec_09_hl.html#d:130"><span class="id" title="variable">d</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCPre"><span class="id" title="constructor">DCPre</span></a> <span class="id" title="var">_</span> <span class="id" title="var">d</span> =&gt; <a class="idref" href="lec_09_hl.html#erase:131"><span class="id" title="definition">erase</span></a> <a class="idref" href="lec_09_hl.html#d:130"><span class="id" title="variable">d</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCPost"><span class="id" title="constructor">DCPost</span></a> <span class="id" title="var">d</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="lec_09_hl.html#erase:131"><span class="id" title="definition">erase</span></a> <a class="idref" href="lec_09_hl.html#d:130"><span class="id" title="variable">d</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="erase_dec" class="idref" href="#erase_dec"><span class="id" title="definition">erase_dec</span></a> (<a id="dec:133" class="idref" href="#dec:133"><span class="id" title="binder">dec</span></a> : <a class="idref" href="lec_09_hl.html#decorated"><span class="id" title="inductive">decorated</span></a>) : <span class="id" title="inductive">com</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="lec_09_hl.html#dec:133"><span class="id" title="variable">dec</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#Decorated"><span class="id" title="constructor">Decorated</span></a> <span class="id" title="var">P</span> <span class="id" title="var">d</span> =&gt; <a class="idref" href="lec_09_hl.html#erase"><span class="id" title="definition">erase</span></a> <span class="id" title="var">d</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> Here is the previous reduce to 0 example.

</li>
<li> We have decorated it with all the intermediate propositions and shown
     that erasing the decorations gets us back the original program.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <a id="dec_while" class="idref" href="#dec_while"><span class="id" title="definition">dec_while</span></a> : <a class="idref" href="lec_09_hl.html#decorated"><span class="id" title="inductive">decorated</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="notation">&lt;{</span><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">{{</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a> <a class="idref" href="lec_09_hl.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">while</span></a> <span class="id" title="notation">~</span><span class="id" title="notation">(</span><span class="id" title="definition">X</span> <span class="id" title="notation">=</span> 0<span class="id" title="notation">)</span><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">do</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a> <a class="idref" href="lec_09_hl.html#cce4ad113420d0c25c6ce4891bbe5028"><span class="id" title="notation">/\</span></a> <a class="idref" href="lec_09_hl.html#cce4ad113420d0c25c6ce4891bbe5028"><span class="id" title="notation">(</span></a><a class="idref" href="lec_09_hl.html#90b84b70bae2a0cf52991d884e146143"><span class="id" title="notation">~</span></a> <span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> 0<a class="idref" href="lec_09_hl.html#cce4ad113420d0c25c6ce4891bbe5028"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_09_hl.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <span class="id" title="definition">X</span> <span class="id" title="notation">-</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a> <a class="idref" href="lec_09_hl.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">end</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a> <a class="idref" href="lec_09_hl.html#cce4ad113420d0c25c6ce4891bbe5028"><span class="id" title="notation">/\</span></a> <span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> 0<a class="idref" href="lec_09_hl.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">{{</span></a> <span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> 0 <a class="idref" href="lec_09_hl.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">}}</span></a> <span class="id" title="notation">}&gt;</span>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="extract_while_ex" class="idref" href="#extract_while_ex"><span class="id" title="definition">extract_while_ex</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#erase_dec"><span class="id" title="definition">erase_dec</span></a> <a class="idref" href="lec_09_hl.html#dec_while"><span class="id" title="definition">dec_while</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">&lt;{</span><span class="id" title="notation">while</span> <span class="id" title="notation">~</span> <span class="id" title="definition">X</span> <span class="id" title="notation">=</span> 0 <span class="id" title="notation">do</span> <span class="id" title="definition">X</span> <span class="id" title="notation">:=</span> <span class="id" title="definition">X</span> <span class="id" title="notation">-</span> 1 <span class="id" title="notation">end</span><span class="id" title="notation">}&gt;</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_09_hl.html#dec_while"><span class="id" title="definition">dec_while</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> We also be able to obtain the post-condition and pre-condition of the
     entire program.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="post" class="idref" href="#post"><span class="id" title="definition">post</span></a> (<a id="d:135" class="idref" href="#d:135"><span class="id" title="binder">d</span></a> : <a class="idref" href="lec_09_hl.html#dcom"><span class="id" title="inductive">dcom</span></a>) : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="lec_09_hl.html#d:135"><span class="id" title="variable">d</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCSkip"><span class="id" title="constructor">DCSkip</span></a> <span class="id" title="var">P</span> =&gt; <span class="id" title="var">P</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCSeq"><span class="id" title="constructor">DCSeq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">d2</span> =&gt; <a class="idref" href="lec_09_hl.html#post:136"><span class="id" title="definition">post</span></a> <span class="id" title="var">d2</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCAsgn"><span class="id" title="constructor">DCAsgn</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Q</span> =&gt; <span class="id" title="var">Q</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCIf"><span class="id" title="constructor">DCIf</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Q</span> =&gt; <span class="id" title="var">Q</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCWhile"><span class="id" title="constructor">DCWhile</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Q</span> =&gt; <span class="id" title="var">Q</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCPre"><span class="id" title="constructor">DCPre</span></a> <span class="id" title="var">_</span> <span class="id" title="var">d</span> =&gt; <a class="idref" href="lec_09_hl.html#post:136"><span class="id" title="definition">post</span></a> <a class="idref" href="lec_09_hl.html#d:135"><span class="id" title="variable">d</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCPost"><span class="id" title="constructor">DCPost</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Q</span> =&gt; <span class="id" title="var">Q</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="pre_dec" class="idref" href="#pre_dec"><span class="id" title="definition">pre_dec</span></a> (<a id="dec:138" class="idref" href="#dec:138"><span class="id" title="binder">dec</span></a> : <a class="idref" href="lec_09_hl.html#decorated"><span class="id" title="inductive">decorated</span></a>) : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="lec_09_hl.html#dec:138"><span class="id" title="variable">dec</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#Decorated"><span class="id" title="constructor">Decorated</span></a> <span class="id" title="var">P</span> <span class="id" title="var">d</span> =&gt; <span class="id" title="var">P</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="post_dec" class="idref" href="#post_dec"><span class="id" title="definition">post_dec</span></a> (<a id="dec:140" class="idref" href="#dec:140"><span class="id" title="binder">dec</span></a> : <a class="idref" href="lec_09_hl.html#decorated"><span class="id" title="inductive">decorated</span></a>) : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="lec_09_hl.html#dec:140"><span class="id" title="variable">dec</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#Decorated"><span class="id" title="constructor">Decorated</span></a> <span class="id" title="var">P</span> <span class="id" title="var">d</span> =&gt; <a class="idref" href="lec_09_hl.html#post"><span class="id" title="definition">post</span></a> <span class="id" title="var">d</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="pre_dec_while" class="idref" href="#pre_dec_while"><span class="id" title="definition">pre_dec_while</span></a> : <a class="idref" href="lec_09_hl.html#pre_dec"><span class="id" title="definition">pre_dec</span></a> <a class="idref" href="lec_09_hl.html#dec_while"><span class="id" title="definition">dec_while</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="post_dec_while" class="idref" href="#post_dec_while"><span class="id" title="definition">post_dec_while</span></a> : <a class="idref" href="lec_09_hl.html#post_dec"><span class="id" title="definition">post_dec</span></a> <a class="idref" href="lec_09_hl.html#dec_while"><span class="id" title="definition">dec_while</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> 0)%<span class="id" title="var">assertion</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dec_correct" class="idref" href="#dec_correct"><span class="id" title="definition">dec_correct</span></a> (<a id="dec:142" class="idref" href="#dec:142"><span class="id" title="binder">dec</span></a> : <a class="idref" href="lec_09_hl.html#decorated"><span class="id" title="inductive">decorated</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#pre_dec"><span class="id" title="definition">pre_dec</span></a> <a class="idref" href="lec_09_hl.html#dec:142"><span class="id" title="variable">dec</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#erase_dec"><span class="id" title="definition">erase_dec</span></a> <a class="idref" href="lec_09_hl.html#dec:142"><span class="id" title="variable">dec</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#post_dec"><span class="id" title="definition">post_dec</span></a> <a class="idref" href="lec_09_hl.html#dec:142"><span class="id" title="variable">dec</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="dec_while_triple_correct" class="idref" href="#dec_while_triple_correct"><span class="id" title="definition">dec_while_triple_correct</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#dec_correct"><span class="id" title="definition">dec_correct</span></a> <a class="idref" href="lec_09_hl.html#dec_while"><span class="id" title="definition">dec_while</span></a><br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="notation">while</span> <span class="id" title="notation">~</span><span class="id" title="notation">(</span><span class="id" title="definition">X</span> <span class="id" title="notation">=</span> 0<span class="id" title="notation">)</span> <span class="id" title="notation">do</span> <span class="id" title="definition">X</span> <span class="id" title="notation">:=</span> <span class="id" title="definition">X</span> <span class="id" title="notation">-</span> 1 <span class="id" title="notation">end</span><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a> <span class="id" title="definition">X</span> <a class="idref" href="lec_09_hl.html#5ad5c240a08c2b567f422c2e12577e27"><span class="id" title="notation">=</span></a> 0 <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab72"></a><h3 class="section">Verification Conditions</h3>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Now for the real reason why we want decorated programs.

</li>
<li> We can use our compositional proof-rules to construct an entire predicate
     that must be true of our entire program, the **verification conditions**.

</li>
<li> This will enable us to automate proving properties of our programs.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">assertion_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">hoare_spec_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="verification_conditions" class="idref" href="#verification_conditions"><span class="id" title="definition">verification_conditions</span></a> (<a id="P:143" class="idref" href="#P:143"><span class="id" title="binder">P</span></a> : <a class="idref" href="lec_09_hl.html#Assertion"><span class="id" title="definition">Assertion</span></a>) (<a id="d:144" class="idref" href="#d:144"><span class="id" title="binder">d</span></a> : <a class="idref" href="lec_09_hl.html#dcom"><span class="id" title="inductive">dcom</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="lec_09_hl.html#d:144"><span class="id" title="variable">d</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCSkip"><span class="id" title="constructor">DCSkip</span></a> <span class="id" title="var">Q</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="lec_09_hl.html#P:143"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <span class="id" title="var">Q</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCSeq"><span class="id" title="constructor">DCSeq</span></a> <span class="id" title="var">d1</span> <span class="id" title="var">d2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#verification_conditions:145"><span class="id" title="definition">verification_conditions</span></a> <a class="idref" href="lec_09_hl.html#P:143"><span class="id" title="variable">P</span></a> <span class="id" title="var">d1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="lec_09_hl.html#verification_conditions:145"><span class="id" title="definition">verification_conditions</span></a> (<a class="idref" href="lec_09_hl.html#post"><span class="id" title="definition">post</span></a> <span class="id" title="var">d1</span>) <span class="id" title="var">d2</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCAsgn"><span class="id" title="constructor">DCAsgn</span></a> <span class="id" title="var">X</span> <span class="id" title="var">a</span> <span class="id" title="var">Q</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="lec_09_hl.html#P:143"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <span class="id" title="var">Q</span> <a class="idref" href="lec_09_hl.html#8db308f0993b6852839b2cd35110e3bd"><span class="id" title="notation">[</span></a><span class="id" title="var">X</span> <a class="idref" href="lec_09_hl.html#8db308f0993b6852839b2cd35110e3bd"><span class="id" title="notation">&gt;</span></a> <span class="id" title="var">a</span><a class="idref" href="lec_09_hl.html#8db308f0993b6852839b2cd35110e3bd"><span class="id" title="notation">]</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCIf"><span class="id" title="constructor">DCIf</span></a> <span class="id" title="var">b</span> <span class="id" title="var">P1</span> <span class="id" title="var">d1</span> <span class="id" title="var">P2</span> <span class="id" title="var">d2</span> <span class="id" title="var">Q</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="lec_09_hl.html#P:143"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#cce4ad113420d0c25c6ce4891bbe5028"><span class="id" title="notation">/\</span></a> <span class="id" title="var">b</span><a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <span class="id" title="var">P1</span>)%<span class="id" title="var">assertion</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> (<a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="lec_09_hl.html#P:143"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#cce4ad113420d0c25c6ce4891bbe5028"><span class="id" title="notation">/\</span></a> <a class="idref" href="lec_09_hl.html#90b84b70bae2a0cf52991d884e146143"><span class="id" title="notation">~</span></a> <span class="id" title="var">b</span><a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <span class="id" title="var">P2</span>)%<span class="id" title="var">assertion</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="lec_09_hl.html#post"><span class="id" title="definition">post</span></a> <span class="id" title="var">d1</span> <a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <span class="id" title="var">Q</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="lec_09_hl.html#post"><span class="id" title="definition">post</span></a> <span class="id" title="var">d2</span> <a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <span class="id" title="var">Q</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="lec_09_hl.html#verification_conditions:145"><span class="id" title="definition">verification_conditions</span></a> <span class="id" title="var">P1</span> <span class="id" title="var">d1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="lec_09_hl.html#verification_conditions:145"><span class="id" title="definition">verification_conditions</span></a> <span class="id" title="var">P2</span> <span class="id" title="var">d2</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCWhile"><span class="id" title="constructor">DCWhile</span></a> <span class="id" title="var">b</span> <span class="id" title="var">Pbody</span> <span class="id" title="var">d</span> <span class="id" title="var">Ppost</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;post&nbsp;d&nbsp;is&nbsp;the&nbsp;loop&nbsp;invariant&nbsp;and&nbsp;the&nbsp;initial<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;precondition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="lec_09_hl.html#P:143"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="lec_09_hl.html#post"><span class="id" title="definition">post</span></a> <a class="idref" href="lec_09_hl.html#d:144"><span class="id" title="variable">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> (<a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="lec_09_hl.html#post"><span class="id" title="definition">post</span></a> <a class="idref" href="lec_09_hl.html#d:144"><span class="id" title="variable">d</span></a> <a class="idref" href="lec_09_hl.html#cce4ad113420d0c25c6ce4891bbe5028"><span class="id" title="notation">/\</span></a> <span class="id" title="var">b</span><a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <span class="id" title="var">Pbody</span>)%<span class="id" title="var">assertion</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> (<a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="lec_09_hl.html#post"><span class="id" title="definition">post</span></a> <a class="idref" href="lec_09_hl.html#d:144"><span class="id" title="variable">d</span></a> <a class="idref" href="lec_09_hl.html#cce4ad113420d0c25c6ce4891bbe5028"><span class="id" title="notation">/\</span></a> <a class="idref" href="lec_09_hl.html#90b84b70bae2a0cf52991d884e146143"><span class="id" title="notation">~</span></a> <span class="id" title="var">b</span><a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <span class="id" title="var">Ppost</span>)%<span class="id" title="var">assertion</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="lec_09_hl.html#verification_conditions:145"><span class="id" title="definition">verification_conditions</span></a> <span class="id" title="var">Pbody</span> <a class="idref" href="lec_09_hl.html#d:144"><span class="id" title="variable">d</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCPre"><span class="id" title="constructor">DCPre</span></a> <span class="id" title="var">P'</span> <span class="id" title="var">d</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="lec_09_hl.html#P:143"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <span class="id" title="var">P'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="lec_09_hl.html#verification_conditions:145"><span class="id" title="definition">verification_conditions</span></a> <span class="id" title="var">P'</span> <a class="idref" href="lec_09_hl.html#d:144"><span class="id" title="variable">d</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_09_hl.html#DCPost"><span class="id" title="constructor">DCPost</span></a> <span class="id" title="var">d</span> <span class="id" title="var">Q</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#verification_conditions:145"><span class="id" title="definition">verification_conditions</span></a> <a class="idref" href="lec_09_hl.html#P:143"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#d:144"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="lec_09_hl.html#post"><span class="id" title="definition">post</span></a> <a class="idref" href="lec_09_hl.html#d:144"><span class="id" title="variable">d</span></a> <a class="idref" href="lec_09_hl.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <span class="id" title="var">Q</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="verification_correct" class="idref" href="#verification_correct"><span class="id" title="lemma">verification_correct</span></a> : <span class="id" title="keyword">forall</span> <a id="d:147" class="idref" href="#d:147"><span class="id" title="binder">d</span></a> <a id="P:148" class="idref" href="#P:148"><span class="id" title="binder">P</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#verification_conditions"><span class="id" title="definition">verification_conditions</span></a> <a class="idref" href="lec_09_hl.html#P:148"><span class="id" title="variable">P</span></a> <a class="idref" href="lec_09_hl.html#d:147"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#P:148"><span class="id" title="variable">P</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="lec_09_hl.html#erase"><span class="id" title="definition">erase</span></a> <a class="idref" href="lec_09_hl.html#d:147"><span class="id" title="variable">d</span></a> <a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="lec_09_hl.html#post"><span class="id" title="definition">post</span></a> <a class="idref" href="lec_09_hl.html#d:147"><span class="id" title="variable">d</span></a><a class="idref" href="lec_09_hl.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Why&nbsp;can&nbsp;we&nbsp;do&nbsp;induction&nbsp;on&nbsp;d?&nbsp;Compositional&nbsp;proof&nbsp;rules!&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">d</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Skip&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_09_hl.html#hoare_consequence_pre"><span class="id" title="lemma">hoare_consequence_pre</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="lec_09_hl.html#hoare_skip"><span class="id" title="lemma">hoare_skip</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Seq&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_09_hl.html#hoare_seq"><span class="id" title="lemma">hoare_seq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHd2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHd1</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Asgn&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_09_hl.html#hoare_consequence_pre"><span class="id" title="lemma">hoare_consequence_pre</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="lec_09_hl.html#hoare_asgn"><span class="id" title="lemma">hoare_asgn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="comment">(*&nbsp;If&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HPre1</span> [<span class="id" title="var">HPre2</span> [<span class="id" title="var">Hd1</span> [<span class="id" title="var">Hd2</span> [<span class="id" title="var">HThen</span> <span class="id" title="var">HElse</span>] ] ] ] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHd1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HThen</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHd1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHd2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HElse</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IHd2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_09_hl.html#hoare_if"><span class="id" title="lemma">hoare_if</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="lec_09_hl.html#hoare_consequence"><span class="id" title="lemma">hoare_consequence</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="lec_09_hl.html#hoare_consequence"><span class="id" title="lemma">hoare_consequence</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="comment">(*&nbsp;While&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpre</span> [<span class="id" title="var">Hbody1</span> [<span class="id" title="var">Hpost1</span> <span class="id" title="var">Hd</span>] ] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_09_hl.html#hoare_consequence"><span class="id" title="lemma">hoare_consequence</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_09_hl.html#hoare_while"><span class="id" title="lemma">hoare_while</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_09_hl.html#hoare_consequence_pre"><span class="id" title="lemma">hoare_consequence_pre</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Pre&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HP</span> <span class="id" title="var">Hd</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_09_hl.html#hoare_consequence_pre"><span class="id" title="lemma">hoare_consequence_pre</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="comment">(*&nbsp;Post&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hd</span> <span class="id" title="var">HQ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_09_hl.html#hoare_consequence_post"><span class="id" title="lemma">hoare_consequence_post</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab73"></a><h2 class="section">Summary</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> We saw Hoare logic, including assertions and compositional rules
     (assignment, pre/post, skip, seq, if, while).

</li>
<li> This gave us a third style of semantics: axiomatic semantics.

</li>
<li> We saw example verifications of single programs.

</li>
<li> Finally we saw how to extract verification conditions.

</li>
</ul>

<div class="paragraph"> </div>

 
</div>
<div class="code">
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>