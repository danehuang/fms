<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>lec_11_stlc</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library lec_11_stlc</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab1"></a><h1 class="section">Simply-Typed Lambda Calculus</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Strings.String.html#"><span class="id" title="library">Strings.String</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Maps</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Multi</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab2"></a><h2 class="section">References</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> https://softwarefoundations.cis.upenn.edu/plf-current/Stlc.html

</li>
<li> https://softwarefoundations.cis.upenn.edu/plf-current/StlcProp.html

</li>
</ul>

<div class="paragraph"> </div>

 
<div class="paragraph"> </div>

<a id="lab3"></a><h2 class="section">Recap</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Last time, we introduced Lambda Calculus, a theory of
    "substitution".

</li>
<li> In particular, we saw that *capture-avoid substitution* was
    the appropriate notion of substitution.

</li>
<li> We then gave two semantics for Lambda Calculus: call-by-value
    and call-by-name and saw that they could give different semantics.

</li>
<li> At the end, we introduced an extension of Lambda Calculus with booleans
    and translated them away using Church encodings.

</li>
<li> This extension can create terms that get "stuck" in evaluation.

</li>
<li> Today we'll look at a solution of "stuck" terms and solution to that
    problem via <i>type-system</i>.

</li>
<li> More concretely, we'll introduce the *simply-typed lambda calculus*,
    which forms the foundation of every modern functional programming
    language including Coq.

</li>
</ul>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<a id="lab4"></a><h2 class="section">Goal for today</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Introduce the simply-typed Lambda Calculus (STLC) and it's type-system.

</li>
<li> Prove <i>type-soundness</i> via <i>progress</i> and <i>preservation</i>.

</li>
<li> Show that STLC cannot express recursion.

</li>
</ul>
 
<div class="paragraph"> </div>

<a id="lab5"></a><h2 class="section">Problem</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="UNTYPED_LAMBDA_CALCULUS" class="idref" href="#UNTYPED_LAMBDA_CALCULUS"><span class="id" title="module">UNTYPED_LAMBDA_CALCULUS</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">lec_10_lambda</span>.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> Recall the lambda calculus with booleans.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="inductive">tm'</span>.<br/>
</div>

<div class="doc">
<a id="lab6"></a><h3 class="section">Terms</h3>

<pre>
Inductive tm' : Set :=
| tm_var' : string -&gt; tm'
| tm_app' : tm' -&gt; tm' -&gt; tm'
| tm_abs' : string -&gt; tm' -&gt; tm'
| tm_true' : tm'
| tm_false' : tm'
| tm_if' : tm' -&gt; tm' -&gt; tm' -&gt; tm'
</pre>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="inductive">cbv_step'</span>.<br/>
</div>

<div class="doc">
<a id="lab7"></a><h3 class="section">Call-by-value Semantics</h3>

<pre>
Inductive cbv_step' : tm' -&gt; tm' -&gt; Prop :=
| _cbv_app1 :
forall t1 t2 t1' : tm',
t1 ~--&gt; t1' -&gt;
tm_app' t1 t2 ~--&gt; tm_app' t1' t2
| _cbv_app2 :
forall v t2 t2' : tm',
value' v -&gt; t2 ~--&gt; t2' -&gt; tm_app' v t2 ~--&gt; tm_app' v t2'
| _cbv_beta :
forall (x : string) (t v : tm'),
value' v -&gt; tm_app' (tm_abs' x t) v ~--&gt; subst' x v t
| _if_cond :
forall tcond ttrue tfalse tcond' : tm',
tcond ~--&gt; tcond' -&gt;
tm_if' tcond ttrue tfalse ~--&gt; tm_if' tcond' ttrue tfalse
| _if_true :
forall ttrue tfalse : tm',
tm_if' tm_true' ttrue tfalse ~--&gt; ttrue
| _if_false :
forall ttrue tfalse : tm',
tm_if' tm_true' ttrue tfalse ~--&gt; tfalse.
</pre>

<div class="paragraph"> </div>

<a id="lab8"></a><h3 class="section">Stuck Terms</h3>


<div class="paragraph"> </div>

   Example 1:

<div class="paragraph"> </div>

     false true

<div class="paragraph"> </div>

     Can't apply false to true.

<div class="paragraph"> </div>

   Example 2:

<div class="paragraph"> </div>

     true (\x, x)

<div class="paragraph"> </div>

     Can't apply true to lambda.

<div class="paragraph"> </div>

   Example 3:

<div class="paragraph"> </div>

     if (\x, x) (\y, y) (\z, z)

<div class="paragraph"> </div>

     Can't apply if to lambda.

<div class="paragraph"> </div>

   Example 4:

<div class="paragraph"> </div>

     if true (false (\x, x)) (\z, z)

<div class="paragraph"> </div>

     The if true reduces to a (false (\x, x)) which is stuck.

<div class="paragraph"> </div>

<a id="lab9"></a><h3 class="section">Types: idea</h3>


<div class="paragraph"> </div>

<ul class="doclist">
<li> We will introduce a notion called <i>types</i> that will classify 
    terms according to the shape of values they compute.

</li>
<li> We can then prove a <i>type-soundness</i> theorem:
    well-typed terms do not get stuck.

</li>
<li> A sufficiently powerful type-system cannot be both *sound* and 
    <i>complete</i>.

</li>
<li> <i>Soundness</i> means: if a term is well-typed, then it does not
    get stuck.

</li>
<li> <i>Completeness</i> means: if a term does not get stuck, then it is
    well-typed.

</li>
<li> Type-systems are generally designed to be sound.

</li>
<li> We will introduce type-systems via the <i>simply-typed lambda calculus</i> (STLC).

</li>
<li> Coq is a sophisticated verion of typed lambda calculus.

</li>
</ul>

</div>
<div class="code">
<span class="id" title="keyword">End</span> <a class="idref" href="lec_11_stlc.html#UNTYPED_LAMBDA_CALCULUS"><span class="id" title="module">UNTYPED_LAMBDA_CALCULUS</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab10"></a><h2 class="section">Simply-Typed Lambda Calculus Syntax</h2>

<div class="paragraph"> </div>

<a id="lab11"></a><h3 class="section">Types or the shape of a value</h3>


<div class="paragraph"> </div>

<ul class="doclist">
<li> We first need the "shape" of values.

</li>
<li> Let us remind ourselves what the values were.

</li>
</ul>
 
<div class="paragraph"> </div>


<div class="paragraph"> </div>

<pre>
Inductive value' : tm' -&gt; Prop :=
| v_abs' : forall (x : string) (t1 : tm'), value' (tm_abs' x t1)
| v_true' : value' tm_true'
| v_false' : value' tm_false
</pre>

<div class="paragraph"> </div>

<a id="lab12"></a><h3 class="section">Type Syntax</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;T&nbsp;::=&nbsp;Bool<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;T&nbsp;-&gt;&nbsp;T<br/>
<br/>
*)</span><br/>
<span class="id" title="keyword">Inductive</span> <a id="ty" class="idref" href="#ty"><span class="id" title="inductive">ty</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
| <a id="Ty_Bool" class="idref" href="#Ty_Bool"><span class="id" title="constructor">Ty_Bool</span></a> : <a class="idref" href="lec_11_stlc.html#ty:1"><span class="id" title="inductive">ty</span></a>                <span class="comment">(*&nbsp;for&nbsp;the&nbsp;boolean&nbsp;values&nbsp;*)</span><br/>
| <a id="Ty_Arrow" class="idref" href="#Ty_Arrow"><span class="id" title="constructor">Ty_Arrow</span></a> : <a class="idref" href="lec_11_stlc.html#ty:1"><span class="id" title="inductive">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#ty:1"><span class="id" title="inductive">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#ty:1"><span class="id" title="inductive">ty</span></a>   <span class="comment">(*&nbsp;t1&nbsp;-&gt;&nbsp;t2,&nbsp;for&nbsp;the&nbsp;abstraction&nbsp;values&nbsp;*)</span><br/>
.<br/>

<br/>
</div>

<div class="doc">
<a id="lab13"></a><h3 class="section">Examples</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;Example&nbsp;1:<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;true:&nbsp;Bool<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;false:&nbsp;Bool<br/>
*)</span><br/>

<br/>
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;Example&nbsp;2:<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;negation:&nbsp;Bool&nbsp;-&gt;&nbsp;Bool<br/>
*)</span><br/>

<br/>
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;Example&nbsp;3:<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and:&nbsp;Bool&nbsp;-&gt;&nbsp;(Bool&nbsp;-&gt;&nbsp;Bool)&nbsp;=&nbsp;Bool&nbsp;-&gt;&nbsp;Bool&nbsp;-&gt;&nbsp;Bool<br/>
*)</span><br/>

<br/>
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;Example&nbsp;4:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\f,&nbsp;true:&nbsp;(Bool&nbsp;-&gt;&nbsp;Bool)&nbsp;-&gt;&nbsp;Bool<br/>
<br/>
*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab14"></a><h3 class="section">Syntax</h3>

</div>
<div class="code">
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;t&nbsp;::=&nbsp;x&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;t&nbsp;t<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;\x:&nbsp;T,&nbsp;t&nbsp;&nbsp;&nbsp;&nbsp;(lambda&nbsp;parameters&nbsp;get&nbsp;a&nbsp;type&nbsp;T)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;true<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;false<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;if&nbsp;t&nbsp;t&nbsp;t<br/>
&nbsp;*)</span><br/>
<span class="id" title="keyword">Inductive</span> <a id="tm" class="idref" href="#tm"><span class="id" title="inductive">tm</span></a> : <span class="id" title="keyword">Type</span> :=<br/>
| <a id="tm_var" class="idref" href="#tm_var"><span class="id" title="constructor">tm_var</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#tm:3"><span class="id" title="inductive">tm</span></a><br/>
| <a id="tm_app" class="idref" href="#tm_app"><span class="id" title="constructor">tm_app</span></a> : <a class="idref" href="lec_11_stlc.html#tm:3"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#tm:3"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#tm:3"><span class="id" title="inductive">tm</span></a><br/>
| <a id="tm_abs" class="idref" href="#tm_abs"><span class="id" title="constructor">tm_abs</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#ty"><span class="id" title="inductive">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#tm:3"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#tm:3"><span class="id" title="inductive">tm</span></a>  <span class="comment">(*&nbsp;parameter&nbsp;augmented&nbsp;with&nbsp;type&nbsp;*)</span><br/>
| <a id="tm_true" class="idref" href="#tm_true"><span class="id" title="constructor">tm_true</span></a> : <a class="idref" href="lec_11_stlc.html#tm:3"><span class="id" title="inductive">tm</span></a><br/>
| <a id="tm_false" class="idref" href="#tm_false"><span class="id" title="constructor">tm_false</span></a> : <a class="idref" href="lec_11_stlc.html#tm:3"><span class="id" title="inductive">tm</span></a><br/>
| <a id="tm_if" class="idref" href="#tm_if"><span class="id" title="constructor">tm_if</span></a> : <a class="idref" href="lec_11_stlc.html#tm:3"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#tm:3"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#tm:3"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#tm:3"><span class="id" title="inductive">tm</span></a><br/>
.<br/>

<br/>
</div>

<div class="doc">
<a id="lab15"></a><h3 class="section">Notation</h3>

</div>
<div class="code">

<br/>
<span class="id" title="var">Declare</span> <span class="id" title="var">Custom</span> <span class="id" title="var">Entry</span> <span class="id" title="var">stlc</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="96e24cc1b3765f349012b832d1dd22ad" class="idref" href="#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&quot;</span></a>&lt;{ e }&gt;" := <span class="id" title="var">e</span> (<span class="id" title="var">e</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99).<br/>
<span class="id" title="keyword">Notation</span> <a id="b1345b4aefd9f042fe48f55d08e97df9" class="idref" href="#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">&quot;</span></a>( x )" := <span class="id" title="var">x</span> (<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span>, <span class="id" title="var">x</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99).<br/>
<span class="id" title="keyword">Notation</span> <a id=":stlc::x" class="idref" href="#:stlc::x"><span class="id" title="notation">&quot;</span></a>x" := <span class="id" title="var">x</span> (<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0, <span class="id" title="var">x</span> <span class="id" title="keyword">constr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>
<span class="id" title="keyword">Notation</span> <a id=":stlc::x_'-&gt;'_x" class="idref" href="#:stlc::x_'-&gt;'_x"><span class="id" title="notation">&quot;</span></a>S -&gt; T" := (<a class="idref" href="lec_11_stlc.html#Ty_Arrow"><span class="id" title="constructor">Ty_Arrow</span></a> <span class="id" title="var">S</span> <span class="id" title="var">T</span>) (<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> <a id=":stlc::x_x" class="idref" href="#:stlc::x_x"><span class="id" title="notation">&quot;</span></a>x y" := (<a class="idref" href="lec_11_stlc.html#tm_app"><span class="id" title="constructor">tm_app</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> <a id="c7ca0fe7e4f2c0ef6d6958a5dc4283b7" class="idref" href="#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">&quot;</span></a>\ x : t , y" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="lec_11_stlc.html#tm_abs"><span class="id" title="constructor">tm_abs</span></a> <span class="id" title="var">x</span> <span class="id" title="var">t</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 90, <span class="id" title="var">x</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">t</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">y</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="lec_11_stlc.html#tm_var"><span class="id" title="constructor">tm_var</span></a> <a class="idref" href="lec_11_stlc.html#tm_var"><span class="id" title="constructor">:</span></a> <a class="idref" href="lec_11_stlc.html#tm_var"><span class="id" title="constructor">string</span></a> <a class="idref" href="lec_11_stlc.html#tm_var"><span class="id" title="constructor">&gt;-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#tm_var"><span class="id" title="constructor">tm</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id=":stlc::'Bool'" class="idref" href="#:stlc::'Bool'"><span class="id" title="notation">&quot;</span></a>'Bool'" := <a class="idref" href="lec_11_stlc.html#Ty_Bool"><span class="id" title="constructor">Ty_Bool</span></a> (<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>
<span class="id" title="keyword">Notation</span> <a id=":stlc::'if'_x_'then'_x_'else'_x" class="idref" href="#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">&quot;</span></a>'if' x 'then' y 'else' z" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="lec_11_stlc.html#tm_if"><span class="id" title="constructor">tm_if</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) (<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 89,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">y</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">z</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>
<span class="id" title="keyword">Notation</span> <a id=":::'true'" class="idref" href="#:::'true'"><span class="id" title="notation">&quot;</span></a>'true'" := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1).<br/>
<span class="id" title="keyword">Notation</span> <a id=":stlc::'true'" class="idref" href="#:stlc::'true'"><span class="id" title="notation">&quot;</span></a>'true'" := <a class="idref" href="lec_11_stlc.html#tm_true"><span class="id" title="constructor">tm_true</span></a> (<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>
<span class="id" title="keyword">Notation</span> <a id=":::'false'" class="idref" href="#:::'false'"><span class="id" title="notation">&quot;</span></a>'false'" := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1).<br/>
<span class="id" title="keyword">Notation</span> <a id=":stlc::'false'" class="idref" href="#:stlc::'false'"><span class="id" title="notation">&quot;</span></a>'false'" := <a class="idref" href="lec_11_stlc.html#tm_false"><span class="id" title="constructor">tm_false</span></a> (<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="x" class="idref" href="#x"><span class="id" title="definition">x</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> := "x".<br/>
<span class="id" title="keyword">Definition</span> <a id="y" class="idref" href="#y"><span class="id" title="definition">y</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> := "y".<br/>
<span class="id" title="keyword">Definition</span> <a id="z" class="idref" href="#z"><span class="id" title="definition">z</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> := "z".<br/>
<span class="id" title="keyword">Definition</span> <a id="f" class="idref" href="#f"><span class="id" title="definition">f</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> := "f".<br/>
<span class="id" title="keyword">Definition</span> <a id="g" class="idref" href="#g"><span class="id" title="definition">g</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> := "g".<br/>
<span class="id" title="keyword">Definition</span> <a id="h" class="idref" href="#h"><span class="id" title="definition">h</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> := "h".<br/>
<span class="comment">(*<br/>
Hint&nbsp;Unfold&nbsp;x&nbsp;:&nbsp;core.<br/>
Hint&nbsp;Unfold&nbsp;y&nbsp;:&nbsp;core.<br/>
Hint&nbsp;Unfold&nbsp;z&nbsp;:&nbsp;core.<br/>
Hint&nbsp;Unfold&nbsp;f&nbsp;:&nbsp;core.<br/>
Hint&nbsp;Unfold&nbsp;g&nbsp;:&nbsp;core.<br/>
Hint&nbsp;Unfold&nbsp;h&nbsp;:&nbsp;core.<br/>
*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab16"></a><h3 class="section">Examples</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <a id="ex1" class="idref" href="#ex1"><span class="id" title="definition">ex1</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="ex2" class="idref" href="#ex2"><span class="id" title="definition">ex2</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#f"><span class="id" title="definition">f</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#g"><span class="id" title="definition">g</span></a> <a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">))</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="ex3" class="idref" href="#ex3"><span class="id" title="definition">ex3</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#y"><span class="id" title="definition">y</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="ex4" class="idref" href="#ex4"><span class="id" title="definition">ex4</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="ex5" class="idref" href="#ex5"><span class="id" title="definition">ex5</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#h"><span class="id" title="definition">h</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="ex6" class="idref" href="#ex6"><span class="id" title="definition">ex6</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#y"><span class="id" title="definition">y</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#y"><span class="id" title="definition">y</span></a> <a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="not" class="idref" href="#not"><span class="id" title="definition">not</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'false'"><span class="id" title="notation">false</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'true'"><span class="id" title="notation">true</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="and" class="idref" href="#and"><span class="id" title="definition">and</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#y"><span class="id" title="definition">y</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="lec_11_stlc.html#y"><span class="id" title="definition">y</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'false'"><span class="id" title="notation">false</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="or" class="idref" href="#or"><span class="id" title="definition">or</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#y"><span class="id" title="definition">y</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'true'"><span class="id" title="notation">true</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="lec_11_stlc.html#y"><span class="id" title="definition">y</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab17"></a><h2 class="section">Semantics</h2>

<div class="paragraph"> </div>

<a id="lab18"></a><h3 class="section">Values</h3>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Our values are essentially the same, although we will use the
     new version of lambda's that have been decorated with types.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="value" class="idref" href="#value"><span class="id" title="inductive">value</span></a> : <a class="idref" href="lec_11_stlc.html#tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="v_abs" class="idref" href="#v_abs"><span class="id" title="constructor">v_abs</span></a> : <span class="id" title="keyword">forall</span> <a id="x:7" class="idref" href="#x:7"><span class="id" title="binder">x</span></a> <a id="T2:8" class="idref" href="#T2:8"><span class="id" title="binder">T2</span></a> <a id="t1:9" class="idref" href="#t1:9"><span class="id" title="binder">t1</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#value:5"><span class="id" title="inductive">value</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x:7"><span class="id" title="variable">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a><a class="idref" href="lec_11_stlc.html#T2:8"><span class="id" title="variable">T2</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#t1:9"><span class="id" title="variable">t1</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>   <span class="comment">(*&nbsp;this&nbsp;case&nbsp;changed&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a id="v_true" class="idref" href="#v_true"><span class="id" title="constructor">v_true</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#value:5"><span class="id" title="inductive">value</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'true'"><span class="id" title="notation">true</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;| <a id="v_false" class="idref" href="#v_false"><span class="id" title="constructor">v_false</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#value:5"><span class="id" title="inductive">value</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'false'"><span class="id" title="notation">false</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>.<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="lec_11_stlc.html#value"><span class="id" title="inductive">value</span></a> : <span class="id" title="var">core</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab19"></a><h3 class="section">Capture-avoid Substitution</h3>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Nothing changes about substitution.

</li>
<li> Thus we should expect beta-reduction to stay the same.

</li>
</ul>

<div class="paragraph"> </div>

 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;'[' x ':=' s ']' t" (<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">x</span> <span class="id" title="keyword">constr</span>).<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="subst" class="idref" href="#subst"><span class="id" title="definition">subst</span></a> (<a id="x:10" class="idref" href="#x:10"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<a id="s:11" class="idref" href="#s:11"><span class="id" title="binder">s</span></a> : <a class="idref" href="lec_11_stlc.html#tm"><span class="id" title="inductive">tm</span></a>) (<a id="t:12" class="idref" href="#t:12"><span class="id" title="binder">t</span></a> : <a class="idref" href="lec_11_stlc.html#tm"><span class="id" title="inductive">tm</span></a>) : <a class="idref" href="lec_11_stlc.html#tm"><span class="id" title="inductive">tm</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="lec_11_stlc.html#t:12"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_11_stlc.html#tm_var"><span class="id" title="constructor">tm_var</span></a> <span class="id" title="var">y</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">eqb_string</span> <a class="idref" href="lec_11_stlc.html#x:10"><span class="id" title="variable">x</span></a> <span class="id" title="var">y</span> <span class="id" title="keyword">then</span> <a class="idref" href="lec_11_stlc.html#s:11"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="lec_11_stlc.html#t:12"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><span class="id" title="var">y</span><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a><span class="id" title="var">T</span><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <span class="id" title="var">t1</span><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">eqb_string</span> <a class="idref" href="lec_11_stlc.html#x:10"><span class="id" title="variable">x</span></a> <span class="id" title="var">y</span> <span class="id" title="keyword">then</span> <a class="idref" href="lec_11_stlc.html#t:12"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><span class="id" title="var">y</span><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a><span class="id" title="var">T</span><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">[</span></a><a class="idref" href="lec_11_stlc.html#x:10"><span class="id" title="variable">x</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">:=</span></a><a class="idref" href="lec_11_stlc.html#s:11"><span class="id" title="variable">s</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">]</span></a> <span class="id" title="var">t1</span><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><span class="id" title="var">t1</span> <span class="id" title="var">t2</span><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">[</span></a><a class="idref" href="lec_11_stlc.html#x:10"><span class="id" title="variable">x</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">:=</span></a><a class="idref" href="lec_11_stlc.html#s:11"><span class="id" title="variable">s</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">]</span></a> <span class="id" title="var">t1</span><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">[</span></a><a class="idref" href="lec_11_stlc.html#x:10"><span class="id" title="variable">x</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">:=</span></a><a class="idref" href="lec_11_stlc.html#s:11"><span class="id" title="variable">s</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">]</span></a> <span class="id" title="var">t2</span><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'true'"><span class="id" title="notation">true</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'true'"><span class="id" title="notation">true</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'false'"><span class="id" title="notation">false</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'false'"><span class="id" title="notation">false</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <span class="id" title="var">t1</span> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <span class="id" title="var">t2</span> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <span class="id" title="var">t3</span><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">[</span></a><a class="idref" href="lec_11_stlc.html#x:10"><span class="id" title="variable">x</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">:=</span></a><a class="idref" href="lec_11_stlc.html#s:11"><span class="id" title="variable">s</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">]</span></a> <span class="id" title="var">t1</span><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">[</span></a><a class="idref" href="lec_11_stlc.html#x:10"><span class="id" title="variable">x</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">:=</span></a><a class="idref" href="lec_11_stlc.html#s:11"><span class="id" title="variable">s</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">]</span></a> <span class="id" title="var">t2</span><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">[</span></a><a class="idref" href="lec_11_stlc.html#x:10"><span class="id" title="variable">x</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">:=</span></a><a class="idref" href="lec_11_stlc.html#s:11"><span class="id" title="variable">s</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">]</span></a> <span class="id" title="var">t3</span><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
<br/>
<span class="id" title="keyword">where</span> <a id="83dbd6b289334c93dbc0440277d51136" class="idref" href="#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">&quot;</span></a>'[' x ':=' s ']' t" := (<a class="idref" href="lec_11_stlc.html#subst:13"><span class="id" title="definition">subst</span></a> <span class="id" title="var">x</span> <span class="id" title="var">s</span> <span class="id" title="var">t</span>) (<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab20"></a><h3 class="section">Call-by-value Semantics</h3>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Nothing changes with the semantics.

</li>
<li> Intuitively, this makes sense: we shouldn't expect types to change
     the semantics of our programs.

</li>
<li> In other words, types are a *static* construct as opposed to a
     *dynamic* construct.

</li>
</ul>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;Note&nbsp;that&nbsp;the&nbsp;type&nbsp;is&nbsp;ignored&nbsp;by&nbsp;the&nbsp;semantics!&nbsp;&nbsp;&nbsp;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;v2<br/>
&nbsp;&nbsp;-----------------------------------&nbsp;ST_AppAbs<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(\x:&nbsp;T2,&nbsp;t1)&nbsp;v2&nbsp;--&gt;&nbsp;<span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">v2</span></span>t1<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t1&nbsp;--&gt;&nbsp;t1'<br/>
&nbsp;&nbsp;--------------------&nbsp;ST_App1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;t1'&nbsp;t2&nbsp;--&gt;&nbsp;t1&nbsp;t2<br/>
&nbsp;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;t1&nbsp;&nbsp;&nbsp;t2&nbsp;--&gt;&nbsp;t2'<br/>
&nbsp;&nbsp;------------------------&nbsp;ST_App2<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v1&nbsp;t2&nbsp;--&gt;&nbsp;v1&nbsp;t2<br/>
<br/>
<br/>
&nbsp;&nbsp;------------------------&nbsp;ST_IfTrue<br/>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;true&nbsp;t1&nbsp;t2&nbsp;--&gt;&nbsp;t1<br/>
<br/>
<br/>
&nbsp;&nbsp;------------------------&nbsp;ST_IfFalse<br/>
&nbsp;&nbsp;&nbsp;if&nbsp;false&nbsp;t1&nbsp;t2&nbsp;--&gt;&nbsp;t2<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t1&nbsp;--&gt;&nbsp;t1'<br/>
&nbsp;&nbsp;------------------------------&nbsp;ST_If<br/>
&nbsp;&nbsp;&nbsp;if&nbsp;t1&nbsp;t2&nbsp;t3&nbsp;--&gt;&nbsp;if&nbsp;t1'&nbsp;t2&nbsp;t3<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;t '--&gt;' t'" (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40).<br/>
<span class="id" title="keyword">Inductive</span> <a id="step" class="idref" href="#step"><span class="id" title="inductive">step</span></a> : <a class="idref" href="lec_11_stlc.html#tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="ST_AppAbs" class="idref" href="#ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a> : <span class="id" title="keyword">forall</span> <a id="x:17" class="idref" href="#x:17"><span class="id" title="binder">x</span></a> <a id="T2:18" class="idref" href="#T2:18"><span class="id" title="binder">T2</span></a> <a id="t1:19" class="idref" href="#t1:19"><span class="id" title="binder">t1</span></a> <a id="v2:20" class="idref" href="#v2:20"><span class="id" title="binder">v2</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#value"><span class="id" title="inductive">value</span></a> <a class="idref" href="lec_11_stlc.html#v2:20"><span class="id" title="variable">v2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x:17"><span class="id" title="variable">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a><a class="idref" href="lec_11_stlc.html#T2:18"><span class="id" title="variable">T2</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#t1:19"><span class="id" title="variable">t1</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#v2:20"><span class="id" title="variable">v2</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:::x_'--&gt;'_x"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">[</span></a><a class="idref" href="lec_11_stlc.html#x:17"><span class="id" title="variable">x</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">:=</span></a><a class="idref" href="lec_11_stlc.html#v2:20"><span class="id" title="variable">v2</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">]</span></a><a class="idref" href="lec_11_stlc.html#t1:19"><span class="id" title="variable">t1</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a><br/>
| <a id="ST_App1" class="idref" href="#ST_App1"><span class="id" title="constructor">ST_App1</span></a> : <span class="id" title="keyword">forall</span> <a id="t1:21" class="idref" href="#t1:21"><span class="id" title="binder">t1</span></a> <a id="t1':22" class="idref" href="#t1':22"><span class="id" title="binder">t1'</span></a> <a id="t2:23" class="idref" href="#t2:23"><span class="id" title="binder">t2</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#t1:21"><span class="id" title="variable">t1</span></a> <a class="idref" href="lec_11_stlc.html#:::x_'--&gt;'_x"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="lec_11_stlc.html#t1':22"><span class="id" title="variable">t1'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#t1:21"><span class="id" title="variable">t1</span></a> <a class="idref" href="lec_11_stlc.html#t2:23"><span class="id" title="variable">t2</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:::x_'--&gt;'_x"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#t1':22"><span class="id" title="variable">t1'</span></a> <a class="idref" href="lec_11_stlc.html#t2:23"><span class="id" title="variable">t2</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a><br/>
| <a id="ST_App2" class="idref" href="#ST_App2"><span class="id" title="constructor">ST_App2</span></a> : <span class="id" title="keyword">forall</span> <a id="v1:24" class="idref" href="#v1:24"><span class="id" title="binder">v1</span></a> <a id="t2:25" class="idref" href="#t2:25"><span class="id" title="binder">t2</span></a> <a id="t2':26" class="idref" href="#t2':26"><span class="id" title="binder">t2'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#value"><span class="id" title="inductive">value</span></a> <a class="idref" href="lec_11_stlc.html#v1:24"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#t2:25"><span class="id" title="variable">t2</span></a> <a class="idref" href="lec_11_stlc.html#:::x_'--&gt;'_x"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="lec_11_stlc.html#t2':26"><span class="id" title="variable">t2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#v1:24"><span class="id" title="variable">v1</span></a> <a class="idref" href="lec_11_stlc.html#t2:25"><span class="id" title="variable">t2</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:::x_'--&gt;'_x"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#v1:24"><span class="id" title="variable">v1</span></a> <a class="idref" href="lec_11_stlc.html#t2':26"><span class="id" title="variable">t2'</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a><br/>
| <a id="ST_IfTrue" class="idref" href="#ST_IfTrue"><span class="id" title="constructor">ST_IfTrue</span></a> : <span class="id" title="keyword">forall</span> <a id="t1:27" class="idref" href="#t1:27"><span class="id" title="binder">t1</span></a> <a id="t2:28" class="idref" href="#t2:28"><span class="id" title="binder">t2</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'true'"><span class="id" title="notation">true</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="lec_11_stlc.html#t1:27"><span class="id" title="variable">t1</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="lec_11_stlc.html#t2:28"><span class="id" title="variable">t2</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:::x_'--&gt;'_x"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="lec_11_stlc.html#t1:27"><span class="id" title="variable">t1</span></a><br/>
| <a id="ST_IfFalse" class="idref" href="#ST_IfFalse"><span class="id" title="constructor">ST_IfFalse</span></a> : <span class="id" title="keyword">forall</span> <a id="t1:29" class="idref" href="#t1:29"><span class="id" title="binder">t1</span></a> <a id="t2:30" class="idref" href="#t2:30"><span class="id" title="binder">t2</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'false'"><span class="id" title="notation">false</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="lec_11_stlc.html#t1:29"><span class="id" title="variable">t1</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="lec_11_stlc.html#t2:30"><span class="id" title="variable">t2</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:::x_'--&gt;'_x"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="lec_11_stlc.html#t2:30"><span class="id" title="variable">t2</span></a><br/>
| <a id="ST_If" class="idref" href="#ST_If"><span class="id" title="constructor">ST_If</span></a> : <span class="id" title="keyword">forall</span> <a id="t1:31" class="idref" href="#t1:31"><span class="id" title="binder">t1</span></a> <a id="t1':32" class="idref" href="#t1':32"><span class="id" title="binder">t1'</span></a> <a id="t2:33" class="idref" href="#t2:33"><span class="id" title="binder">t2</span></a> <a id="t3:34" class="idref" href="#t3:34"><span class="id" title="binder">t3</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#t1:31"><span class="id" title="variable">t1</span></a> <a class="idref" href="lec_11_stlc.html#:::x_'--&gt;'_x"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="lec_11_stlc.html#t1':32"><span class="id" title="variable">t1'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="lec_11_stlc.html#t1:31"><span class="id" title="variable">t1</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="lec_11_stlc.html#t2:33"><span class="id" title="variable">t2</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="lec_11_stlc.html#t3:34"><span class="id" title="variable">t3</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:::x_'--&gt;'_x"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="lec_11_stlc.html#t1':32"><span class="id" title="variable">t1'</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="lec_11_stlc.html#t2:33"><span class="id" title="variable">t2</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="lec_11_stlc.html#t3:34"><span class="id" title="variable">t3</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
<span class="id" title="keyword">where</span> <a id=":::x_'--&gt;'_x" class="idref" href="#:::x_'--&gt;'_x"><span class="id" title="notation">&quot;</span></a>t '--&gt;' t'" := (<a class="idref" href="lec_11_stlc.html#step:16"><span class="id" title="inductive">step</span></a> <span class="id" title="var">t</span> <span class="id" title="var">t'</span>).<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="lec_11_stlc.html#step"><span class="id" title="inductive">step</span></a> : <span class="id" title="var">core</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab21"></a><h3 class="section">Multi-step reduction</h3>

</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a id="multistep" class="idref" href="#multistep"><span class="id" title="abbreviation">multistep</span></a> := (<span class="id" title="inductive">multi</span> <a class="idref" href="lec_11_stlc.html#step"><span class="id" title="inductive">step</span></a>).<br/>
<span class="id" title="keyword">Notation</span> <a id="a781e4b1e2c022f0326182a9bd099911" class="idref" href="#a781e4b1e2c022f0326182a9bd099911"><span class="id" title="notation">&quot;</span></a>t1 '--&gt;*' t2" := (<a class="idref" href="lec_11_stlc.html#multistep"><span class="id" title="abbreviation">multistep</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40).<br/>

<br/>
</div>

<div class="doc">
<a id="lab22"></a><h3 class="section">Examples</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="step1" class="idref" href="#step1"><span class="id" title="lemma">step1</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'true'"><span class="id" title="notation">true</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="lec_11_stlc.html#a781e4b1e2c022f0326182a9bd099911"><span class="id" title="notation">--&gt;*</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'true'"><span class="id" title="notation">true</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">multi_step</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#v_true"><span class="id" title="constructor">v_true</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="constructor">multi_refl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> &lt;{ true }&gt; is a value.

</li>
<li> So this term intutively has a good reduction sequence.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="step2" class="idref" href="#step2"><span class="id" title="lemma">step2</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#f"><span class="id" title="definition">f</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#g"><span class="id" title="definition">g</span></a> <a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)))</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'true'"><span class="id" title="notation">true</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="lec_11_stlc.html#a781e4b1e2c022f0326182a9bd099911"><span class="id" title="notation">--&gt;*</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#f"><span class="id" title="definition">f</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#g"><span class="id" title="definition">g</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'true'"><span class="id" title="notation">true</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">multi_step</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#v_true"><span class="id" title="constructor">v_true</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="constructor">multi_refl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> &lt;{ f (g true) }&gt; is not a value and cannot be reduced anymore.

</li>
<li> So this term intutively has a bad reduction sequence.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="step3" class="idref" href="#step3"><span class="id" title="lemma">step3</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#y"><span class="id" title="definition">y</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'false'"><span class="id" title="notation">false</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="lec_11_stlc.html#a781e4b1e2c022f0326182a9bd099911"><span class="id" title="notation">--&gt;*</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">multi_step</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_App1"><span class="id" title="constructor">ST_App1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#v_abs"><span class="id" title="constructor">v_abs</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">multi_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#v_false"><span class="id" title="constructor">v_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="constructor">multi_refl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> This term could be reduced to a value.

</li>
<li> But intuitively the types are off because we are passing in
     <span class="inlinecode">(\<span class="id" title="var">x</span>:</span> <span class="inlinecode"><span class="id" title="var">Bool</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">Bool</span>)</span> for a <span class="inlinecode"><span class="id" title="var">Bool</span></span> and <span class="inlinecode"><span class="id" title="var">false</span></span> for a <span class="inlinecode"><span class="id" title="var">Bool</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">Bool</span></span>.

</li>
<li> We will see that a *type-system* will reject these terms even
     though the reduction is ok.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="step4" class="idref" href="#step4"><span class="id" title="lemma">step4</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#and"><span class="id" title="definition">and</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#not"><span class="id" title="definition">not</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'true'"><span class="id" title="notation">true</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#not"><span class="id" title="definition">not</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'false'"><span class="id" title="notation">false</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="lec_11_stlc.html#a781e4b1e2c022f0326182a9bd099911"><span class="id" title="notation">--&gt;*</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'false'"><span class="id" title="notation">false</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_11_stlc.html#and"><span class="id" title="definition">and</span></a>, <a class="idref" href="lec_11_stlc.html#not"><span class="id" title="definition">not</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">multi_step</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_App1"><span class="id" title="constructor">ST_App1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_App2"><span class="id" title="constructor">ST_App2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#v_abs"><span class="id" title="constructor">v_abs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#v_true"><span class="id" title="constructor">v_true</span></a>.<br/>
&nbsp;&nbsp;} {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">multi_step</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_App1"><span class="id" title="constructor">ST_App1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_App2"><span class="id" title="constructor">ST_App2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#v_abs"><span class="id" title="constructor">v_abs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_IfTrue"><span class="id" title="constructor">ST_IfTrue</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">multi_step</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_App1"><span class="id" title="constructor">ST_App1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#v_false"><span class="id" title="constructor">v_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">multi_step</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_App2"><span class="id" title="constructor">ST_App2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#v_abs"><span class="id" title="constructor">v_abs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#v_false"><span class="id" title="constructor">v_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">multi_step</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_App2"><span class="id" title="constructor">ST_App2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#v_abs"><span class="id" title="constructor">v_abs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_IfFalse"><span class="id" title="constructor">ST_IfFalse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">multi_step</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#v_true"><span class="id" title="constructor">v_true</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="constructor">multi_step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_IfFalse"><span class="id" title="constructor">ST_IfFalse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="constructor">multi_refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab23"></a><h3 class="section">Exercise</h3>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Try drawing the proof tree corresponding to the reduction sequence above.

</li>
<li> Imagine what the reduction sequence would look like with Church encodings!

</li>
</ul>

<div class="paragraph"> </div>

 
<div class="paragraph"> </div>

<a id="lab24"></a><h2 class="section">Typing Relation</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> We will now formalize a typing relation which will accept "good terms",
     i.e., those with "good" reduction sequences and reject "bad" terms,
     i.e., those with "bad" reduction sequences.

</li>
<li> As the examples hint at, we will reject some terms that have "good"
     reduction sequences.

</li>
<li> Similar to how we needed to define substitution for the operational
     semantics, we first need to define a *context* that will help us interpret 
     the types of lambda bindings.

</li>
</ul>
 
<div class="paragraph"> </div>

<a id="lab25"></a><h3 class="section">Context</h3>


<div class="paragraph"> </div>

<ul class="doclist">
<li> A <i>context</i> is a partial map from variables to types. This means that
     we are not required to assign every variable to a type.

</li>
<li> You may sometimes see a context can be presented as an associative list.

</li>
<li> It is typically given the name Γ (Gamma).

</li>
</ul>

<div class="paragraph"> </div>

 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="definition">partial_map</span>.<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="definition">total_map</span>.<br/>
<span class="id" title="keyword">Definition</span> <a id="context" class="idref" href="#context"><span class="id" title="definition">context</span></a> := <span class="id" title="definition">partial_map</span> <a class="idref" href="lec_11_stlc.html#ty"><span class="id" title="inductive">ty</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab26"></a><h3 class="section">Typing Judgement</h3>


<div class="paragraph"> </div>

   The typing judgement is notated Γ ⊢ t : T where
<ul class="doclist">
<li> Γ is a context

</li>
<li> the turnstyle ⊢ is common notation for "proves"

</li>
<li> t is a term

</li>
<li> T is a Type

</li>
</ul>

<div class="paragraph"> </div>

   The typing judgement Γ ⊢ t : T can be read:
   The term t can be shown to have type T under context Γ.

<div class="paragraph"> </div>

 
</div>
<div class="code">
<span class="id" title="keyword">Reserved Notation</span> &quot;Gamma '⊢' t '\in' T"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 101,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">t</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span>, <span class="id" title="var">T</span> <span class="id" title="var">custom</span> <span class="id" title="var">stlc</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>

<br/>
</div>

<div class="doc">
<a id="lab27"></a><h3 class="section">Typing Rules</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;type&nbsp;of&nbsp;a&nbsp;variable&nbsp;is&nbsp;what&nbsp;the&nbsp;context&nbsp;says&nbsp;it&nbsp;is.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ(x)&nbsp;=&nbsp;Some&nbsp;T<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------&nbsp;T_Var<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;x&nbsp;:&nbsp;T<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;under&nbsp;the&nbsp;context&nbsp;with&nbsp;x&nbsp;mapped&nbsp;to&nbsp;T2,&nbsp;t1&nbsp;can&nbsp;be&nbsp;shown&nbsp;to&nbsp;have&nbsp;type&nbsp;T1,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;the&nbsp;abstraction&nbsp;\x:&nbsp;T2,&nbsp;t1&nbsp;has&nbsp;type&nbsp;T2&nbsp;-&gt;&nbsp;T1.&nbsp;Note&nbsp;that&nbsp;t1&nbsp;is&nbsp;a&nbsp;term<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;may&nbsp;have&nbsp;x&nbsp;free.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ,&nbsp;x:&nbsp;T2&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;T1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------&nbsp;T_Abs<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;\x:&nbsp;T2,&nbsp;t1&nbsp;:&nbsp;T2&nbsp;-&gt;&nbsp;T1<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;require&nbsp;the&nbsp;abstraction's&nbsp;parameter&nbsp;type&nbsp;and&nbsp;the&nbsp;argument's&nbsp;type&nbsp;to&nbsp;match.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;T2&nbsp;-&gt;&nbsp;T1&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t2:&nbsp;T2<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------------------------------------&nbsp;T_App<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t1&nbsp;t2&nbsp;:&nbsp;T1<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------------------&nbsp;T_True<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;true&nbsp;:&nbsp;Bool<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------&nbsp;T_False<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;false&nbsp;:&nbsp;Bool<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;require&nbsp;each&nbsp;branch&nbsp;to&nbsp;have&nbsp;the&nbsp;same&nbsp;type.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;Bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t2&nbsp;:&nbsp;T1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t3&nbsp;:&nbsp;T1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--------------------------------------------------------&nbsp;T_If<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;if&nbsp;t1&nbsp;t2&nbsp;t3&nbsp;:&nbsp;T1<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="has_type" class="idref" href="#has_type"><span class="id" title="inductive">has_type</span></a> : <a class="idref" href="lec_11_stlc.html#context"><span class="id" title="definition">context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#ty"><span class="id" title="inductive">ty</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="T_Var" class="idref" href="#T_Var"><span class="id" title="constructor">T_Var</span></a> : <span class="id" title="keyword">forall</span> <a id="Gamma:37" class="idref" href="#Gamma:37"><span class="id" title="binder">Gamma</span></a> <a id="x:38" class="idref" href="#x:38"><span class="id" title="binder">x</span></a> <a id="T1:39" class="idref" href="#T1:39"><span class="id" title="binder">T1</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma:37"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#x:38"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="lec_11_stlc.html#T1:39"><span class="id" title="variable">T1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma:37"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#x:38"><span class="id" title="variable">x</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T1:39"><span class="id" title="variable">T1</span></a><br/>
&nbsp;&nbsp;| <a id="T_Abs" class="idref" href="#T_Abs"><span class="id" title="constructor">T_Abs</span></a> : <span class="id" title="keyword">forall</span> <a id="Gamma:40" class="idref" href="#Gamma:40"><span class="id" title="binder">Gamma</span></a> <a id="x:41" class="idref" href="#x:41"><span class="id" title="binder">x</span></a> <a id="T1:42" class="idref" href="#T1:42"><span class="id" title="binder">T1</span></a> <a id="T2:43" class="idref" href="#T2:43"><span class="id" title="binder">T2</span></a> <a id="t1:44" class="idref" href="#t1:44"><span class="id" title="binder">t1</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#x:41"><span class="id" title="variable">x</span></a> <span class="id" title="notation">|-&gt;</span> <a class="idref" href="lec_11_stlc.html#T2:43"><span class="id" title="variable">T2</span></a> <span class="id" title="notation">;</span> <a class="idref" href="lec_11_stlc.html#Gamma:40"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t1:44"><span class="id" title="variable">t1</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T1:42"><span class="id" title="variable">T1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma:40"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x:41"><span class="id" title="variable">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a><a class="idref" href="lec_11_stlc.html#T2:43"><span class="id" title="variable">T2</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#t1:44"><span class="id" title="variable">t1</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#T2:43"><span class="id" title="variable">T2</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#T1:42"><span class="id" title="variable">T1</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a id="T_App" class="idref" href="#T_App"><span class="id" title="constructor">T_App</span></a> : <span class="id" title="keyword">forall</span> <a id="T1:45" class="idref" href="#T1:45"><span class="id" title="binder">T1</span></a> <a id="T2:46" class="idref" href="#T2:46"><span class="id" title="binder">T2</span></a> <a id="Gamma:47" class="idref" href="#Gamma:47"><span class="id" title="binder">Gamma</span></a> <a id="t1:48" class="idref" href="#t1:48"><span class="id" title="binder">t1</span></a> <a id="t2:49" class="idref" href="#t2:49"><span class="id" title="binder">t2</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma:47"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t1:48"><span class="id" title="variable">t1</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#T2:46"><span class="id" title="variable">T2</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#T1:45"><span class="id" title="variable">T1</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma:47"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t2:49"><span class="id" title="variable">t2</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T2:46"><span class="id" title="variable">T2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma:47"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t1:48"><span class="id" title="variable">t1</span></a> <a class="idref" href="lec_11_stlc.html#t2:49"><span class="id" title="variable">t2</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T1:45"><span class="id" title="variable">T1</span></a><br/>
&nbsp;&nbsp;| <a id="T_True" class="idref" href="#T_True"><span class="id" title="constructor">T_True</span></a> : <span class="id" title="keyword">forall</span> <a id="Gamma:50" class="idref" href="#Gamma:50"><span class="id" title="binder">Gamma</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma:50"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'true'"><span class="id" title="notation">true</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><br/>
&nbsp;&nbsp;| <a id="T_False" class="idref" href="#T_False"><span class="id" title="constructor">T_False</span></a> : <span class="id" title="keyword">forall</span> <a id="Gamma:51" class="idref" href="#Gamma:51"><span class="id" title="binder">Gamma</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma:51"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'false'"><span class="id" title="notation">false</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><br/>
&nbsp;&nbsp;| <a id="T_If" class="idref" href="#T_If"><span class="id" title="constructor">T_If</span></a> : <span class="id" title="keyword">forall</span> <a id="t1:52" class="idref" href="#t1:52"><span class="id" title="binder">t1</span></a> <a id="t2:53" class="idref" href="#t2:53"><span class="id" title="binder">t2</span></a> <a id="t3:54" class="idref" href="#t3:54"><span class="id" title="binder">t3</span></a> <a id="T1:55" class="idref" href="#T1:55"><span class="id" title="binder">T1</span></a> <a id="Gamma:56" class="idref" href="#Gamma:56"><span class="id" title="binder">Gamma</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma:56"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t1:52"><span class="id" title="variable">t1</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma:56"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t2:53"><span class="id" title="variable">t2</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T1:55"><span class="id" title="variable">T1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma:56"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t3:54"><span class="id" title="variable">t3</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T1:55"><span class="id" title="variable">T1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma:56"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="lec_11_stlc.html#t1:52"><span class="id" title="variable">t1</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="lec_11_stlc.html#t2:53"><span class="id" title="variable">t2</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="lec_11_stlc.html#t3:54"><span class="id" title="variable">t3</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T1:55"><span class="id" title="variable">T1</span></a><br/>
<br/>
<span class="id" title="keyword">where</span> <a id="aa8312987d2180c84572f43708410ddc" class="idref" href="#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">&quot;</span></a>Gamma '⊢' t '\in' T" := (<a class="idref" href="lec_11_stlc.html#has_type:36"><span class="id" title="inductive">has_type</span></a> <span class="id" title="var">Gamma</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span>).<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="lec_11_stlc.html#has_type"><span class="id" title="inductive">has_type</span></a> : <span class="id" title="var">core</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab28"></a><h3 class="section">Example 1</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------&nbsp;T_Var<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x:&nbsp;Bool&nbsp;⊢&nbsp;x&nbsp;:&nbsp;Bool<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------&nbsp;T_Abs<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;⊢&nbsp;\x:Bool,&nbsp;x&nbsp;:&nbsp;(Bool&nbsp;-&gt;&nbsp;Bool)<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="typing_example_1" class="idref" href="#typing_example_1"><span class="id" title="definition">typing_example_1</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="definition">empty</span> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#T_Abs"><span class="id" title="constructor">T_Abs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#T_Var"><span class="id" title="constructor">T_Var</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab29"></a><h3 class="section">Example 2</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------&nbsp;T_Var&nbsp;&nbsp;-------------&nbsp;T_Var<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;y&nbsp;:&nbsp;Bool&nbsp;-&gt;&nbsp;Bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;x&nbsp;:&nbsp;Bool<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------&nbsp;T_Var&nbsp;&nbsp;------------------------------------------------&nbsp;T_App<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;y&nbsp;:&nbsp;Bool&nbsp;-&gt;&nbsp;Bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;y&nbsp;x&nbsp;:&nbsp;Bool<br/>
&nbsp;-------------------------------------------------------------------------------------&nbsp;T_App<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;=&nbsp;x:&nbsp;Bool,&nbsp;y:&nbsp;Bool&nbsp;-&gt;&nbsp;Bool&nbsp;⊢&nbsp;y&nbsp;(y&nbsp;x)&nbsp;:&nbsp;Bool<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------------------------------------&nbsp;T_Abs<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x:&nbsp;Bool&nbsp;⊢&nbsp;\y:Bool&nbsp;-&gt;&nbsp;Bool,&nbsp;(y&nbsp;(y&nbsp;x)&nbsp;:&nbsp;(Bool&nbsp;-&gt;&nbsp;Bool)&nbsp;-&gt;&nbsp;Bool<br/>
&nbsp;---------------------------------------------------------------------------------&nbsp;T_Abs<br/>
&nbsp;&nbsp;empty&nbsp;⊢&nbsp;\x:Bool,&nbsp;\y:Bool&nbsp;-&gt;&nbsp;Bool,&nbsp;(y&nbsp;(y&nbsp;x))&nbsp;:&nbsp;(Bool&nbsp;-&gt;&nbsp;(Bool&nbsp;-&gt;&nbsp;Bool)&nbsp;-&gt;&nbsp;Bool)<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="typing_example_2" class="idref" href="#typing_example_2"><span class="id" title="definition">typing_example_2</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="definition">empty</span> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#y"><span class="id" title="definition">y</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#y"><span class="id" title="definition">y</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#y"><span class="id" title="definition">y</span></a> <a class="idref" href="lec_11_stlc.html#x"><span class="id" title="definition">x</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">))</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#T_Abs"><span class="id" title="constructor">T_Abs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#T_Abs"><span class="id" title="constructor">T_Abs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_11_stlc.html#T_App"><span class="id" title="constructor">T_App</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#T_Var"><span class="id" title="constructor">T_Var</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">update_eq</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="lec_11_stlc.html#T_App"><span class="id" title="constructor">T_App</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#T_Var"><span class="id" title="constructor">T_Var</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">update_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#T_Var"><span class="id" title="constructor">T_Var</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">update_neq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Contra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">discriminate</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab30"></a><h3 class="section">Not Complete 1</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;--------------------------------------------&nbsp;??<br/>
&nbsp;&nbsp;empty&nbsp;⊢&nbsp;if&nbsp;true&nbsp;(\x:&nbsp;Bool,&nbsp;x)&nbsp;true&nbsp;:&nbsp;?<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab31"></a><h3 class="section">Not Complete 2</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;----------------------------------------------------------&nbsp;??<br/>
&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;⊢&nbsp;if&nbsp;true&nbsp;(\x:&nbsp;Bool,&nbsp;x)&nbsp;(true&nbsp;(\x:&nbsp;Bool,&nbsp;x))&nbsp;:&nbsp;?<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab32"></a><h2 class="section">Type Soundness</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> We will now prove a type-soundness result.

</li>
<li> In words, a well-typed term does not get stuck.

</li>
<li> <i>well-typed</i> means that a term can be assigned a type according to 
    the typing relation.

</li>
<li> <i>not stuck</i> means that every term reduces to a value with the
    appropriate type.

</li>
<li> The proof proceeds in two major steps: <i>progress</i> and <i>preservation</i>.

</li>
<li> The basic idea of *progress* is that either we have reached a value
     (no more computation) or we can take a step.

</li>
<li> The basic idea of <i>preservation</i> is that taking a step does not change
    the type of a term.

</li>
<li> By interweaving <i>progress</i> and <i>preservation</i>, we will get that
    we eventually hit a value of the appropriate type.

</li>
<li> This leads us to a few <i>canonical forms</i> lemmas.

</li>
</ul>

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="canonical_forms_bool" class="idref" href="#canonical_forms_bool"><span class="id" title="lemma">canonical_forms_bool</span></a> : <span class="id" title="keyword">forall</span> <a id="t:57" class="idref" href="#t:57"><span class="id" title="binder">t</span></a>,<br/>
&nbsp;&nbsp;<span class="id" title="definition">empty</span> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t:57"><span class="id" title="variable">t</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::'Bool'"><span class="id" title="notation">Bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#value"><span class="id" title="inductive">value</span></a> <a class="idref" href="lec_11_stlc.html#t:57"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#t:57"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'true'"><span class="id" title="notation">true</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#t:57"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'false'"><span class="id" title="notation">false</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">HT</span> <span class="id" title="var">HVal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HVal</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HT</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="canonical_forms_fun" class="idref" href="#canonical_forms_fun"><span class="id" title="lemma">canonical_forms_fun</span></a> : <span class="id" title="keyword">forall</span> <a id="t:58" class="idref" href="#t:58"><span class="id" title="binder">t</span></a> <a id="T1:59" class="idref" href="#T1:59"><span class="id" title="binder">T1</span></a> <a id="T2:60" class="idref" href="#T2:60"><span class="id" title="binder">T2</span></a>,<br/>
&nbsp;&nbsp;<span class="id" title="definition">empty</span> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t:58"><span class="id" title="variable">t</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">(</span></a><a class="idref" href="lec_11_stlc.html#T2:60"><span class="id" title="variable">T2</span></a> <a class="idref" href="lec_11_stlc.html#:stlc::x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="lec_11_stlc.html#T1:59"><span class="id" title="variable">T1</span></a><a class="idref" href="lec_11_stlc.html#b1345b4aefd9f042fe48f55d08e97df9"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#value"><span class="id" title="inductive">value</span></a> <a class="idref" href="lec_11_stlc.html#t:58"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="x:61" class="idref" href="#x:61"><span class="id" title="binder">x</span></a> <a id="u:62" class="idref" href="#u:62"><span class="id" title="binder">u</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#t:58"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#x:61"><span class="id" title="variable">x</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">:</span></a><a class="idref" href="lec_11_stlc.html#T2:60"><span class="id" title="variable">T2</span></a><a class="idref" href="lec_11_stlc.html#c7ca0fe7e4f2c0ef6d6958a5dc4283b7"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#u:62"><span class="id" title="variable">u</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span> <span class="id" title="var">HT</span> <span class="id" title="var">HVal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HVal</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">HT</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x0</span>, <span class="id" title="var">t1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab33"></a><h2 class="section">Progress</h2>

<div class="paragraph"> </div>

<a id="lab34"></a><h3 class="section">Proving Progress</h3>


<div class="paragraph"> </div>

<ul class="doclist">
<li> We prove progress now.

</li>
<li> We have two inductive relations that we can induct on.

</li>
<li> Either the derivation of the typing judgement or the term.

</li>
<li> It turns out in this case it is possible to induct on either terms
     or the typing judgement.

</li>
</ul>

<div class="paragraph"> </div>

 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a id="progress" class="idref" href="#progress"><span class="id" title="lemma">progress</span></a> : <span class="id" title="keyword">forall</span> <a id="t:63" class="idref" href="#t:63"><span class="id" title="binder">t</span></a> <a id="T:64" class="idref" href="#T:64"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;<span class="id" title="definition">empty</span> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t:63"><span class="id" title="variable">t</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T:64"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#value"><span class="id" title="inductive">value</span></a> <a class="idref" href="lec_11_stlc.html#t:63"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="t':65" class="idref" href="#t':65"><span class="id" title="binder">t'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#t:63"><span class="id" title="variable">t</span></a> <a class="idref" href="lec_11_stlc.html#:::x_'--&gt;'_x"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="lec_11_stlc.html#t':65"><span class="id" title="variable">t'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;proceed&nbsp;by&nbsp;induction&nbsp;on&nbsp;the&nbsp;typing&nbsp;derivation&nbsp;Γ&nbsp;⊢&nbsp;t&nbsp;:&nbsp;T.&nbsp;<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> <span class="id" title="definition">empty</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Gamma</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Ht</span>.<br/>

<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty(x)&nbsp;=&nbsp;Some&nbsp;T<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------&nbsp;T_Var<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;⊢&nbsp;x&nbsp;:&nbsp;T<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;show&nbsp;that&nbsp;this&nbsp;case&nbsp;is&nbsp;impossible.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;particular,&nbsp;observe&nbsp;that&nbsp;we&nbsp;have&nbsp;that&nbsp;empty(x)&nbsp;=&nbsp;Some&nbsp;T&nbsp;which&nbsp;is&nbsp;impossible.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">Gamma</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty,&nbsp;x:&nbsp;T2&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;T1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------&nbsp;T_Abs<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;⊢&nbsp;\x:&nbsp;T2,&nbsp;t1&nbsp;:&nbsp;T2&nbsp;-&gt;&nbsp;T1<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;either&nbsp;value&nbsp;(\x:&nbsp;T2,&nbsp;t1)&nbsp;or&nbsp;exists&nbsp;t',&nbsp;\x:&nbsp;T2,&nbsp;t1&nbsp;--&gt;&nbsp;t'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;choose&nbsp;to&nbsp;show&nbsp;that&nbsp;value&nbsp;(\x:&nbsp;T2,&nbsp;t1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;follows&nbsp;because&nbsp;we&nbsp;can&nbsp;derive&nbsp;value&nbsp;(\x:&nbsp;T2,&nbsp;t1)&nbsp;with&nbsp;v_abs.&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">Gamma</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#v_abs"><span class="id" title="constructor">v_abs</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;T2&nbsp;-&gt;&nbsp;T1&nbsp;&nbsp;&nbsp;empty&nbsp;⊢&nbsp;t2:&nbsp;T2<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------------------------------------&nbsp;T_App<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;⊢&nbsp;t1&nbsp;t2&nbsp;:&nbsp;T1<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;either&nbsp;value&nbsp;(t1&nbsp;t2)&nbsp;or&nbsp;exists&nbsp;t',&nbsp;t1&nbsp;t2&nbsp;--&gt;&nbsp;t'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;choose&nbsp;to&nbsp;show&nbsp;that&nbsp;exists&nbsp;t',&nbsp;t1&nbsp;t2&nbsp;--&gt;&nbsp;t'&nbsp;(it's&nbsp;definitely&nbsp;not&nbsp;a&nbsp;value).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;two&nbsp;inductive&nbsp;hypotheses.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IHHt1:&nbsp;empty&nbsp;=&nbsp;empty&nbsp;-&gt;&nbsp;(value&nbsp;t1&nbsp;\/&nbsp;(exists&nbsp;t'&nbsp;:&nbsp;tm,&nbsp;t1&nbsp;--&gt;&nbsp;t'))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IHHt2:&nbsp;empty&nbsp;=&nbsp;empty&nbsp;-&gt;&nbsp;(value&nbsp;t2&nbsp;\/&nbsp;(exists&nbsp;t'&nbsp;:&nbsp;tm,&nbsp;t2&nbsp;--&gt;&nbsp;t'))<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clearly,&nbsp;empty&nbsp;=&nbsp;empty,&nbsp;so&nbsp;our&nbsp;inductive&nbsp;hypotheses&nbsp;simplify&nbsp;to<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IHHt1:&nbsp;value&nbsp;t1&nbsp;\/&nbsp;(exists&nbsp;t'&nbsp;:&nbsp;tm,&nbsp;t1&nbsp;--&gt;&nbsp;t')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IHHt2:&nbsp;value&nbsp;t2&nbsp;\/&nbsp;(exists&nbsp;t'&nbsp;:&nbsp;tm,&nbsp;t2&nbsp;--&gt;&nbsp;t')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Gamma</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">Gamma</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HTriv</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">Gamma</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHt1</span> <span class="id" title="var">HTriv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHt2</span> <span class="id" title="var">HTriv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">HTriv</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;proceed&nbsp;by&nbsp;case&nbsp;analysis&nbsp;on&nbsp;IHHt1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case&nbsp;value&nbsp;t1:&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;proceed&nbsp;by&nbsp;case&nbsp;analysis&nbsp;on&nbsp;IHHt2.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case&nbsp;value&nbsp;t2:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recall&nbsp;that&nbsp;we&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;exists&nbsp;t',&nbsp;t1&nbsp;t2&nbsp;--&gt;&nbsp;t'.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;that&nbsp;empty&nbsp;⊢&nbsp;t1&nbsp;\in&nbsp;(T2&nbsp;-&gt;&nbsp;T1)&nbsp;from&nbsp;the&nbsp;induction&nbsp;on&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typing&nbsp;derivation.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;also&nbsp;have&nbsp;that&nbsp;t1&nbsp;=&nbsp;\x:&nbsp;T2,&nbsp;t0&nbsp;by&nbsp;canoncial&nbsp;forms&nbsp;of&nbsp;arrow<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;types&nbsp;for&nbsp;some&nbsp;variable&nbsp;x&nbsp;and&nbsp;term&nbsp;t0.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thus&nbsp;we&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;exists&nbsp;t',&nbsp;(\x:&nbsp;T2,&nbsp;t0)&nbsp;t2&nbsp;--&gt;&nbsp;t'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;claim&nbsp;that&nbsp;t'&nbsp;=&nbsp;<span class="inlinecode"><span class="id" title="var">x</span>:=<span class="id" title="var">t2</span></span>&nbsp;t0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thus&nbsp;we&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;(\x:&nbsp;T2,&nbsp;t0)&nbsp;t2&nbsp;--&gt;&nbsp;<span class="inlinecode"><span class="id" title="var">x</span>:=<span class="id" title="var">t2</span></span>&nbsp;t0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;the&nbsp;rule&nbsp;for&nbsp;ST_AppAbs&nbsp;where&nbsp;we&nbsp;use&nbsp;that&nbsp;value&nbsp;t2.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case&nbsp;exists&nbsp;t'&nbsp;:&nbsp;tm,&nbsp;t2&nbsp;--&gt;&nbsp;t':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recall&nbsp;that&nbsp;we&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;exists&nbsp;t',&nbsp;t1&nbsp;t2&nbsp;--&gt;&nbsp;t'.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;that&nbsp;t2&nbsp;--&gt;&nbsp;t2'&nbsp;for&nbsp;some&nbsp;t2'&nbsp;by&nbsp;assumption.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;claim&nbsp;that&nbsp;t'&nbsp;=&nbsp;t1&nbsp;t2'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thus&nbsp;we&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;t1&nbsp;t2&nbsp;--&gt;&nbsp;t1&nbsp;t2'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;the&nbsp;rule&nbsp;for&nbsp;ST_App2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="lec_11_stlc.html#canonical_forms_fun"><span class="id" title="lemma">canonical_forms_fun</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ht1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> [<span class="id" title="var">t0</span> <span class="id" title="var">H1</span>]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">:=</span></a><span class="id" title="var">t2</span><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">]</span></a> <span class="id" title="var">t0</span> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_AppAbs"><span class="id" title="constructor">ST_AppAbs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t2'</span> <span class="id" title="var">Hstp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><span class="id" title="var">t1</span> <span class="id" title="var">t2'</span><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_App2"><span class="id" title="constructor">ST_App2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case&nbsp;exists&nbsp;t'&nbsp;:&nbsp;tm,&nbsp;t1&nbsp;--&gt;&nbsp;t':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recall&nbsp;that&nbsp;we&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;exists&nbsp;t',&nbsp;t1&nbsp;t2&nbsp;--&gt;&nbsp;t'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;that&nbsp;t1&nbsp;--&gt;&nbsp;t1'&nbsp;for&nbsp;some&nbsp;t1'&nbsp;by&nbsp;assumption.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;claim&nbsp;that&nbsp;t'&nbsp;=&nbsp;t1'&nbsp;t2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thus&nbsp;we&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;t1'&nbsp;t2&nbsp;--&gt;&nbsp;t1&nbsp;t2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;exactly&nbsp;the&nbsp;rule&nbsp;for&nbsp;ST_App1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t1'</span> <span class="id" title="var">Hstp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><span class="id" title="var">t1'</span> <span class="id" title="var">t2</span><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_App1"><span class="id" title="constructor">ST_App1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------------------&nbsp;T_True<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;⊢&nbsp;true&nbsp;:&nbsp;Bool<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;either&nbsp;value&nbsp;true&nbsp;or&nbsp;exists&nbsp;t',&nbsp;true&nbsp;--&gt;&nbsp;t'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;choose&nbsp;to&nbsp;show&nbsp;that&nbsp;value&nbsp;true.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;can&nbsp;be&nbsp;constructed&nbsp;with&nbsp;an&nbsp;application&nbsp;of&nbsp;v_true.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#v_true"><span class="id" title="constructor">v_true</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------------------&nbsp;T_False<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;⊢&nbsp;false&nbsp;:&nbsp;Bool<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;either&nbsp;value&nbsp;false&nbsp;or&nbsp;exists&nbsp;t',&nbsp;false&nbsp;--&gt;&nbsp;t'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;choose&nbsp;to&nbsp;show&nbsp;that&nbsp;value&nbsp;false.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;can&nbsp;be&nbsp;constructed&nbsp;with&nbsp;an&nbsp;application&nbsp;of&nbsp;v_false.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#v_false"><span class="id" title="constructor">v_false</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;Bool&nbsp;&nbsp;&nbsp;empty&nbsp;⊢&nbsp;t2&nbsp;:&nbsp;T1&nbsp;&nbsp;empty&nbsp;⊢&nbsp;t3&nbsp;:&nbsp;T1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--------------------------------------------------------&nbsp;T_If<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;⊢&nbsp;if&nbsp;t1&nbsp;t2&nbsp;t3&nbsp;:&nbsp;T1<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;either&nbsp;value&nbsp;(if&nbsp;t1&nbsp;t2&nbsp;t3)&nbsp;or&nbsp;exists&nbsp;t',&nbsp;if&nbsp;t1&nbsp;t2&nbsp;t3&nbsp;--&gt;&nbsp;t'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;choose&nbsp;to&nbsp;show&nbsp;that&nbsp;exists&nbsp;t',&nbsp;if&nbsp;t1&nbsp;t2&nbsp;t3&nbsp;--&gt;&nbsp;t'&nbsp;(it's&nbsp;definitely&nbsp;not&nbsp;a&nbsp;value).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;three&nbsp;inductive&nbsp;hypotheses.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IHHt1:&nbsp;empty&nbsp;=&nbsp;empty&nbsp;-&gt;&nbsp;(value&nbsp;t1&nbsp;\/&nbsp;(exists&nbsp;t'&nbsp;:&nbsp;tm,&nbsp;t1&nbsp;--&gt;&nbsp;t'))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IHHt2:&nbsp;empty&nbsp;=&nbsp;empty&nbsp;-&gt;&nbsp;(value&nbsp;t2&nbsp;\/&nbsp;(exists&nbsp;t'&nbsp;:&nbsp;tm,&nbsp;t2&nbsp;--&gt;&nbsp;t'))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IHHt3:&nbsp;empty&nbsp;=&nbsp;empty&nbsp;-&gt;&nbsp;(value&nbsp;t3&nbsp;\/&nbsp;(exists&nbsp;t'&nbsp;:&nbsp;tm,&nbsp;t3&nbsp;--&gt;&nbsp;t'))<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clearly,&nbsp;empty&nbsp;=&nbsp;empty,&nbsp;so&nbsp;our&nbsp;inductive&nbsp;hypotheses&nbsp;simplify&nbsp;to<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IHHt1:&nbsp;value&nbsp;t1&nbsp;\/&nbsp;(exists&nbsp;t'&nbsp;:&nbsp;tm,&nbsp;t1&nbsp;--&gt;&nbsp;t')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IHHt2:&nbsp;value&nbsp;t2&nbsp;\/&nbsp;(exists&nbsp;t'&nbsp;:&nbsp;tm,&nbsp;t2&nbsp;--&gt;&nbsp;t')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IHHt3:&nbsp;value&nbsp;t3&nbsp;\/&nbsp;(exists&nbsp;t'&nbsp;:&nbsp;tm,&nbsp;t3&nbsp;--&gt;&nbsp;t')<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Gamma</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">Gamma</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HTriv</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">Gamma</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHt1</span> <span class="id" title="var">HTriv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHt2</span> <span class="id" title="var">HTriv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHHt3</span> <span class="id" title="var">HTriv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">HTriv</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;proceed&nbsp;by&nbsp;case&nbsp;analysis&nbsp;on&nbsp;IHHt1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHHt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case&nbsp;value&nbsp;t1:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;that&nbsp;empty&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;Bool&nbsp;from&nbsp;our&nbsp;induction&nbsp;on&nbsp;the&nbsp;typing&nbsp;derivation.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thus&nbsp;t1&nbsp;=&nbsp;true&nbsp;or&nbsp;t1&nbsp;=&nbsp;false&nbsp;by&nbsp;canonical&nbsp;forms&nbsp;on&nbsp;booleans.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;proceed&nbsp;by&nbsp;case&nbsp;analysis.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">t1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'true'"><span class="id" title="notation">true</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="var">t1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'false'"><span class="id" title="notation">false</span></a><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">HTorF</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#canonical_forms_bool"><span class="id" title="lemma">canonical_forms_bool</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HTorF</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case&nbsp;t1&nbsp;=&nbsp;true:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recall&nbsp;that&nbsp;we&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;exists&nbsp;t',&nbsp;if&nbsp;t1&nbsp;t2&nbsp;t3&nbsp;--&gt;&nbsp;t'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;claim&nbsp;that&nbsp;t1'&nbsp;=&nbsp;t2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;that&nbsp;if&nbsp;true&nbsp;t2&nbsp;t3&nbsp;--&gt;&nbsp;t2&nbsp;by&nbsp;ST_IfTrue.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_IfTrue"><span class="id" title="constructor">ST_IfTrue</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case&nbsp;t1&nbsp;=&nbsp;false:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recall&nbsp;that&nbsp;we&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;exists&nbsp;t',&nbsp;if&nbsp;t1&nbsp;t2&nbsp;t3&nbsp;--&gt;&nbsp;t'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;claim&nbsp;that&nbsp;t1'&nbsp;=&nbsp;t2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;that&nbsp;if&nbsp;true&nbsp;t2&nbsp;t3&nbsp;--&gt;&nbsp;t2&nbsp;by&nbsp;ST_IfTrue.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">t3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_IfFalse"><span class="id" title="constructor">ST_IfFalse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case&nbsp;exists&nbsp;t'&nbsp;:&nbsp;tm,&nbsp;t1&nbsp;--&gt;&nbsp;t':<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;that&nbsp;t1&nbsp;--&gt;&nbsp;t1'&nbsp;for&nbsp;some&nbsp;t1'&nbsp;by&nbsp;assumption.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recall&nbsp;that&nbsp;we&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;exists&nbsp;t',&nbsp;if&nbsp;t1&nbsp;t2&nbsp;t3&nbsp;--&gt;&nbsp;t'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;claim&nbsp;that&nbsp;t'&nbsp;=&nbsp;if&nbsp;t1'&nbsp;t2&nbsp;t3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;that&nbsp;if&nbsp;t1&nbsp;t2&nbsp;t3&nbsp;--&gt;&nbsp;if&nbsp;t1'&nbsp;t2&nbsp;t3&nbsp;by&nbsp;ST_If.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t1'</span> <span class="id" title="var">Hstp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <span class="id" title="var">t1'</span> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <span class="id" title="var">t2</span> <a class="idref" href="lec_11_stlc.html#:stlc::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <span class="id" title="var">t3</span><a class="idref" href="lec_11_stlc.html#96e24cc1b3765f349012b832d1dd22ad"><span class="id" title="notation">}&gt;</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#ST_If"><span class="id" title="constructor">ST_If</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab35"></a><h2 class="section">Preservation</h2>

<div class="paragraph"> </div>

<a id="lab36"></a><h3 class="section">Non-empty contexts</h3>


<div class="paragraph"> </div>

<ul class="doclist">
<li> You may have noticed that the proof of progress assumed an
     empty context.

</li>
<li> The proof of preservation will require us to work with
     non-empty contexts.

</li>
<li> We need a few extra lemmas on contexts.

</li>
<li> First, let's start with a theorem that illustrates more
     the idea of inducting on typing derivations but with
     non-empty contexts.

</li>
</ul>

<div class="paragraph"> </div>

 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a id="unique_types" class="idref" href="#unique_types"><span class="id" title="lemma">unique_types</span></a> : <span class="id" title="keyword">forall</span> <a id="Gamma:66" class="idref" href="#Gamma:66"><span class="id" title="binder">Gamma</span></a> <a id="e:67" class="idref" href="#e:67"><span class="id" title="binder">e</span></a> <a id="T:68" class="idref" href="#T:68"><span class="id" title="binder">T</span></a> <a id="T':69" class="idref" href="#T':69"><span class="id" title="binder">T'</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma:66"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#e:67"><span class="id" title="variable">e</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T:68"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma:66"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#e:67"><span class="id" title="variable">e</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T':69"><span class="id" title="variable">T'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#T:68"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="lec_11_stlc.html#T':69"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">e</span> <span class="id" title="var">T</span> <span class="id" title="var">T'</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">T'</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By&nbsp;induction&nbsp;on&nbsp;the&nbsp;typing&nbsp;derivation&nbsp;Γ&nbsp;⊢&nbsp;t&nbsp;:&nbsp;T.&nbsp;<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">T'</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ(x)&nbsp;=&nbsp;Some&nbsp;T<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------&nbsp;T_Var<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;x&nbsp;:&nbsp;T<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;T&nbsp;=&nbsp;T'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By&nbsp;inversion&nbsp;on&nbsp;Γ&nbsp;⊢&nbsp;x&nbsp;:&nbsp;T',&nbsp;we&nbsp;have&nbsp;that&nbsp;Γ(x)&nbsp;=&nbsp;T'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Since&nbsp;Γ(x)&nbsp;=&nbsp;T&nbsp;as&nbsp;well,&nbsp;we&nbsp;have&nbsp;that&nbsp;T&nbsp;=&nbsp;T'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ,&nbsp;x:&nbsp;T2&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;T1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------&nbsp;T_Abs<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;\x:&nbsp;T2,&nbsp;t1&nbsp;:&nbsp;T2&nbsp;-&gt;&nbsp;T1<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;T2'&nbsp;-&gt;&nbsp;T1'&nbsp;=&nbsp;T2&nbsp;-&gt;&nbsp;T1&nbsp;whenever&nbsp;Γ&nbsp;⊢&nbsp;\x:&nbsp;T2',&nbsp;t1&nbsp;:&nbsp;T2'&nbsp;-&gt;&nbsp;T1'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By&nbsp;inversion&nbsp;on&nbsp;Γ&nbsp;⊢&nbsp;\x:&nbsp;T2',&nbsp;t1&nbsp;:&nbsp;T2'&nbsp;-&gt;&nbsp;T1',&nbsp;we&nbsp;have&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ,&nbsp;x:&nbsp;T2'&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;T2'&nbsp;-&gt;&nbsp;T1'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Moreover,&nbsp;by&nbsp;our&nbsp;inductive&nbsp;hypothesis,&nbsp;we&nbsp;obtain&nbsp;that&nbsp;T2'&nbsp;-&gt;&nbsp;T1'&nbsp;=&nbsp;T2&nbsp;-&gt;&nbsp;T1,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;is&nbsp;what&nbsp;we&nbsp;wanted&nbsp;to&nbsp;show.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHhas_type</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;T2&nbsp;-&gt;&nbsp;T1&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t2:&nbsp;T2<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------------------------------------&nbsp;T_App<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t1&nbsp;t2&nbsp;:&nbsp;T1<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;T1&nbsp;=&nbsp;T1'&nbsp;if&nbsp;Γ&nbsp;⊢&nbsp;t1&nbsp;t2:&nbsp;T1'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By&nbsp;inversion&nbsp;on&nbsp;Γ&nbsp;⊢&nbsp;t1&nbsp;t2:&nbsp;T1',&nbsp;we&nbsp;have&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t2:&nbsp;T2'&nbsp;and&nbsp;Γ&nbsp;⊢&nbsp;t1:&nbsp;T2'&nbsp;-&gt;&nbsp;T1'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By&nbsp;our&nbsp;inductive&nbsp;hypothesis,&nbsp;we&nbsp;have&nbsp;that&nbsp;T2'&nbsp;-&gt;&nbsp;T1'&nbsp;=&nbsp;T2&nbsp;-&gt;&nbsp;T1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thus&nbsp;the&nbsp;result&nbsp;follows.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHhas_type1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------------------&nbsp;T_True<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;true&nbsp;:&nbsp;Bool<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By&nbsp;inversion&nbsp;on&nbsp;Γ&nbsp;⊢&nbsp;true&nbsp;:&nbsp;Bool,&nbsp;we&nbsp;have&nbsp;that&nbsp;Bool&nbsp;=&nbsp;Bool.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------------------&nbsp;T_False<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;false&nbsp;:&nbsp;Bool<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By&nbsp;inversion&nbsp;on&nbsp;Γ&nbsp;⊢&nbsp;false&nbsp;:&nbsp;Bool,&nbsp;we&nbsp;have&nbsp;that&nbsp;Bool&nbsp;=&nbsp;Bool.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHhas_type2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="definition">inclusion</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="weakening" class="idref" href="#weakening"><span class="id" title="lemma">weakening</span></a> : <span class="id" title="keyword">forall</span> <a id="Gamma:70" class="idref" href="#Gamma:70"><span class="id" title="binder">Gamma</span></a> <a id="Gamma':71" class="idref" href="#Gamma':71"><span class="id" title="binder">Gamma'</span></a> <a id="t:72" class="idref" href="#t:72"><span class="id" title="binder">t</span></a> <a id="T:73" class="idref" href="#T:73"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;<span class="id" title="definition">inclusion</span> <a class="idref" href="lec_11_stlc.html#Gamma:70"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#Gamma':71"><span class="id" title="variable">Gamma'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma:70"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t:72"><span class="id" title="variable">t</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T:73"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma':71"><span class="id" title="variable">Gamma'</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t:72"><span class="id" title="variable">t</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T:73"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">Gamma'</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span> <span class="id" title="var">H</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">Gamma'</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By&nbsp;induction&nbsp;on&nbsp;the&nbsp;typing&nbsp;derivation&nbsp;Γ&nbsp;⊢&nbsp;t&nbsp;:&nbsp;T.&nbsp;<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Ht</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ(x)&nbsp;=&nbsp;Some&nbsp;T<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------&nbsp;T_Var<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;x&nbsp;:&nbsp;T<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;Γ'&nbsp;⊢&nbsp;x&nbsp;:&nbsp;T.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;suffices&nbsp;to&nbsp;show&nbsp;that&nbsp;Γ'(x)&nbsp;=&nbsp;T&nbsp;by&nbsp;T_Var.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By&nbsp;assumption,&nbsp;we&nbsp;have&nbsp;that&nbsp;Γ&nbsp;⊢&nbsp;x&nbsp;:&nbsp;T&nbsp;and&nbsp;Γ'&nbsp;extends&nbsp;Γ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By&nbsp;inversion&nbsp;on&nbsp;Γ&nbsp;⊢&nbsp;x&nbsp;:&nbsp;T,&nbsp;we&nbsp;have&nbsp;that&nbsp;Γ(x)&nbsp;=&nbsp;T.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Since&nbsp;Γ'&nbsp;extends&nbsp;Γ,&nbsp;we&nbsp;clearly&nbsp;have&nbsp;Γ'(x)&nbsp;=&nbsp;T&nbsp;as&nbsp;well.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#T_Var"><span class="id" title="constructor">T_Var</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">inclusion</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ,&nbsp;x:&nbsp;T2&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;T1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------&nbsp;T_Abs<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;\x:&nbsp;T2,&nbsp;t1&nbsp;:&nbsp;T2&nbsp;-&gt;&nbsp;T1<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;Γ'&nbsp;⊢&nbsp;\x:&nbsp;T2,&nbsp;t1:&nbsp;T2&nbsp;-&gt;&nbsp;T1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;suffices&nbsp;to&nbsp;show&nbsp;that&nbsp;Γ',&nbsp;x:&nbsp;T2&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;T1&nbsp;by&nbsp;T_Abs.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Our&nbsp;inductive&nbsp;hypothesis&nbsp;states:<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inclusion&nbsp;Γ&nbsp;Γ'&nbsp;and&nbsp;Γ,&nbsp;x:&nbsp;T2&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;T1&nbsp;implies&nbsp;that&nbsp;Γ',&nbsp;x:&nbsp;T2&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;T1.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thus&nbsp;it&nbsp;suffices&nbsp;to&nbsp;show&nbsp;that&nbsp;inclusion&nbsp;(Γ,&nbsp;x:&nbsp;T2)&nbsp;(Γ',&nbsp;x:&nbsp;T2)&nbsp;and<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ,&nbsp;x:&nbsp;T2&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;T1&nbsp;by&nbsp;our&nbsp;inductive&nbsp;hypothesis.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;first&nbsp;requirement&nbsp;follows&nbsp;by&nbsp;inclusion_update.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;second&nbsp;requirement&nbsp;follows&nbsp;by&nbsp;assumption.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#T_Abs"><span class="id" title="constructor">T_Abs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHHt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">inclusion_update</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;T2&nbsp;-&gt;&nbsp;T1&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t2:&nbsp;T2<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------------------------------------&nbsp;T_App<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t1&nbsp;t2&nbsp;:&nbsp;T1<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;Γ'&nbsp;⊢&nbsp;t1&nbsp;t2:&nbsp;T1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;suffices&nbsp;to&nbsp;show&nbsp;that&nbsp;Γ'&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;T2&nbsp;-&gt;&nbsp;T1&nbsp;and&nbsp;Γ'&nbsp;⊢&nbsp;t2:&nbsp;T1&nbsp;by&nbsp;T_App.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;two&nbsp;inductive&nbsp;hypotheses:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IHHt1:&nbsp;inclusion&nbsp;Γ&nbsp;Γ'&nbsp;and&nbsp;Γ&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;T2&nbsp;-&gt;&nbsp;T1&nbsp;implies&nbsp;that&nbsp;Γ'&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;T2&nbsp;-&gt;&nbsp;T1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IHHt2:&nbsp;inclusion&nbsp;Γ&nbsp;Γ'&nbsp;and&nbsp;Γ&nbsp;⊢&nbsp;t2&nbsp;:&nbsp;T2&nbsp;implies&nbsp;that&nbsp;Γ'&nbsp;⊢&nbsp;t2&nbsp;:&nbsp;T2.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;Γ'&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;T2&nbsp;-&gt;&nbsp;T1&nbsp;by&nbsp;IHHt1&nbsp;and&nbsp;assumption&nbsp;that&nbsp;Γ'&nbsp;extends&nbsp;Γ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;Γ'&nbsp;⊢&nbsp;t2&nbsp;:&nbsp;T2&nbsp;by&nbsp;IHHt2&nbsp;and&nbsp;assumption&nbsp;that&nbsp;Γ'&nbsp;extends&nbsp;Γ.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_11_stlc.html#T_App"><span class="id" title="constructor">T_App</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------------------&nbsp;T_True<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;true&nbsp;:&nbsp;Bool<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;rule&nbsp;T_True&nbsp;can&nbsp;be&nbsp;applied&nbsp;in&nbsp;any&nbsp;context.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#T_True"><span class="id" title="constructor">T_True</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------------------&nbsp;T_False<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;false&nbsp;:&nbsp;Bool<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;rule&nbsp;T_False&nbsp;can&nbsp;be&nbsp;applied&nbsp;in&nbsp;any&nbsp;context.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#T_False"><span class="id" title="constructor">T_False</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;Bool&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t2&nbsp;:&nbsp;T1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t3&nbsp;:&nbsp;T1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--------------------------------------------------------&nbsp;T_If<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;if&nbsp;t1&nbsp;t2&nbsp;t3&nbsp;:&nbsp;T1<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;Γ'&nbsp;⊢&nbsp;if&nbsp;t1&nbsp;t2&nbsp;t3:&nbsp;T1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;suffices&nbsp;to&nbsp;show&nbsp;that&nbsp;Γ'&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;Bool,&nbsp;Γ'&nbsp;⊢&nbsp;t2:&nbsp;T1,&nbsp;and&nbsp;Γ'&nbsp;⊢&nbsp;t3:&nbsp;T1&nbsp;by&nbsp;T_If.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;three&nbsp;inductive&nbsp;hypotheses:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IHHt1:&nbsp;inclusion&nbsp;Γ&nbsp;Γ'&nbsp;and&nbsp;Γ&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;Bool&nbsp;implies&nbsp;that&nbsp;Γ'&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;Bool.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IHHt2:&nbsp;inclusion&nbsp;Γ&nbsp;Γ'&nbsp;and&nbsp;Γ&nbsp;⊢&nbsp;t2&nbsp;:&nbsp;T1&nbsp;implies&nbsp;that&nbsp;Γ'&nbsp;⊢&nbsp;t2&nbsp;:&nbsp;T1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IHHt3:&nbsp;inclusion&nbsp;Γ&nbsp;Γ'&nbsp;and&nbsp;Γ&nbsp;⊢&nbsp;t3&nbsp;:&nbsp;T1&nbsp;implies&nbsp;that&nbsp;Γ'&nbsp;⊢&nbsp;t2&nbsp;:&nbsp;T1.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;Γ'&nbsp;⊢&nbsp;t1&nbsp;:&nbsp;Bool&nbsp;by&nbsp;IHHt1&nbsp;and&nbsp;assumption&nbsp;that&nbsp;Γ'&nbsp;extends&nbsp;Γ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;Γ'&nbsp;⊢&nbsp;t2&nbsp;:&nbsp;T1&nbsp;by&nbsp;IHHt2&nbsp;and&nbsp;assumption&nbsp;that&nbsp;Γ'&nbsp;extends&nbsp;Γ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;Γ'&nbsp;⊢&nbsp;t3&nbsp;:&nbsp;T1&nbsp;by&nbsp;IHHt3&nbsp;and&nbsp;assumption&nbsp;that&nbsp;Γ'&nbsp;extends&nbsp;Γ.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_11_stlc.html#T_If"><span class="id" title="constructor">T_If</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHt3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> Here's a simple consequence of weakening.

</li>
</ul>
 
</div>
<div class="code">
<span class="id" title="keyword">Corollary</span> <a id="weakening_empty" class="idref" href="#weakening_empty"><span class="id" title="lemma">weakening_empty</span></a> : <span class="id" title="keyword">forall</span> <a id="Gamma:74" class="idref" href="#Gamma:74"><span class="id" title="binder">Gamma</span></a> <a id="t:75" class="idref" href="#t:75"><span class="id" title="binder">t</span></a> <a id="T:76" class="idref" href="#T:76"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;<span class="id" title="definition">empty</span> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t:75"><span class="id" title="variable">t</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T:76"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma:74"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t:75"><span class="id" title="variable">t</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T:76"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_11_stlc.html#weakening"><span class="id" title="lemma">weakening</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">discriminate</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab37"></a><h3 class="section">Substitution and Typing</h3>


<div class="paragraph"> </div>

<ul class="doclist">
<li> The main lemma we need is that substituting terms preserves types.

</li>
<li> Note that the term t has type T in any context

</li>
<li> However, the value that we are substituting must be a closed term, i.e.,
     typeable under the empty context.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="substitution_preserves_typing" class="idref" href="#substitution_preserves_typing"><span class="id" title="lemma">substitution_preserves_typing</span></a> : <span class="id" title="keyword">forall</span> <a id="Gamma:77" class="idref" href="#Gamma:77"><span class="id" title="binder">Gamma</span></a> <a id="x:78" class="idref" href="#x:78"><span class="id" title="binder">x</span></a> <a id="U:79" class="idref" href="#U:79"><span class="id" title="binder">U</span></a> <a id="t:80" class="idref" href="#t:80"><span class="id" title="binder">t</span></a> <a id="v:81" class="idref" href="#v:81"><span class="id" title="binder">v</span></a> <a id="T:82" class="idref" href="#T:82"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#x:78"><span class="id" title="variable">x</span></a> <span class="id" title="notation">|-&gt;</span> <a class="idref" href="lec_11_stlc.html#U:79"><span class="id" title="variable">U</span></a> <span class="id" title="notation">;</span> <a class="idref" href="lec_11_stlc.html#Gamma:77"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t:80"><span class="id" title="variable">t</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T:82"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">empty</span> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#v:81"><span class="id" title="variable">v</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#U:79"><span class="id" title="variable">U</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#Gamma:77"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">[</span></a><a class="idref" href="lec_11_stlc.html#x:78"><span class="id" title="variable">x</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">:=</span></a><a class="idref" href="lec_11_stlc.html#v:81"><span class="id" title="variable">v</span></a><a class="idref" href="lec_11_stlc.html#83dbd6b289334c93dbc0440277d51136"><span class="id" title="notation">]</span></a><a class="idref" href="lec_11_stlc.html#t:80"><span class="id" title="variable">t</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T:82"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">x</span> <span class="id" title="var">U</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span> <span class="id" title="var">T</span> <span class="id" title="var">Ht</span> <span class="id" title="var">Hv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">Gamma</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">T</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;proceed&nbsp;by&nbsp;induction&nbsp;on&nbsp;terms&nbsp;t.<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case&nbsp;t&nbsp;=&nbsp;y:<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;that&nbsp;Γ,&nbsp;x:&nbsp;U(y)&nbsp;=&nbsp;Some&nbsp;T&nbsp;by&nbsp;inversion&nbsp;on&nbsp;Γ,&nbsp;x:&nbsp;U&nbsp;⊢&nbsp;y:&nbsp;T.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;Γ&nbsp;⊢&nbsp;(<span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">v</span></span>&nbsp;y):&nbsp;T.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;proceed&nbsp;by&nbsp;case&nbsp;analysis&nbsp;on&nbsp;whether&nbsp;x&nbsp;==&nbsp;y&nbsp;or&nbsp;not.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">T</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">s</span> <span class="id" title="var">into</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="axiom">eqb_stringP</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case&nbsp;x=y&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;that&nbsp;Γ,&nbsp;y:&nbsp;U(y)&nbsp;=&nbsp;Some&nbsp;T&nbsp;so&nbsp;that&nbsp;U&nbsp;=&nbsp;T.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;From&nbsp;induction&nbsp;on&nbsp;terms&nbsp;we&nbsp;have&nbsp;that&nbsp;empty&nbsp;⊢&nbsp;v&nbsp;:&nbsp;U.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thus&nbsp;the&nbsp;result&nbsp;follows&nbsp;by&nbsp;weakining.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">update_eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#weakening_empty"><span class="id" title="lemma">weakening_empty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case&nbsp;x&lt;&gt;y&nbsp;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;Γ,&nbsp;y:&nbsp;U(y)&nbsp;=&nbsp;Some&nbsp;T&nbsp;when&nbsp;x&nbsp;&lt;&gt;&nbsp;y.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;follows&nbsp;by&nbsp;T_Var&nbsp;and&nbsp;properties&nbsp;of&nbsp;updating&nbsp;a&nbsp;context.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#T_Var"><span class="id" title="constructor">T_Var</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">update_neq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case&nbsp;t&nbsp;=&nbsp;t1&nbsp;t2:<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;Γ&nbsp;⊢&nbsp;(<span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">v</span></span>&nbsp;t1)&nbsp;(<span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">v</span></span>&nbsp;t2)&nbsp;\in&nbsp;T.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;suffices&nbsp;to&nbsp;show&nbsp;that&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)&nbsp;Γ&nbsp;⊢&nbsp;(<span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">v</span></span>&nbsp;t1)&nbsp;\in&nbsp;T2&nbsp;-&gt;&nbsp;T<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2)&nbsp;Γ&nbsp;⊢&nbsp;(<span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">v</span></span>&nbsp;t2)&nbsp;\in&nbsp;T2<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;T_App.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;H1:&nbsp;&nbsp;x&nbsp;|-&gt;&nbsp;U;&nbsp;Gamma&nbsp;⊢&nbsp;t1&nbsp;\in&nbsp;(T2&nbsp;-&gt;&nbsp;T)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;H2:&nbsp;&nbsp;x&nbsp;|-&gt;&nbsp;U;&nbsp;Gamma&nbsp;⊢&nbsp;t2&nbsp;\in&nbsp;T2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;inversion&nbsp;on&nbsp;x&nbsp;|-&gt;&nbsp;U&nbsp;;&nbsp;Gamma&nbsp;⊢&nbsp;t1&nbsp;t2&nbsp;\in&nbsp;T1.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;two&nbsp;induction&nbsp;hypotheses<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IHt1:&nbsp;(x&nbsp;|-&gt;&nbsp;U;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t1&nbsp;\in&nbsp;T)&nbsp;&nbsp;-&gt;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;<span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">v</span></span>&nbsp;t1&nbsp;\in&nbsp;T&nbsp;for&nbsp;any&nbsp;T<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IHt2:&nbsp;(x&nbsp;|-&gt;&nbsp;U;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t2&nbsp;\in&nbsp;T)&nbsp;&nbsp;-&gt;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;<span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">v</span></span>&nbsp;t2&nbsp;\in&nbsp;T&nbsp;for&nbsp;any&nbsp;T<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;that&nbsp;Γ&nbsp;⊢&nbsp;<span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">v</span></span>&nbsp;t1&nbsp;\in&nbsp;T2&nbsp;-&gt;&nbsp;T&nbsp;by&nbsp;IHt1&nbsp;and&nbsp;H1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;that&nbsp;Γ&nbsp;⊢&nbsp;<span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">v</span></span>&nbsp;t1&nbsp;\in&nbsp;T2&nbsp;by&nbsp;IHt2&nbsp;and&nbsp;H2.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">T</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_11_stlc.html#T_App"><span class="id" title="constructor">T_App</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case&nbsp;t&nbsp;=&nbsp;\y:&nbsp;T2,&nbsp;t0&nbsp;:&nbsp;T2&nbsp;-&gt;&nbsp;T1:<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;Γ&nbsp;⊢&nbsp;(<span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">v</span></span>&nbsp;\y:&nbsp;T2,&nbsp;t0)&nbsp;:&nbsp;T2&nbsp;-&gt;&nbsp;T1.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;H1:&nbsp;&nbsp;Gamma,&nbsp;x:&nbsp;U,&nbsp;y:&nbsp;T2&nbsp;⊢&nbsp;t0&nbsp;:&nbsp;T1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;inversion&nbsp;on&nbsp;Gamma,&nbsp;x:&nbsp;U&nbsp;⊢&nbsp;\y:&nbsp;T2,&nbsp;t0&nbsp;:&nbsp;T2&nbsp;-&gt;&nbsp;T1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;suffices&nbsp;to&nbsp;show&nbsp;that&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ,&nbsp;y:&nbsp;T2&nbsp;&nbsp;⊢&nbsp;if&nbsp;x&nbsp;==&nbsp;y&nbsp;then&nbsp;(\y:&nbsp;T2,&nbsp;to)&nbsp;else&nbsp;(<span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">v</span></span>&nbsp;t0)&nbsp;:&nbsp;T2&nbsp;-&gt;&nbsp;T1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;T_Abs.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">T</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">s</span> <span class="id" title="var">into</span> <span class="id" title="var">y</span>, <span class="id" title="var">t</span> <span class="id" title="var">into</span> <span class="id" title="var">S</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;proceed&nbsp;by&nbsp;case&nbsp;analysis&nbsp;on&nbsp;x&nbsp;==&nbsp;y.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="axiom">eqb_stringP</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#T_Abs"><span class="id" title="constructor">T_Abs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case&nbsp;x=y&nbsp;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;shadows&nbsp;x&nbsp;and&nbsp;therefore&nbsp;has&nbsp;the&nbsp;appropriate&nbsp;type.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">update_shadow</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ </div>

<div class="doc">
         Case x&lt;&gt;y:

<div class="paragraph"> </div>

           We have one inductive hypothesis
           IHt1: (Γ, x: U ⊢ t1: T) -&gt; Γ ⊢ <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">v</span></span> t0: T for any T

<div class="paragraph"> </div>

           The result follows by the induction hypothesis and permutation
           of the context.
       
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">update_permute</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case&nbsp;t&nbsp;=&nbsp;true:<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T_True&nbsp;can&nbsp;be&nbsp;applied&nbsp;in&nbsp;any&nbsp;context.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">T</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#T_True"><span class="id" title="constructor">T_True</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case&nbsp;t&nbsp;=&nbsp;false:<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Similar&nbsp;to&nbsp;case&nbsp;t&nbsp;=&nbsp;true.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">T</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#T_False"><span class="id" title="constructor">T_False</span></a>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case&nbsp;t&nbsp;=&nbsp;if&nbsp;t1&nbsp;t2&nbsp;t3<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Similar&nbsp;to&nbsp;case&nbsp;t&nbsp;=&nbsp;t1&nbsp;t2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">T</span> <span class="id" title="var">Gamma</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#T_If"><span class="id" title="constructor">T_If</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> Finally the proof of preservation.

</li>
</ul>
 
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <a id="preservation" class="idref" href="#preservation"><span class="id" title="lemma">preservation</span></a> : <span class="id" title="keyword">forall</span> <a id="t:83" class="idref" href="#t:83"><span class="id" title="binder">t</span></a> <a id="t':84" class="idref" href="#t':84"><span class="id" title="binder">t'</span></a> <a id="T:85" class="idref" href="#T:85"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;<span class="id" title="definition">empty</span> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t:83"><span class="id" title="variable">t</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T:85"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#t:83"><span class="id" title="variable">t</span></a> <a class="idref" href="lec_11_stlc.html#:::x_'--&gt;'_x"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="lec_11_stlc.html#t':84"><span class="id" title="variable">t'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">empty</span> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t':84"><span class="id" title="variable">t'</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T:85"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span> <span class="id" title="var">T</span> <span class="id" title="var">HT</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">t'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> <span class="id" title="definition">empty</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Gamma</span>.<br/>

<br/>
</div>

<div class="doc">
     By induction on the typing derivation.
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">HT</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t'</span> <span class="id" title="var">HE</span>; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">inversion</span> <span class="id" title="var">HE</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>].<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;T_App&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HE</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Most&nbsp;of&nbsp;the&nbsp;cases&nbsp;are&nbsp;immediate&nbsp;by&nbsp;induction,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;eauto&nbsp;takes&nbsp;care&nbsp;of&nbsp;them&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;ST_AppAbs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#substitution_preserves_typing"><span class="id" title="lemma">substitution_preserves_typing</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">T2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HT1</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab38"></a><h2 class="section">Type-Soundness: Putting It Together</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> We can now formalize the statement that well-typed terms
     do not get stuck.

</li>
<li> First recall the definition of normal forms.

</li>
</ul>

<div class="paragraph"> </div>

 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="normal_form" class="idref" href="#normal_form"><span class="id" title="definition">normal_form</span></a> {<a id="X:86" class="idref" href="#X:86"><span class="id" title="binder">X</span></a> : <span class="id" title="keyword">Type</span>} (<a id="R:87" class="idref" href="#R:87"><span class="id" title="binder">R</span></a> : <span class="id" title="definition">relation</span> <a class="idref" href="lec_11_stlc.html#X:86"><span class="id" title="variable">X</span></a>) (<a id="t:88" class="idref" href="#t:88"><span class="id" title="binder">t</span></a> : <a class="idref" href="lec_11_stlc.html#X:86"><span class="id" title="variable">X</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="t':89" class="idref" href="#t':89"><span class="id" title="binder">t'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="lec_11_stlc.html#R:87"><span class="id" title="variable">R</span></a> <a class="idref" href="lec_11_stlc.html#t:88"><span class="id" title="variable">t</span></a> <a class="idref" href="lec_11_stlc.html#t':89"><span class="id" title="variable">t'</span></a>.<br/>

<br/>
</div>

<div class="doc">
<ul class="doclist">
<li> A term is stuck if there is no reduction it can take and it is
     not a value (which syntactically indicates that there is no more
     computation left to be done).

</li>
<li> Thus this notionof stuck does not assume that  normal forms and
     values coincide.

</li>
</ul>
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="stuck" class="idref" href="#stuck"><span class="id" title="definition">stuck</span></a> (<a id="t:90" class="idref" href="#t:90"><span class="id" title="binder">t</span></a>:<a class="idref" href="lec_11_stlc.html#tm"><span class="id" title="inductive">tm</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;(<a class="idref" href="lec_11_stlc.html#normal_form"><span class="id" title="definition">normal_form</span></a> <a class="idref" href="lec_11_stlc.html#step"><span class="id" title="inductive">step</span></a>) <a class="idref" href="lec_11_stlc.html#t:90"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="lec_11_stlc.html#value"><span class="id" title="inductive">value</span></a> <a class="idref" href="lec_11_stlc.html#t:90"><span class="id" title="variable">t</span></a>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <a id="type_soundness" class="idref" href="#type_soundness"><span class="id" title="lemma">type_soundness</span></a> : <span class="id" title="keyword">forall</span> <a id="t:91" class="idref" href="#t:91"><span class="id" title="binder">t</span></a> <a id="t':92" class="idref" href="#t':92"><span class="id" title="binder">t'</span></a> <a id="T:93" class="idref" href="#T:93"><span class="id" title="binder">T</span></a>,<br/>
&nbsp;&nbsp;<span class="id" title="definition">empty</span> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">⊢</span></a> <a class="idref" href="lec_11_stlc.html#t:91"><span class="id" title="variable">t</span></a> <a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">\</span></a><a class="idref" href="lec_11_stlc.html#aa8312987d2180c84572f43708410ddc"><span class="id" title="notation">in</span></a> <a class="idref" href="lec_11_stlc.html#T:93"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="lec_11_stlc.html#t:91"><span class="id" title="variable">t</span></a> <a class="idref" href="lec_11_stlc.html#a781e4b1e2c022f0326182a9bd099911"><span class="id" title="notation">--&gt;*</span></a> <a class="idref" href="lec_11_stlc.html#t':92"><span class="id" title="variable">t'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~(</span></a><a class="idref" href="lec_11_stlc.html#stuck"><span class="id" title="definition">stuck</span></a> <a class="idref" href="lec_11_stlc.html#t':92"><span class="id" title="variable">t'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.2/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">t'</span> <span class="id" title="var">T</span> <span class="id" title="var">Hhas_type</span> <span class="id" title="var">Hmulti</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_11_stlc.html#stuck"><span class="id" title="definition">stuck</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hnf</span> <span class="id" title="var">Hnot_val</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="lec_11_stlc.html#normal_form"><span class="id" title="definition">normal_form</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnf</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By&nbsp;induction&nbsp;on&nbsp;multi-step&nbsp;relation.<br/>
&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hmulti</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----------------&nbsp;multi_refl<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t&nbsp;--&gt;*&nbsp;t<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;t&nbsp;is&nbsp;not&nbsp;stuck.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;By&nbsp;progress,&nbsp;we&nbsp;have&nbsp;that&nbsp;either&nbsp;t&nbsp;is&nbsp;a&nbsp;value&nbsp;or&nbsp;or&nbsp;it&nbsp;has&nbsp;a&nbsp;step.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thus&nbsp;this&nbsp;case&nbsp;is&nbsp;proven.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="lec_11_stlc.html#progress"><span class="id" title="lemma">progress</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hhas_type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hhas_type</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Case<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t&nbsp;--&gt;&nbsp;t1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t1&nbsp;--&gt;*&nbsp;t'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------&nbsp;multi_step<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t&nbsp;--&gt;*&nbsp;t'<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;have&nbsp;to&nbsp;show&nbsp;that&nbsp;t'&nbsp;is&nbsp;not&nbsp;stuck.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Our&nbsp;inductive&nbsp;hypothesis&nbsp;is:&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;⊢&nbsp;t'&nbsp;:&nbsp;T&nbsp;and&nbsp;t1&nbsp;--&gt;*&nbsp;t'&nbsp;implies&nbsp;that&nbsp;t'&nbsp;is&nbsp;not&nbsp;stuck.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thus&nbsp;it&nbsp;suffices&nbsp;to&nbsp;show&nbsp;that&nbsp;empty&nbsp;⊢&nbsp;t'&nbsp;:&nbsp;T.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;holds&nbsp;by&nbsp;preservation&nbsp;provided&nbsp;we&nbsp;can&nbsp;show&nbsp;that&nbsp;t&nbsp;--&gt;&nbsp;t1&nbsp;which<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;we&nbsp;have&nbsp;in&nbsp;this&nbsp;case&nbsp;of&nbsp;the&nbsp;induction.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHHmulti</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="lec_11_stlc.html#preservation"><span class="id" title="lemma">preservation</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hhas_type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hhas_type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab39"></a><h2 class="section">Recursion</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> STLC has many nice properties.

</li>
<li> At this point, we may wonder if we lost expressive power?

</li>
<li> As it turns out, we will no longer be able to write recursive terms.

</li>
</ul>

<div class="paragraph"> </div>

 
<div class="paragraph"> </div>

<a id="lab40"></a><h3 class="section">Can you type the Y-Combinator?</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;(\f,&nbsp;(\x,&nbsp;f&nbsp;(x&nbsp;x))&nbsp;(\x,&nbsp;f&nbsp;(x&nbsp;x))<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;(\f:&nbsp;?T,&nbsp;(\x:&nbsp;?S,&nbsp;f&nbsp;(x&nbsp;x))&nbsp;(\x:&nbsp;?U,&nbsp;f&nbsp;(x&nbsp;x))<br/>
*)</span><br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

<ul class="doclist">
<li> Let's look at (\x: ?S, f (x x)

</li>
<li> We have that x has type ?S

</li>
<li> Moreover x is applied to itself.

</li>
<li> By application, we know that ?S = ?S2 -&gt; ?S1 and ?S = ?S2.

</li>
<li> In other words, we have that ?S2 -&gt; ?S1 = ?S2.

</li>
<li> This only has trivial solutions.

</li>
<li> Thus we cannot type the Y-combinator

</li>
</ul>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<a id="lab41"></a><h3 class="section">Syntax</h3>

</div>
<div class="code">
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;t&nbsp;::=&nbsp;...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;fix&nbsp;t<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab42"></a><h3 class="section">Values</h3>


<div class="paragraph"> </div>

<ul class="doclist">
<li> Nothing changes

</li>
</ul>

<div class="paragraph"> </div>

 
<div class="paragraph"> </div>

<a id="lab43"></a><h3 class="section">Operational Semantics</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;same&nbsp;operational&nbsp;rules&nbsp;and&nbsp;...<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;----------------------------------------------&nbsp;ST_fix<br/>
&nbsp;&nbsp;&nbsp;&nbsp;fix&nbsp;(\x:&nbsp;T,&nbsp;t)&nbsp;--&gt;&nbsp;<span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="keyword">fix</span></span> <span class="inlinecode">(\<span class="id" title="var">x</span>:</span> <span class="inlinecode"><span class="id" title="var">T</span>,</span> <span class="inlinecode"><span class="id" title="var">t</span>)</span>&nbsp;t<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab44"></a><h3 class="section">Typing Rules</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;same&nbsp;typing&nbsp;rules&nbsp;and&nbsp;...<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;t&nbsp;:&nbsp;T&nbsp;-&gt;&nbsp;T<br/>
&nbsp;&nbsp;------------------&nbsp;T_fix<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;fix&nbsp;t&nbsp;:&nbsp;T<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab45"></a><h3 class="section">Example 1: Factorial</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;Γ&nbsp;⊢&nbsp;(\f:&nbsp;nat&nbsp;-&gt;&nbsp;nat,&nbsp;\n:&nbsp;nat,&nbsp;if&nbsp;n&nbsp;==&nbsp;0&nbsp;then&nbsp;0&nbsp;else&nbsp;f&nbsp;(n-1))&nbsp;:&nbsp;(nat&nbsp;-&gt;&nbsp;nat)&nbsp;-&gt;&nbsp;(nat&nbsp;-&gt;&nbsp;nat)<br/>
&nbsp;&nbsp;--------------------------------------------------------------------------------------&nbsp;T_fix<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;fix&nbsp;(\f:&nbsp;nat&nbsp;-&gt;&nbsp;nat,&nbsp;\n:&nbsp;nat,&nbsp;if&nbsp;n&nbsp;==&nbsp;0&nbsp;then&nbsp;0&nbsp;else&nbsp;f&nbsp;(n-1))&nbsp;:&nbsp;nat&nbsp;-&gt;&nbsp;nat<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab46"></a><h3 class="section">Example 2: Non-termination</h3>

</div>
<div class="code">
<span class="comment">(*<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;(\f:&nbsp;nat&nbsp;-&gt;&nbsp;nat,&nbsp;\n:&nbsp;nat,&nbsp;f&nbsp;n)&nbsp;:&nbsp;(nat&nbsp;-&gt;&nbsp;nat)&nbsp;-&gt;&nbsp;(nat&nbsp;-&gt;&nbsp;nat)<br/>
&nbsp;&nbsp;-----------------------------------------------------------------------&nbsp;T_fix<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Γ&nbsp;⊢&nbsp;fix&nbsp;(\f:&nbsp;nat&nbsp;-&gt;&nbsp;nat,&nbsp;\n:&nbsp;nat,&nbsp;f&nbsp;n)&nbsp;:&nbsp;nat&nbsp;-&gt;&nbsp;nat<br/>
<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab47"></a><h2 class="section">Goal for today</h2>


<div class="paragraph"> </div>

<ul class="doclist">
<li> We saw the simply-typed Lambda Calculus (STLC) and it's type-system.

</li>
<li> We proved type-soundness via progress and preservation.

</li>
<li> We saw that STLC could not express recursion, and hence, is not
     Turing complete.

</li>
</ul>
 
</div>
<div class="code">
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>